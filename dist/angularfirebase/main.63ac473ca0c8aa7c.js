"use strict";(self.webpackChunkangularfirebase=self.webpackChunkangularfirebase||[]).push([[179],{2069:(at,Te,V)=>{var f=V(2560);let X=null;function k(){return X}const ye=new f.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function te(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const F=new f.OlP("Location Initialized");let j=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){B()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){B()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ie(){return new j((0,f.LFG)(ye))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function Ee(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xe(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ke)},providedIn:"root"}),n})();const we=new f.OlP("appBaseHref");let Ke=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ee(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+xe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+xe(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+xe(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(we,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ke=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ee(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+xe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+xe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(we,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ae(fn(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xe(r))}normalize(t){return n.stripTrailingSlash(function Nt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,fn(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=xe,n.joinWithSlash=Ee,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Et(){return new ze((0,f.LFG)(fe))}()},providedIn:"root"}),n})();function fn(n){return n.replace(/\/index.html$/,"")}let an=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ms{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ki=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ms(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const g=r.get(a);r.move(g,u),Rs(g,i)}});for(let i=0,a=r.length;i<a;i++){const g=r.get(i).context;g.index=i,g.count=a,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rs(n,e){n.context.$implicit=e.item}let Kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Qd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Qd{constructor(){this.$implicit=null,this.ngIf=null}}function tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let yc=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),u=-1===i.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),_c=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:u}=this;this._viewRef=r.createEmbeddedView(i,a,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[f.TTD]}),n})(),Os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Ql(n){return"server"===n}let Jl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new mp((0,f.LFG)(ye),window)}),n})();class mp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lo(this.window.history)||lo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class tl extends class Ep extends class K{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){X||(X=n)}(new tl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xo(){return nl=nl||document.querySelector("base"),nl?nl.getAttribute("href"):null}();return null==t?null:function lu(n){rl=rl||document.createElement("a"),rl.setAttribute("href",n);const e=rl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Yi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let rl,nl=null;const ea=new f.OlP("TRANSITION_ID"),cu=[{provide:f.ip1,useFactory:function uu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ea,ye,f.zs3],multi:!0}];let du=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Li=new f.OlP("EventManagerPlugins");let na=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Li),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class bs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ip=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),rs=(()=>{class n extends Ip{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(hu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(hu))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function hu(n){k().remove(n)}const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ii=/%COMP%/g;function sa(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?sa(n,i,t):(i=i.replace(Ii,n),t.push(i))}return t}function Sc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Us(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Bm(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Tp(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=sa(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(na),f.LFG(rs),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Us{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=po[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=po[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sc(r)):this.eventManager.addEventListener(e,t,Sc(r))}}function yo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bm extends Us{constructor(e,t,r,i){super(e),this.component=r;const a=sa(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function go(n){return"_ngcontent-%COMP%".replace(Ii,n)}(i+"-"+r.id),this.hostAttr=function ol(n){return"_nghost-%COMP%".replace(Ii,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Tp extends Us{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=sa(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const g=document.createElement("style");g.textContent=a[u],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fu=(()=>{class n extends bs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=["alt","control","meta","shift"],jm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wh=(()=>{class n extends bs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),oa.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),u+=b+".")}),u+=a,0!=r.length||0===a.length)return null;const v={};return v.domEventName=i,v.fullKey=u,v}static matchEventFullKeyCode(t,r){let i=jm[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),oa.forEach(u=>{u!==i&&(0,pu[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Eh=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function al(){tl.makeCurrent()},multi:!0},{provide:ye,useFactory:function ll(){return(0,f.RDi)(document),document},deps:[]}]),Ih=new f.OlP(""),cn=[{provide:f.rWj,useClass:class ta{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const g=function(v){u=u||v,a--,0==a&&r(u)};i.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ap=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Vr(){return new f.qLn},deps:[]},{provide:Li,useClass:fu,multi:!0,deps:[ye,f.R0b,f.Lbi]},{provide:Li,useClass:wh,multi:!0,deps:[ye]},{provide:mo,useClass:mo,deps:[na,rs,f.AFp]},{provide:f.FYo,useExisting:mo},{provide:Ip,useExisting:rs},{provide:rs,useClass:rs,deps:[ye]},{provide:na,useClass:na,deps:[Li,f.R0b]},{provide:class $a{},useClass:du,deps:[]},[]];let bh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:ea,useExisting:f.AFp},cu]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ih,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ap,...cn],imports:[Os,f.hGG]}),n})(),xp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Th(){return new xp((0,f.LFG)(ye))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Yr=V(2218);let yn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),ca=(()=>{class n{constructor(){this.messageSource=new Yr.xQ,this.clearSource=new Yr.xQ,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ir=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[yn.STARTS_WITH,yn.CONTAINS,yn.NOT_CONTAINS,yn.ENDS_WITH,yn.EQUALS,yn.NOT_EQUALS],numeric:[yn.EQUALS,yn.NOT_EQUALS,yn.LESS_THAN,yn.LESS_THAN_OR_EQUAL_TO,yn.GREATER_THAN,yn.GREATER_THAN_OR_EQUAL_TO],date:[yn.DATE_IS,yn.DATE_IS_NOT,yn.DATE_BEFORE,yn.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Yr.xQ,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nh=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os]}),n})();var kp=V(328),li=V(7473),xn=V(4858),et=V(4139),En=V(8189),pl=V(6675);function Oh(...n){return function wu(){return(0,pl.J)(1)}()((0,et.of)(...n))}var Eu=V(7507);function Hs(...n){const e=n[n.length-1];return(0,Eu.K)(e)?(n.pop(),t=>Oh(n,t,e)):t=>Oh(n,t)}var Bn=V(14);function gl(){return n=>n.lift(new Iu)}class Iu{call(e,t){return t.subscribe(new Fp(e))}}class Fp extends Bn.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var mt=V(6942);function Ci(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new kc(n,e,t))}}class kc{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Gm(e,this.accumulator,this.seed,this.hasSeed))}}class Gm extends Bn.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}class ml{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new $s(e,this.compare,this.keySelector))}}class $s extends Bn.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function Ur(n,e){return function(r){return r.lift(new Fc(n,e))}}class Fc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Lc(e,this.predicate,this.thisArg))}}class Lc extends Bn.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}var He,br=V(1879),Cu=(V(736),V(5003)),me=V(1670),_l=V(5402),da=V(4692),wo=V(8118),zt=V(7748),ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cr={},kh=kh||{},ot=ha||self;function Vc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function is(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Uc="closure_uid_"+(1e9*Math.random()>>>0),Bc=0;function Vp(n,e,t){return n.call.apply(n.bind,arguments)}function Tu(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function sr(n,e,t){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vp:Tu).apply(null,arguments)}function E(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function C(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return e.prototype[i].apply(r,u)}}function x(){this.s=this.s,this.o=this.o}x.prototype.s=!1,x.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Lp(n){Object.prototype.hasOwnProperty.call(n,Uc)&&n[Uc]||(n[Uc]=++Bc)}(this)},x.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const z=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Q(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function he(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Vc(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Re(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ot.addEventListener("test",()=>{},e),ot.removeEventListener("test",()=>{},e)}catch{}return n}();function We(n){return/^[\s\xa0]*$/.test(n)}function It(){var n=ot.navigator;return n&&(n=n.userAgent)?n:""}function ut(n){return-1!=It().indexOf(n)}function or(n){return or[" "](n),n}or[" "]=function(){};var jc,n,vl=ut("Opera"),An=ut("Trident")||ut("MSIE"),Gs=ut("Edge"),Br=Gs||An,Ti=ut("Gecko")&&!(-1!=It().toLowerCase().indexOf("webkit")&&!ut("Edge"))&&!(ut("Trident")||ut("MSIE"))&&!ut("Edge"),ar=-1!=It().toLowerCase().indexOf("webkit")&&!ut("Edge");function Du(){var n=ot.document;return n?n.documentMode:void 0}e:{var Hc="",Up=(n=It(),Ti?/rv:([^\);]+)(\)|;)/.exec(n):Gs?/Edge\/([\d\.]+)/.exec(n):An?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ar?/WebKit\/(\S+)/.exec(n):vl?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Up&&(Hc=Up?Up[1]:""),An){var Fh=Du();if(null!=Fh&&Fh>parseFloat(Hc)){jc=String(Fh);break e}}jc=Hc}var av=ot.document&&An&&(Du()||parseInt(jc,10))||void 0;function Su(n,e){if(Re.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ti){e:{try{or(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zm[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Su.$.h.call(this)}}C(Su,Re);var zm={2:"touch",3:"pen",4:"mouse"};Su.prototype.h=function(){Su.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gc="closure_listenable_"+(1e6*Math.random()|0),Au=0;function jp(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Au,this.fa=this.ia=!1}function Lh(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Vh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mu(n){const e={};for(const t in n)e[t]=n[t];return e}const qm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wm(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<qm.length;a++)t=qm[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xu(n){this.src=n,this.g={},this.h=0}function wl(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=z(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Lh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Uh(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}xu.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=Uh(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new jp(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Km="closure_lm_"+(1e6*Math.random()|0),fa={};function Bh(n,e,t,r,i){if(r&&r.once)return jh(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bh(n,e[a],t,r,i);return null}return t=Hh(t),n&&n[Gc]?n.O(e,t,is(r)?!!r.capture:!!r,i):Hp(n,e,t,!1,r,i)}function Hp(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=is(i)?!!i.capture:!!i,g=zc(n);if(g||(n[Km]=g=new xu(n)),(t=g.add(e,t,r,u,a)).proxy)return t;if(r=function Zm(){const e=uv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ve||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jh(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)jh(n,e[a],t,r,i);return null}return t=Hh(t),n&&n[Gc]?n.P(e,t,is(r)?!!r.capture:!!r,i):Hp(n,e,t,!0,r,i)}function Ym(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Ym(n,e[a],t,r,i);else r=is(r)?!!r.capture:!!r,t=Hh(t),n&&n[Gc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Uh(a=n.g[e],t,r,i))&&(Lh(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=zc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Uh(e,t,r,i)),(t=-1<n?e[n]:null)&&$p(t))}function $p(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Gc])wl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zc(e))?(wl(t,n),0==t.h&&(t.src=null,e[Km]=null)):Lh(n)}}}function Qm(n){return n in fa?fa[n]:fa[n]="on"+n}function uv(n,e){if(n.fa)n=!0;else{e=new Su(e,this);var t=n.listener,r=n.la||n.src;n.ia&&$p(n),n=t.call(r,e)}return n}function zc(n){return(n=n[Km])instanceof xu?n:null}var qc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hh(n){return"function"==typeof n?n:(n[qc]||(n[qc]=function(e){return n.handleEvent(e)}),n[qc])}function $n(){x.call(this),this.i=new xu(this),this.S=this,this.J=null}function Tr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Re(e,n);else if(e instanceof Re)e.target=e.target||n;else{var i=e;Wm(e=new Re(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=El(u,r,!0,e)&&i}if(i=El(u=e.g=n,r,!0,e)&&i,i=El(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=El(u=e.g=t[a],r,!1,e)&&i}function El(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.fa&&u.capture==t){var g=u.listener,v=u.la||u.src;u.ia&&wl(n.i,u),i=!1!==g.call(v,r)&&i}}return i&&!r.defaultPrevented}C($n,x),$n.prototype[Gc]=!0,$n.prototype.removeEventListener=function(n,e,t,r){Ym(this,n,e,t,r)},$n.prototype.N=function(){if($n.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lh(t[r]);delete n.g[e],n.h--}}this.J=null},$n.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$n.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gp=ot.JSON.stringify;function Jm(){var n=Wp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zs=new class zp{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new qp,n=>n.reset());class qp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wc(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Xm(n){ot.setTimeout(()=>{throw n},0)}let Kc,pa=!1,Wp=new class cv{constructor(){this.h=this.g=null}add(e,t){const r=zs.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Kp=()=>{const n=ot.Promise.resolve(void 0);Kc=()=>{n.then(ey)}};var ey=()=>{for(var n;n=Jm();){try{n.h.call(n.g)}catch(t){Xm(t)}var e=zs;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pa=!1};function Zc(n,e){$n.call(this),this.h=n||1,this.g=e||ot,this.j=sr(this.qb,this),this.l=Date.now()}function Pu(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function $h(n,e,t){if("function"==typeof n)t&&(n=sr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=sr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ot.setTimeout(n,e||0)}function Gh(n){n.g=$h(()=>{n.g=null,n.i&&(n.i=!1,Gh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}C(Zc,$n),(He=Zc.prototype).ga=!1,He.T=null,He.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tr(this,"tick"),this.ga&&(Pu(this),this.start()))}},He.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.N=function(){Zc.$.N.call(this),Pu(this),delete this.g};class qs extends x{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gh(this)}N(){super.N(),this.g&&(ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nu(n){x.call(this),this.h=n,this.g={}}C(Nu,x);var zh=[];function Ru(n,e,t,r){Array.isArray(t)||(t&&(zh[0]=t.toString()),t=zh);for(var i=0;i<t.length;i++){var a=Bh(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function qh(n){Vh(n.g,function(e,t){this.g.hasOwnProperty(t)&&$p(e)},n),n.g={}}function Ws(){this.g=!0}function ga(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ny(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return Gp(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Nu.prototype.N=function(){Nu.$.N.call(this),qh(this)},Nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.Ea=function(){this.g=!1},Ws.prototype.info=function(){};var Cs={},Yc=null;function Ou(){return Yc=Yc||new $n}function ma(n){Re.call(this,Cs.Ta,n)}function Qc(n){const e=Ou();Tr(e,new ma(e))}function ry(n,e){Re.call(this,Cs.STAT_EVENT,n),this.stat=e}function ui(n){const e=Ou();Tr(e,new ry(e,n))}function Wh(n,e){Re.call(this,Cs.Ua,n),this.size=e}function Il(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ot.setTimeout(function(){n()},e)}Cs.Ta="serverreachability",C(ma,Re),Cs.STAT_EVENT="statevent",C(ry,Re),Cs.Ua="timingevent",C(Wh,Re);var Kh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ya(){}function Zp(){}ya.prototype.h=null;var Yp,Eo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yh(){Re.call(this,"d")}function Qh(){Re.call(this,"c")}function Xc(){}function ed(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Nu(this),this.P=fv,this.V=new Zc(n=Br?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}C(Yh,Re),C(Qh,Re),C(Xc,ya),Xc.prototype.g=function(){return new XMLHttpRequest},Xc.prototype.i=function(){return{}},Yp=new Xc;var fv=45e3,Ks={},ss={};function Qp(n,e,t){n.L=1,n.v=Ys(Zs(e)),n.s=t,n.S=!0,sy(n,null)}function sy(n,e){n.G=Date.now(),Jh(n),n.A=Zs(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),tg(t.i,"t",r),n.C=0,t=n.l.J,n.h=new iy,n.g=O0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new qs(sr(n.Pa,n,n.g),n.O)),Ru(n.U,n.g,"readystatechange",n.nb),e=n.I?Mu(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Qc(),function dv(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",g=a.split("&"),v=0;v<g.length;v++){var b=g[v].split("=");if(1<b.length){var S=b[0];b=b[1];var P=S.split("_");u=2<=P.length&&"type"==P[1]?u+(S+"=")+b+"&":u+(S+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function pv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function gv(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=T0(n,t),i==ss){4==e&&(n.o=4,ui(14),r=!1),ga(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ks){n.o=4,ui(15),ga(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ga(n.j,n.m,i,null),Jp(n,i)}pv(n)&&i!=ss&&i!=Ks&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),wv(e),e.M=!0,ui(11))):(ga(n.j,n.m,t,"[Invalid Chunked Response]"),_a(n),bl(n))}function T0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ss:(t=Number(e.substring(t,r)),isNaN(t)?Ks:(r+=1)+t>e.length?ss:(e=e.slice(r,r+t),n.C=r+t,e))}function Jh(n){n.Y=Date.now()+n.P,Xh(n,n.P)}function Xh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Il(sr(n.lb,n),e)}function ku(n){n.B&&(ot.clearTimeout(n.B),n.B=null)}function bl(n){0==n.l.H||n.J||P0(n.l,n)}function _a(n){ku(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Pu(n.V),qh(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Jp(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||d(t.i,n)))if(!n.K&&d(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ju(t),dy(t)}cd(t),ui(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Il(sr(t.ib,t),6e3));if(1>=y(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Hu(t,11)}else if((n.K||t.g==n)&&ju(t),!We(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const S=b[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const P=b[4];null!=P&&(t.Ga=P,t.l.info("SVER="+t.Ga));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Y=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;a.g||-1==Y.indexOf("spdy")&&-1==Y.indexOf("quic")&&-1==Y.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(p(a,a.h),a.h=null))}if(r.F){const ue=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.Da=ue,In(r.I,r.F,ue))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=R0(r,r.J?r.pa:null,r.Y),u.K){_(r.i,u);var g=u,v=r.L;v&&g.setTimeout(v),g.B&&(ku(g),Jh(g)),r.g=u}else x0(r);0<t.j.length&&fy(t)}else"stop"!=b[0]&&"close"!=b[0]||Hu(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Hu(t,7):vv(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Qc()}catch{}}function Dr(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vc(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Io(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Vc(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function td(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Vc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(He=ed.prototype).setTimeout=function(n){this.P=n},He.nb=function(n){n=n.target;const e=this.M;e&&3==Qs(n)?e.l():this.Pa(n)},He.Pa=function(n){try{if(n==this.g)e:{const S=Qs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||Br||this.g&&(this.h.h||this.g.ja()||D0(this.g)))){this.J||4!=S||7==e||Qc(),ku(this);var t=this.g.da();this.ca=t;t:if(pv(this)){var r=D0(this.g);n="";var i=r.length,a=4==Qs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_a(this),bl(this);var u="";break t}this.h.i=new ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function ty(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!We(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,ui(12),_a(this),bl(this);break e}ga(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jp(this,t)}this.S?(gv(this,S,u),Br&&this.i&&3==S&&(Ru(this.U,this.V,"tick",this.mb),this.V.start())):(ga(this.j,this.m,u,null),Jp(this,u)),4==S&&_a(this),this.i&&!this.J&&(4==S?P0(this.l,this):(this.i=!1,Jh(this)))}else(function wT(n){const e={};n=(n.g&&2<=Qs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(We(n[r]))continue;var t=Wc(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function lv(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ui(12)):(this.o=0,ui(13)),_a(this),bl(this)}}}catch{}},He.mb=function(){if(this.g){var n=Qs(this.g),e=this.g.ja();this.C<e.length&&(ku(this),gv(this,n,e),this.i&&4!=n&&Jh(this))}},He.cancel=function(){this.J=!0,_a(this)},He.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function hv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Qc(),ui(17)),_a(this),this.o=2,bl(this)):Xh(this,this.Y-n)};var Cl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof va){this.h=n.h,nd(this,n.j),this.s=n.s,this.g=n.g,eg(this,n.m),this.l=n.l;var e=n.i,t=new sd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),rd(this,t),this.o=n.o}else n&&(e=String(n).match(Cl))?(this.h=!1,nd(this,e[1]||"",!0),this.s=id(e[2]||""),this.g=id(e[3]||"",!0),eg(this,e[4]),this.l=id(e[5]||"",!0),rd(this,e[6]||"",!0),this.o=id(e[7]||"")):(this.h=!1,this.i=new sd(null,this.h))}function Zs(n){return new va(n)}function nd(n,e,t){n.j=t?id(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function eg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rd(n,e,t){e instanceof sd?(n.i=e,function od(n,e){e&&!n.j&&(Sr(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Vu(this,r),tg(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fu(e,ef)),n.i=new sd(e,n.h))}function In(n,e,t){n.i.set(e,t)}function Ys(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function id(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,mv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function mv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}va.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fu(e,oy,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fu(e,oy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fu(t,"/"==t.charAt(0)?Di:ay,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fu(t,Lu)),n.join("")};var oy=/[#\/\?@]/g,ay=/[#\?:]/g,Di=/[#\?]/g,ef=/[#\?@]/g,Lu=/#/g;function sd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Sr(n){n.g||(n.g=new Map,n.h=0,n.i&&function Xp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vu(n,e){Sr(n),e=Uu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Gn(n,e){return Sr(n),e=Uu(n,e),n.g.has(e)}function tg(n,e,t){Vu(n,e),0<t.length&&(n.i=null,n.g.set(Uu(n,e),Q(t)),n.h+=t.length)}function Uu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uy(n){this.l=n||yv,n=ot.PerformanceNavigationTiming?0<(n=ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ot.g&&ot.g.Ka&&ot.g.Ka()&&ot.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=sd.prototype).add=function(n,e){Sr(this),this.i=null,n=Uu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},He.forEach=function(n,e){Sr(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},He.ta=function(){Sr(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},He.Z=function(n){Sr(this);let e=[];if("string"==typeof n)Gn(this,n)&&(e=e.concat(this.g.get(Uu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},He.set=function(n,e){return Sr(this),this.i=null,Gn(this,n=Uu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},He.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var yv=10;function cy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function y(n){return n.h?1:n.g?n.g.size:0}function d(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function p(n,e){n.g?n.g.add(e):n.h=e}function _(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function D(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Q(n.i)}function U(){this.g=new class{stringify(n){return ot.JSON.stringify(n,void 0)}parse(n){return ot.JSON.parse(n,void 0)}}}function W(n,e,t){const r=t||"";try{Dr(n,function(i,a){let u=i;is(i)&&(u=Gp(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pe(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ne(n){this.l=n.fc||null,this.j=n.ob||!1}function Le(n,e){$n.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=St,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uy.prototype.cancel=function(){if(this.i=D(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},C(Ne,ya),Ne.prototype.g=function(){return new Le(this.l,this.j)},Ne.prototype.i=function(n){return function(){return n}}({}),C(Le,$n);var St=0;function zn(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function jr(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hr(n)}function Hr(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(He=Le.prototype).open=function(n,e){if(this.readyState!=St)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hr(this)},He.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jr(this)),this.readyState=St},He.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zn(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},He.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jr(this):Hr(this),3==this.readyState&&zn(this)}},He.Za=function(n){this.g&&(this.response=this.responseText=n,jr(this))},He.Ya=function(n){this.g&&(this.response=n,jr(this))},He.ka=function(){this.g&&jr(this)},He.setRequestHeader=function(n,e){this.v.append(n,e)},He.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Le.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var os=ot.JSON.parse;function dn(n){$n.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bo,this.L=this.M=!1}C(dn,$n);var bo="",ng=/^https?$/i,tf=["POST","PUT"];function nf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ld(n),as(n)}function ld(n){n.F||(n.F=!0,Tr(n,"complete"),Tr(n,"error"))}function ud(n){if(n.h&&typeof kh<"u"&&(!n.C[1]||4!=Qs(n)||2!=n.da()))if(n.v&&4==Qs(n))$h(n.La,0,n);else if(Tr(n,"readystatechange"),4==Qs(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(Cl)[1]||null;!i&&ot.self&&ot.self.location&&(i=ot.self.location.protocol.slice(0,-1)),r=!ng.test(i?i.toLowerCase():"")}t=r}if(t)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var a=2<Qs(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",ld(n)}}finally{as(n)}}}function as(n,e){if(n.g){rg(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Tr(n,"ready");try{t.onreadystatechange=r}catch{}}}function rg(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ot.clearTimeout(n.A),n.A=null)}function Qs(n){return n.g?n.g.readyState:0}function D0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case bo:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function _v(n){let e="";return Vh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Bu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_v(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function ig(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function S0(n){this.Ga=0,this.j=[],this.l=new Ws,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ig("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ig("baseRetryDelayMs",5e3,n),this.hb=ig("retryDelaySeedMs",1e4,n),this.eb=ig("forwardChannelMaxRetries",2,n),this.xa=ig("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new uy(n&&n.concurrentRequestLimit),this.Ja=new U,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function vv(n){if(hy(n),3==n.H){var e=n.W++,t=Zs(n.I);if(In(t,"SID",n.K),In(t,"RID",e),In(t,"TYPE","terminate"),rf(n,t),(e=new ed(n,n.l,e)).L=2,e.v=Ys(Zs(t)),t=!1,ot.navigator&&ot.navigator.sendBeacon)try{t=ot.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=O0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jh(e)}N0(n)}function dy(n){n.g&&(wv(n),n.g.cancel(),n.g=null)}function hy(n){dy(n),n.u&&(ot.clearTimeout(n.u),n.u=null),ju(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ot.clearTimeout(n.m),n.m=null)}function fy(n){if(!cy(n.i)&&!n.m){n.m=!0;var e=n.Na;Kc||Kp(),pa||(Kc(),pa=!0),Wp.add(e,n),n.C=0}}function M0(n,e){var t;t=e?e.m:n.W++;const r=Zs(n.I);In(r,"SID",n.K),In(r,"RID",t),In(r,"AID",n.V),rf(n,r),n.o&&n.s&&Bu(r,n.o,n.s),t=new ed(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ET(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),p(n.i,t),Qp(t,r,e)}function rf(n,e){n.na&&Vh(n.na,function(t,r){In(e,r,t)}),n.h&&Dr({},function(t,r){In(e,r,t)})}function ET(n,e,t){t=Math.min(n.j.length,t);var r=n.h?sr(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].g,u.push("ofs="+a)):a=0:u.push("ofs="+a);let g=!0;for(let v=0;v<t;v++){let b=i[v].g;const S=i[v].map;if(b-=a,0>b)a=Math.max(0,i[v].g-100),g=!1;else try{W(S,u,"req"+b+"_")}catch{r&&r(S)}}if(g){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function x0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Kc||Kp(),pa||(Kc(),pa=!0),Wp.add(e,n),n.A=0}}function cd(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Il(sr(n.Ma,n),IT(n,n.A)),n.A++,0))}function wv(n){null!=n.B&&(ot.clearTimeout(n.B),n.B=null)}function dd(n){n.g=new ed(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Zs(n.wa);In(e,"RID","rpc"),In(e,"SID",n.K),In(e,"AID",n.V),In(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&In(e,"TO",n.qa),In(e,"TYPE","xmlhttp"),rf(n,e),n.o&&n.s&&Bu(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ys(Zs(e)),t.s=null,t.S=!0,sy(t,n)}function ju(n){null!=n.v&&(ot.clearTimeout(n.v),n.v=null)}function P0(n,e){var t=null;if(n.g==e){ju(n),wv(n),n.g=null;var r=2}else{if(!d(n.i,e))return;t=e.F,_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Tr(r=Ou(),new Wh(r,t)),fy(n)}else x0(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function A0(n,e){return!(y(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Il(sr(n.Na,n,e),IT(n,n.C)),n.C++,0)))}(n,e)||2==r&&cd(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Hu(n,5);break;case 4:Hu(n,10);break;case 3:Hu(n,6);break;default:Hu(n,2)}}function IT(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Hu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=sr(n.pb,n);t||(t=new va("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||nd(t,"https"),Ys(t)),function ve(n,e){const t=new Ws;if(ot.Image){const r=new Image;r.onload=E(pe,t,r,"TestLoadImage: loaded",!0,e),r.onerror=E(pe,t,r,"TestLoadImage: error",!1,e),r.onabort=E(pe,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(pe,t,r,"TestLoadImage: timeout",!1,e),ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ui(2);n.H=0,n.h&&n.h.za(e),N0(n),hy(n)}function N0(n){if(n.H=0,n.ma=[],n.h){const e=D(n.i);(0!=e.length||0!=n.j.length)&&(he(n.ma,e),he(n.ma,n.j),n.i.i.length=0,Q(n.j),n.j.length=0),n.h.ya()}}function R0(n,e,t){var r=t instanceof va?Zs(t):new va(t);if(""!=r.g)e&&(r.g=e+"."+r.g),eg(r,r.m);else{var i=ot.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new va(null);r&&nd(a,r),e&&(a.g=e),i&&eg(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&In(r,t,e),In(r,"VER",n.ra),rf(n,r),r}function O0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dn(t&&n.Ha&&!n.va?new Ne({ob:!0}):n.va)).Oa(n.J),e}function Ev(){}function sg(){if(An&&!(10<=Number(av)))throw Error("Environmental error: no available transport.")}function Bi(n,e){$n.call(this),this.g=new S0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!We(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!We(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $u(this)}function py(n){Yh.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function k0(){Qh.call(this),this.status=1}function $u(n){this.g=n}function Co(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Iv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],u=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;u=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(u<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((a=(e=t+((u=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=a+((u=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function bn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(He=dn.prototype).Oa=function(n){this.M=n},He.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Yp.g(),this.C=function Zh(n){return n.h||(n.h=n.i())}(this.u?this.u:Yp),this.g.onreadystatechange=sr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void nf(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=ot.FormData&&n instanceof ot.FormData,!(0<=z(tf,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rg(this),0<this.B&&((this.L=function ad(n){return An&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.ua,this)):this.A=$h(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){nf(this,a)}},He.ua=function(){typeof kh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},He.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),as(this))},He.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),as(this,!0)),dn.$.N.call(this)},He.La=function(){this.s||(this.G||this.v||this.l?ud(this):this.kb())},He.kb=function(){ud(this)},He.isActive=function(){return!!this.g},He.da=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}},He.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},He.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),os(e)}},He.Ia=function(){return this.m},He.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=S0.prototype).ra=8,He.H=1,He.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ed(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Mu(a),Wm(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ET(this,i,e),In(t=Zs(this.I),"RID",n),In(t,"CVER",22),this.F&&In(t,"X-HTTP-Session-Id",this.F),rf(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(_v(a)))+"&"+e:this.o&&Bu(t,this.o,a)),p(this.i,i),this.bb&&In(t,"TYPE","init"),this.P?(In(t,"$req",e),In(t,"SID","null"),i.aa=!0,Qp(i,t,null)):Qp(i,t,e),this.H=2}}else 3==this.H&&(n?M0(this,n):0==this.j.length||cy(this.i)||M0(this))},He.Ma=function(){if(this.u=null,dd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Il(sr(this.jb,this),n)}},He.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ui(10),dy(this),dd(this))},He.ib=function(){null!=this.v&&(this.v=null,dy(this),cd(this),ui(19))},He.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ui(2)):(this.l.info("Failed to ping google.com"),ui(1))},He.isActive=function(){return!!this.h&&this.h.isActive(this)},(He=Ev.prototype).Ba=function(){},He.Aa=function(){},He.za=function(){},He.ya=function(){},He.isActive=function(){return!0},He.Va=function(){},sg.prototype.g=function(n,e){return new Bi(n,e)},C(Bi,$n),Bi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ui(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=R0(n,null,n.Y),fy(n)},Bi.prototype.close=function(){vv(this.g)},Bi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gp(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&fy(e)},Bi.prototype.N=function(){this.g.h=null,delete this.j,vv(this.g),delete this.g,Bi.$.N.call(this)},C(py,Yh),C(k0,Qh),C($u,Ev),$u.prototype.Ba=function(){Tr(this.g,"a")},$u.prototype.Aa=function(n){Tr(this.g,new py(n))},$u.prototype.za=function(n){Tr(this.g,new k0)},$u.prototype.ya=function(){Tr(this.g,"b")},C(Co,function og(){this.blockSize=-1}),Co.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Co.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)Iv(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){Iv(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){Iv(this,r),i=0;break}}this.h=i,this.i+=e},Co.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var bT={};function bv(n){return-128<=n&&128>n?function Yn(n,e){var t=bT;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new bn([0|e],0>e?-1:0)}):new bn([0|n],0>n?-1:0)}function wa(n){if(isNaN(n)||!isFinite(n))return ls;if(0>n)return Qr(wa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Gu;return new bn(e,0)}var Gu=4294967296,ls=bv(0),Cv=bv(1),L0=bv(16777216);function zu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function To(n){return-1==n.h}function Qr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new bn(t,~n.h).add(Cv)}function Tv(n,e){return n.add(Qr(e))}function ag(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function gy(n,e){this.g=n,this.h=e}function lg(n,e){if(zu(e))throw Error("division by zero");if(zu(n))return new gy(ls,ls);if(To(n))return e=lg(Qr(n),e),new gy(Qr(e.g),Qr(e.h));if(To(e))return e=lg(n,Qr(e)),new gy(Qr(e.g),e.h);if(30<n.g.length){if(To(n)||To(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Cv,r=e;0>=r.X(n);)t=V0(t),r=V0(r);var i=hd(t,1),a=hd(r,1);for(r=hd(r,2),t=hd(t,2);!zu(r);){var u=a.add(r);0>=u.X(n)&&(i=i.add(t),a=u),r=hd(r,1),t=hd(t,1)}return e=Tv(n,i.R(e)),new gy(i,e)}for(i=ls;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(a=wa(t)).R(e);To(u)||0<u.X(n);)u=(a=wa(t-=r)).R(e);zu(a)&&(a=Cv),i=i.add(a),n=Tv(n,u)}return new gy(i,n)}function V0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new bn(t,n.h)}function hd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new bn(i,n.h)}(He=bn.prototype).ea=function(){if(To(this))return-Qr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Gu+r)*e,e*=Gu}return n},He.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(zu(this))return"0";if(To(this))return"-"+Qr(this).toString(n);for(var e=wa(Math.pow(n,6)),t=this,r="";;){var i=lg(t,e).g,a=((0<(t=Tv(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(zu(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},He.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},He.X=function(n){return To(n=Tv(this,n))?-1:zu(n)?0:1},He.abs=function(){return To(this)?Qr(this):this},He.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),u=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(a&=65535)}return new bn(t,-2147483648&t[t.length-1]?-1:0)},He.R=function(n){if(zu(this)||zu(n))return ls;if(To(this))return To(n)?Qr(this).R(Qr(n)):Qr(Qr(this).R(n));if(To(n))return Qr(this.R(Qr(n)));if(0>this.X(L0)&&0>n.X(L0))return wa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,u=65535&this.D(r),g=n.D(i)>>>16,v=65535&n.D(i);t[2*r+2*i]+=u*v,ag(t,2*r+2*i),t[2*r+2*i+1]+=a*v,ag(t,2*r+2*i+1),t[2*r+2*i+1]+=u*g,ag(t,2*r+2*i+1),t[2*r+2*i+2]+=a*g,ag(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new bn(t,0)},He.gb=function(n){return lg(this,n).h},He.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new bn(t,this.h&n.h)},He.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new bn(t,this.h|n.h)},He.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new bn(t,this.h^n.h)},sg.prototype.createWebChannel=sg.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,Kh.NO_ERROR=0,Kh.TIMEOUT=8,Kh.HTTP_ERROR=6,Jc.COMPLETE="complete",Zp.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",$n.prototype.listen=$n.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,Co.prototype.digest=Co.prototype.l,Co.prototype.reset=Co.prototype.reset,Co.prototype.update=Co.prototype.j,bn.prototype.add=bn.prototype.add,bn.prototype.multiply=bn.prototype.R,bn.prototype.modulo=bn.prototype.gb,bn.prototype.compare=bn.prototype.X,bn.prototype.toNumber=bn.prototype.ea,bn.prototype.toString=bn.prototype.toString,bn.prototype.getBits=bn.prototype.D,bn.fromNumber=wa,bn.fromString=function F0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Qr(F0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=wa(Math.pow(e,8)),r=ls,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+a),e);8>a?(a=wa(Math.pow(e,a)),r=r.R(a).add(wa(u))):r=(r=r.R(t)).add(wa(u))}return r};var CT=Cr.createWebChannelTransport=function(){return new sg},TT=Cr.getStatEventTarget=function(){return Ou()},Ts=Cr.ErrorCode=Kh,DT=Cr.EventType=Jc,U0=Cr.Event=Cs,B0=Cr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ST=Cr.FetchXmlHttpFactory=Ne,my=Cr.WebChannel=Zp,AT=Cr.XhrIo=dn,j0=Cr.Md5=Co,sf=Cr.Integer=bn;const H0="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let At="9.23.0";const Tl=new wo.Yd("@firebase/firestore");function yy(){return Tl.logLevel}function Pe(n,...e){if(Tl.logLevel<=wo.in.DEBUG){const t=e.map(Dv);Tl.debug(`Firestore (${At}): ${n}`,...t)}}function fr(n,...e){if(Tl.logLevel<=wo.in.ERROR){const t=e.map(Dv);Tl.error(`Firestore (${At}): ${n}`,...t)}}function Ds(n,...e){if(Tl.logLevel<=wo.in.WARN){const t=e.map(Dv);Tl.warn(`Firestore (${At}): ${n}`,...t)}}function Dv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ye(n="Unexpected state"){const e=`FIRESTORE (${At}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function ct(n,e){n||Ye()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class G0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class Av{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xT{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let u=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new jn,e.enqueueRetryable(()=>a(this.currentUser))};const g=()=>{const b=u;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},v=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new jn)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new G0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Jr(e)}}class MM{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new MM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NT{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.T;return this.T=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new PT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class z0{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ct(n,e){return n<e?-1:n>e?1:0}function af(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Mv(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Pn(0,0))}static max(){return new ht(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ye(),void 0===r?r=e.length-t:r>e.length-t&&Ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends lf{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const OT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends lf{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return OT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===g?(u=!u,i++):"."!==g||u?(r+=g,i++):(a(),i++)}if(a(),u)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(nn.fromString(e))}static fromName(e){return new $e(nn.fromString(e).popFirst(5))}static empty(){return new $e(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new nn(e.slice()))}}class _y{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vy(n){return n.fields.find(e=>2===e.kind)}function fd(n){return n.fields.filter(e=>2!==e.kind)}_y.UNKNOWN_ID=-1;class ug{constructor(e,t){this.fieldPath=e,this.kind=t}}class wy{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wy(0,Js.min())}}function Ey(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new Js(i,$e.empty(),e)}function W0(n){return new Js(n.readTime,n.key,-1)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(ht.min(),$e.empty(),-1)}static max(){return new Js(ht.max(),$e.empty(),-1)}}function qu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ct(n.largestBatchId,e.largestBatchId))}const Pv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Do(n){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Pv)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Ss.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,a=0,u=!1;e.forEach(g=>{++i,g.next(()=>{++a,u&&a===i&&t()},v=>r(v))}),u=!0,a===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const a=e.length,u=new Array(a);let g=0;for(let v=0;v<a;v++){const b=v;t(e[b]).next(S=>{u[b]=S,++g,g===a&&r(u)},S=>i(S))}})}static doWhile(e,t){return new se((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new jn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new pd(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=K0(r.target.error);this.v.reject(new pd(e,i))}}static open(e,t,r,i){try{return new Iy(t,e.transaction(i,r))}catch(a){throw new pd(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rv(t)}}class As{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===As.S((0,zt.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),uf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,zt.hl)())return!1;if(As.C())return!0;const e=(0,zt.z$)(),t=As.S(e),r=0<t&&t<10,i=As.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,me.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const g=u.target.error;i("VersionError"===g.name?new be(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new be(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new pd(e,g))},a.onupgradeneeded=u=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const u="readonly"===t;let g=0;for(;;){++g;try{a.db=yield a.$(e);const v=Iy.open(a.db,e,u?"readonly":"readwrite",r),b=i(v).next(S=>(v.P(),S)).catch(S=>(v.abort(S),se.reject(S))).toPromise();return b.catch(()=>{}),yield v.R,b}catch(v){const b=v,S="FirebaseError"!==b.name&&g<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),a.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dl{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return uf(this.L.delete())}}class pd extends be{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sl(n){return"IndexedDbTransactionError"===n.name}class Rv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uf(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),uf(this.store.add(e))}get(e){return uf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),uf(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),uf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(u,g)=>{a.push(g)}).next(()=>a)}{const i=this.store.getAll(r.range);return new se((a,u)=>{i.onerror=g=>{u(g.target.error)},i.onsuccess=g=>{a(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,u,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=a=>{const u=K0(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(g=>{g?u.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void i();const v=new Dl(g),b=t(g.primaryKey,g.value,v);if(b instanceof se){const S=b.catch(P=>(v.done(),se.reject(P)));r.push(S)}v.isDone?i():null===v.K?g.continue():g.continue(v.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uf(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=K0(r.target.error);t(i)}})}let Ov=!1;function K0(n){const e=As.S((0,zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ov||(Ov=!0,setTimeout(()=>{throw r},0)),r}}return n}class by{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Sl(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Do(r)}yield t.et(6e4)}))}}class Cy{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return se.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Pe("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(g=>{i-=g,r.add(u)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,a)).next(g=>(Pe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=W0(a);qu(u,r)>0&&(r=u)}),new Js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function gd(n){return null==n}function md(n){return 0===n&&1/n==-1/0}function kT(n){return"number"==typeof n&&Number.isInteger(n)&&!md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z0(e)),e=FT(n.get(t),e);return Z0(e)}function FT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Z0(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&Ye(),n.charAt(u+1)){case"\x01":const g=n.substring(a,u);let v;0===i.length?v=g:(i+=g,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:Ye()}a=u+2}return new nn(r)}const kv=["userId","batchId"];function Fv(n,e){return[n,Si(e)]}function Y0(n,e,t){return[n,Si(e),t]}const NM={},Q0=["prefixPath","collectionGroup","readTime","documentId"],J0=["prefixPath","collectionGroup","documentId"],LT=["collectionGroup","readTime","prefixPath","documentId"],Lv=["canonicalId","targetId"],RM=["targetId","path"],OM=["path","targetId"],kM=["collectionId","parent"],FM=["indexId","uid"],LM=["uid","sequenceNumber"],VM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UM=["indexId","uid","orderedDocumentKey"],BM=["userId","collectionPath","documentId"],jM=["userId","collectionPath","largestBatchId"],HM=["userId","collectionGroup","largestBatchId"],Al=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vv=[...Al,"documentOverlays"],X0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uv=X0,Bv=[...Uv,"indexConfiguration","indexState","indexEntries"];class Ty extends Nv{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ar(n,e){const t=Ge(n);return As.M(t.ht,e)}function eI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class kn{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dy(this.root,e,this.comparator,!0)}}class Dy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=a??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const e=this.left.check();if(e!==this.right.check())throw Ye();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ml(n){return n.hasNext()?n.getNext():void 0}class $r{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new $r([])}unionWith(e){let t=new Hn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return af(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sy("Invalid base64 string: "+i):i}}(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const Ay=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xl(n){if(ct(!!n),"string"==typeof n){let e=0;const t=Ay.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function So(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function df(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cg(n){const e=n.mapValue.fields.__previous_value__;return df(e)?cg(e):e}function yd(n){const e=xl(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class VT{constructor(e,t,r,i,a,u,g,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=b}}class _d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _d("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dg={nullValue:"NULL_VALUE"};function Ku(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?df(n)?4:iI(n)?9007199254740991:10:Ye()}function Ao(n,e){if(n===e)return!0;const t=Ku(n);if(t!==Ku(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yd(n).isEqual(yd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=xl(r.timestampValue),u=xl(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,So(n.bytesValue).isEqual(So(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Qn(r.geoPointValue.latitude)===Qn(i.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qn(r.integerValue)===Qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Qn(r.doubleValue),u=Qn(i.doubleValue);return a===u?md(a)===md(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return af(n.arrayValue.values||[],e.arrayValue.values||[],Ao);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(eI(a)!==eI(u))return!1;for(const g in a)if(a.hasOwnProperty(g)&&(void 0===u[g]||!Ao(a[g],u[g])))return!1;return!0}(n,e);default:return Ye()}var i}function hf(n,e){return void 0!==(n.values||[]).find(t=>Ao(t,e))}function Zu(n,e){if(n===e)return 0;const t=Ku(n),r=Ku(e);if(t!==r)return Ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ct(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Qn(i.integerValue||i.doubleValue),g=Qn(a.integerValue||a.doubleValue);return u<g?-1:u>g?1:u===g?0:isNaN(u)?isNaN(g)?0:-1:1}(n,e);case 3:return us(n.timestampValue,e.timestampValue);case 4:return us(yd(n),yd(e));case 5:return Ct(n.stringValue,e.stringValue);case 6:return function(i,a){const u=So(i),g=So(a);return u.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),g=a.split("/");for(let v=0;v<u.length&&v<g.length;v++){const b=Ct(u[v],g[v]);if(0!==b)return b}return Ct(u.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Ct(Qn(i.latitude),Qn(a.latitude));return 0!==u?u:Ct(Qn(i.longitude),Qn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],g=a.values||[];for(let v=0;v<u.length&&v<g.length;++v){const b=Zu(u[v],g[v]);if(b)return b}return Ct(u.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Wu.mapValue&&a===Wu.mapValue)return 0;if(i===Wu.mapValue)return 1;if(a===Wu.mapValue)return-1;const u=i.fields||{},g=Object.keys(u),v=a.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const P=Ct(g[S],b[S]);if(0!==P)return P;const L=Zu(u[g[S]],v[b[S]]);if(0!==L)return L}return Ct(g.length,b.length)}(n.mapValue,e.mapValue);default:throw Ye()}}function us(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ct(n,e);const t=xl(n),r=xl(e),i=Ct(t.seconds,r.seconds);return 0!==i?i:Ct(t.nanos,r.nanos)}function vd(n){return Hv(n)}function Hv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=xl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?So(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=Hv(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const g of i)u?u=!1:a+=",",a+=`${g}:${Hv(r.fields[g])}`;return a+"}"}(n.mapValue):Ye();var e}function wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hg(n){return!!n&&"integerValue"in n}function ff(n){return!!n&&"arrayValue"in n}function nI(n){return!!n&&"nullValue"in n}function rI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function My(n){return!!n&&"mapValue"in n}function pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sI(n){return"nullValue"in n?dg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wd(_d.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ye()}function UT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wd(_d.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wu:Ye()}function oI(n,e){const t=Zu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gv(n,e){const t=Zu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!My(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((u,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=g.popLast()}u?r[g.lastSegment()]=pf(u):i.push(g.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());My(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];My(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hi(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ei(pf(this.value))}}function aI(n){const e=[];return Hi(n.fields,(t,r)=>{const i=new lr([t]);if(My(r)){const a=aI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new $r(e)}class rn{constructor(e,t,r,i,a,u,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=g}static newInvalidDocument(e){return new rn(e,0,ht.min(),ht.min(),ht.min(),ei.empty(),0)}static newFoundDocument(e,t,r,i){return new rn(e,1,t,ht.min(),r,i,0)}static newNoDocument(e,t){return new rn(e,2,t,ht.min(),ht.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,ht.min(),ht.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,t){this.position=e,this.inclusive=t}}function lI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?$e.comparator($e.fromName(u.referenceValue),t.key):Zu(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function uI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ao(n.position[t],e.position[t]))return!1;return!0}class fg{constructor(e,t="asc"){this.field=e,this.dir=t}}function cI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class dI{}class Yt extends dI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new $M(e,t,r):"array-contains"===t?new pI(e,r):"in"===t?new Py(e,r):"not-in"===t?new Pl(e,r):"array-contains-any"===t?new Ny(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new hI(e,r):new fI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zu(t,this.value)):null!==t&&Ku(this.value)===Ku(t)&&this.matchesComparison(Zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends dI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Cn(e,t)}matches(e){return Yu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Yu(n){return"and"===n.op}function zv(n){return"or"===n.op}function qv(n){return pg(n)&&Yu(n)}function pg(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function gg(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+vd(n.value);if(qv(n))return n.filters.map(e=>gg(e)).join(",");{const e=n.filters.map(t=>gg(t)).join(",");return`${n.op}(${e})`}}function mg(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&Ao(t.value,r.value)):n instanceof Cn?function(t,r){return r instanceof Cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,u)=>i&&mg(a,r.filters[u]),!0)}(n,e):void Ye();var t,r}function BT(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function xy(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${vd(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(xy).join(" ,")+"}"}(n):"Filter";var e}class $M extends Yt{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class hI extends Yt{constructor(e,t){super(e,"in",t),this.keys=Wv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fI extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=Wv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class pI extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ff(t)&&hf(t.arrayValue,this.value)}}class Py extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hf(this.value.arrayValue,t)}}class Pl extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hf(this.value.arrayValue,t)}}class Ny extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hf(this.value.arrayValue,r))}}class Ry{constructor(e,t=null,r=[],i=[],a=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=g,this.dt=null}}function Ed(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Ry(n,e,t,r,i,a,u)}function Id(n){const e=Ge(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vd(r)).join(",")),e.dt=t}return e.dt}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uI(n.startAt,e.startAt)&&uI(n.endAt,e.endAt)}function yg(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Oy(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function gI(n,e,t){let r=dg,i=!0;for(const a of Oy(n,e)){let u=dg,g=!0;switch(a.op){case"<":case"<=":u=sI(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,g=!1;break;case"!=":case"not-in":u=dg}oI({value:r,inclusive:i},{value:u,inclusive:g})<0&&(r=u,i=g)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];oI({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function gf(n,e,t){let r=Wu,i=!0;for(const a of Oy(n,e)){let u=Wu,g=!0;switch(a.op){case">=":case">":u=UT(a.value),g=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,g=!1;break;case"!=":case"not-in":u=Wu}Gv({value:r,inclusive:i},{value:u,inclusive:g})>0&&(r=u,i=g)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Gv({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Nl{constructor(e,t=null,r=[],i=[],a=null,u="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=g,this.endAt=v,this.wt=null,this._t=null}}function jT(n,e,t,r,i,a,u,g){return new Nl(n,e,t,r,i,a,u,g)}function mf(n){return new Nl(n)}function HT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Kv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ky(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Zv(n){return null!==n.collectionGroup}function Qu(n){const e=Ge(n);if(null===e.wt){e.wt=[];const t=ky(e),r=Kv(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new fg(t)),e.wt.push(new fg(lr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new fg(lr.keyField(),a))}}}return e.wt}function ci(n){const e=Ge(n);if(!e._t)if("F"===e.limitType)e._t=Ed(e.path,e.collectionGroup,Qu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Qu(e))t.push(new fg(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ia(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ia(e.startAt.position,e.startAt.inclusive):null;e._t=Ed(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Yv(n,e){e.getFirstInequalityField(),ky(n);const t=n.filters.concat([e]);return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yf(n,e,t){return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _g(n,e){return bd(ci(n),ci(e))&&n.limitType===e.limitType}function mI(n){return`${Id(ci(n))}|lt:${n.limitType}`}function Qv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>xy(r)).join(", ")}]`),gd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vd(r)).join(",")),`Target(${t})`}(ci(n))}; limitType=${n.limitType})`}function vg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Qu(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const g=lI(i,a,u);return i.inclusive?g<=0:g<0}(t.startAt,Qu(t),r)||t.endAt&&!function(i,a,u){const g=lI(i,a,u);return i.inclusive?g>=0:g>0}(t.endAt,Qu(t),r)));var t,r}function yI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _I(n){return(e,t)=>{let r=!1;for(const i of Qu(n)){const a=Fy(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Fy(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,a,u){const g=a.data.field(i),v=u.data.field(i);return null!==g&&null!==v?Zu(g,v):Ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}class $i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}const GM=new kn($e.comparator);function ti(){return GM}const vI=new kn($e.comparator);function wg(...n){let e=vI;for(const t of n)e=e.insert(t.key,t);return e}function Ly(n){let e=vI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ba(){return Rl()}function Mo(){return Rl()}function Rl(){return new $i(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ai=new kn($e.comparator),Cd=new Hn($e.comparator);function Rt(...n){let e=Cd;for(const t of n)e=e.add(t);return e}const Xs=new Hn(Ct);function Eg(){return Xs}function Td(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function Dd(n){return{integerValue:""+n}}function Sd(n,e){return kT(e)?Dd(e):Td(n,e)}class Ol{constructor(){this._=void 0}}function _f(n,e,t){return n instanceof xo?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&df(i)&&(i=cg(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof eo?Jv(n,e):n instanceof Ju?Xv(n,e):function(r,i){const a=Ad(r,i),u=ew(a)+ew(r.gt);return hg(a)&&hg(r.gt)?Dd(u):Td(r.serializer,u)}(n,e)}function vf(n,e,t){return n instanceof eo?Jv(n,e):n instanceof Ju?Xv(n,e):t}function Ad(n,e){return n instanceof Md?hg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xo extends Ol{}class eo extends Ol{constructor(e){super(),this.elements=e}}function Jv(n,e){const t=tw(e);for(const r of n.elements)t.some(i=>Ao(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ju extends Ol{constructor(e){super(),this.elements=e}}function Xv(n,e){let t=tw(e);for(const r of n.elements)t=t.filter(i=>!Ao(i,r));return{arrayValue:{values:t}}}class Md extends Ol{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ew(n){return Qn(n.integerValue||n.doubleValue)}function tw(n){return ff(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wf{constructor(e,t){this.field=e,this.transform=t}}class EI{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ig{}function II(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fl(n.key,qn.none()):new kl(n.key,n.data,qn.none());{const t=n.data,r=ei.empty();let i=new Hn(lr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new to(n.key,r,new $r(i.toArray()),qn.none())}}function $T(n,e,t){n instanceof kl?function(r,i,a){const u=r.value.clone(),g=CI(r.fieldTransforms,i,a.transformResults);u.setAll(g),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof to?function(r,i,a){if(!Vy(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=CI(r.fieldTransforms,i,a.transformResults),g=i.data;g.setAll(Uy(r)),g.setAll(u),i.convertToFoundDocument(a.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xd(n,e,t,r){return n instanceof kl?function(i,a,u,g){if(!Vy(i.precondition,a))return u;const v=i.value.clone(),b=bg(i.fieldTransforms,g,a);return v.setAll(b),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof to?function(i,a,u,g){if(!Vy(i.precondition,a))return u;const v=bg(i.fieldTransforms,g,a),b=a.data;return b.setAll(Uy(i)),b.setAll(v),a.convertToFoundDocument(a.version,b).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(u=t,Vy(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function nw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Ad(r.transform,i||null);null!=a&&(null===t&&(t=ei.empty()),t.set(r.field,a))}return t||null}function bI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&af(t,r,(i,a)=>function wI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof eo&&r instanceof eo||t instanceof Ju&&r instanceof Ju?af(t.elements,r.elements,Ao):t instanceof Md&&r instanceof Md?Ao(t.gt,r.gt):t instanceof xo&&r instanceof xo);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class kl extends Ig{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class to extends Ig{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Uy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CI(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,g=e.data.field(a.field);r.set(a.field,vf(u,g,t[i]))}return r}function bg(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,_f(a,u,e))}return r}class Fl extends Ig{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cg extends Ig{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class By{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&$T(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Mo();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let g=this.applyToLocalView(u,a.mutatedFields);g=t.has(i.key)?null:g;const v=II(u,g);null!==v&&r.set(i.key,v),u.isValidDocument()||u.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rt())}isEqual(e){return this.batchId===e.batchId&&af(this.mutations,e.mutations,(t,r)=>bI(t,r))&&af(this.baseMutations,e.baseMutations,(t,r)=>bI(t,r))}}class Tg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=Ai;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Tg(e,t,r,i)}}class jy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rw{constructor(e,t){this.count=e,this.unchangedNames=t}}var gr,sn;function iw(n){switch(n){default:return Ye();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function sw(n){if(void 0===n)return fr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case gr.OK:return ce.OK;case gr.CANCELLED:return ce.CANCELLED;case gr.UNKNOWN:return ce.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ce.INTERNAL;case gr.UNAVAILABLE:return ce.UNAVAILABLE;case gr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case gr.NOT_FOUND:return ce.NOT_FOUND;case gr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case gr.ABORTED:return ce.ABORTED;case gr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case gr.DATA_LOSS:return ce.DATA_LOSS;default:return Ye()}}(sn=gr||(gr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class Hy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Dg}static getOrCreateInstance(){return null===Dg&&(Dg=new Hy),Dg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Dg=null;function DI(){return new TextEncoder}const GT=new sf([4294967295,4294967295],0);function SI(n){const e=DI().encode(n),t=new j0;return t.update(e),new Uint8Array(t.digest())}function ow(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new sf([t,r],0),new sf([i,a],0)]}class Sg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ef(`Invalid padding: ${t}`);if(r<0)throw new Ef(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ef(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ef(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=sf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(sf.fromNumber(r)));return 1===i.compare(GT)&&(i=new sf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=SI(e),[r,i]=ow(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Sg(a,i,t);return r.forEach(g=>u.insert(g)),u}insert(e){if(0===this.It)return;const t=SI(e),[r,i]=ow(t);for(let a=0;a<this.hashCount;a++){const u=this.Et(r,i,a);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class If{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,bf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new If(ht.min(),i,new kn(Ct),ti(),Rt())}}class bf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bf(r,t,Rt(),Rt(),Rt())}}class Ag{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class aw{constructor(e,t){this.targetId=e,this.Vt=t}}class lw{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uw{constructor(){this.St=0,this.Dt=MI(),this.Ct=pr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Rt(),t=Rt(),r=Rt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye()}}),new bf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=MI()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class AI{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ti(),this.zt=zT(),this.Wt=new kn(Ct)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const u=a.target;if(yg(u))if(0===i){const g=new $e(u.path);this.Yt(r,g,rn.newNoDocument(g,ht.min()))}else ct(1===i);else{const g=this.ie(r);if(g!==i){const v=this.re(e,g);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Hy.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,S,P){var L,$,Y,ue,ge,Ue;const Ze={localCacheCount:S,existenceFilterCount:P.count},Qe=P.unchangedNames;return Qe&&(Ze.bloomFilter={applied:0===b,hashCount:null!==(L=Qe?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ue=null===(Y=null===($=Qe?.bits)||void 0===$?void 0:$.bitmap)||void 0===Y?void 0:Y.length)&&void 0!==ue?ue:0,padding:null!==(Ue=null===(ge=Qe?.bits)||void 0===ge?void 0:ge.padding)&&void 0!==Ue?Ue:0}),Ze}(v,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:u=0},hashCount:g=0}=r;let v,b;try{v=So(a).toUint8Array()}catch(S){if(S instanceof Sy)return Ds("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{b=new Sg(v,u,g)}catch(S){return Ds(S instanceof Ef?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===b.It?1:i!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const u=this.Gt.ue(),g=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;t.vt(g)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,u)=>{const g=this.se(u);if(g){if(a.current&&yg(g.target)){const v=new $e(g.target.path);null!==this.jt.get(v)||this.ae(u,v)||this.Yt(u,v,rn.newNoDocument(v,e))}a.Mt&&(t.set(u,a.Ot()),a.Ft())}});let r=Rt();this.zt.forEach((a,u)=>{let g=!0;u.forEachWhile(v=>{const b=this.se(v);return!b||"TargetPurposeLimboResolution"===b.purpose||(g=!1,!1)}),g&&(r=r.add(a))}),this.jt.forEach((a,u)=>u.setReadTime(e));const i=new If(e,t,this.Wt,this.jt,r);return this.jt=ti(),this.zt=zT(),this.Wt=new kn(Ct),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new uw,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hn(Ct),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new uw),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zT(){return new kn($e.comparator)}function MI(){return new kn($e.comparator)}const qT={asc:"ASCENDING",desc:"DESCENDING"},xI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WT={and:"AND",or:"OR"};class Gr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $y(n,e){return n.useProto3Json||gd(e)?e:{value:e}}function Cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NI(n,e){return Cf(n,e.toTimestamp())}function mr(n){return ct(!!n),ht.fromTimestamp(function(e){const t=xl(e);return new Pn(t.seconds,t.nanos)}(n))}function Gy(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function cw(n){const e=nn.fromString(n);return ct(LI(e)),e}function Ca(n,e){return Gy(n.databaseId,e.path)}function Ta(n,e){const t=cw(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(fw(t))}function dw(n,e){return Gy(n.databaseId,e)}function hw(n){const e=cw(n);return 4===e.length?nn.emptyPath():fw(e)}function Mg(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fw(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KT(n,e,t){return{name:Ca(n,e),fields:t.value.mapValue.fields}}function pw(n,e,t){const r=Ta(n,e.name),i=mr(e.updateTime),a=e.createTime?mr(e.createTime):ht.min(),u=new ei({mapValue:{fields:e.fields}}),g=rn.newFoundDocument(r,i,a,u);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function xg(n,e){let t;if(e instanceof kl)t={update:KT(n,e.key,e.value)};else if(e instanceof Fl)t={delete:Ca(n,e.key)};else if(e instanceof to)t={update:KT(n,e.key,e.data),updateMask:FI(e.fieldMask)};else{if(!(e instanceof Cg))return Ye();t={verify:Ca(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof xo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof eo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ju)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Md)return{fieldPath:a.field.canonicalString(),increment:u.gt};throw Ye()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:NI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ye()),t;var i}function zy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qn.updateTime(mr(i.updateTime)):void 0!==i.exists?qn.exists(i.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let g=null;"setToServerValue"in u?(ct("REQUEST_TIME"===u.setToServerValue),g=new xo):"appendMissingElements"in u?g=new eo(u.appendMissingElements.values||[]):"removeAllFromArray"in u?g=new Ju(u.removeAllFromArray.values||[]):"increment"in u?g=new Md(a,u.increment):Ye();const v=lr.fromServerFormat(u.fieldPath);return new wf(v,g)}(n,i)):[];var i;if(e.update){const i=Ta(n,e.update.name),a=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new $r((e.updateMask.fieldPaths||[]).map(b=>lr.fromServerFormat(b)));return new to(i,a,u,t,r)}return new kl(i,a,t,r)}if(e.delete){const i=Ta(n,e.delete);return new Fl(i,t)}if(e.verify){const i=Ta(n,e.verify);return new Cg(i,t)}return Ye()}function no(n,e){return{documents:[dw(n,e.path)]}}function Ms(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0!==v.length)return kI(Cn.create(v,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(v){if(0!==v.length)return v.map(b=>{return{field:Aa((S=b).field),direction:ZT(S.dir)};var S})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=$y(n,e.limit);var g,v;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function mw(n){let e=hw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=function(S){const P=OI(S);return P instanceof Cn&&qv(P)?P.getFilters():[P]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(S=>{return new fg(Ma((P=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let g=null;t.limit&&(g=function(S){let P;return P="object"==typeof S?S.value:S,gd(P)?null:P}(t.limit));let v=null;var S;t.startAt&&(v=new Ia((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ia(S.values||[],!S.before)}(t.endAt)),jT(e,i,u,a,g,"F",v,b)}function OI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ma(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ma(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ma(e.unaryFilter.field);return Yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ma(e.unaryFilter.field);return Yt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(n):void 0!==n.fieldFilter?Yt.create(Ma((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>OI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ye()}}(e.compositeFilter.op))}(n):Ye();var e}function ZT(n){return qT[n]}function YT(n){return xI[n]}function QT(n){return WT[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function Ma(n){return lr.fromServerFormat(n.fieldPath)}function kI(n){return n instanceof Yt?function(e){if("=="===e.op){if(rI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NAN"}};if(nI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NAN"}};if(nI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(e.field),op:YT(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(r=>kI(r));return 1===t.length?t[0]:{compositeFilter:{op:QT(e.op),filters:t}}}(n):Ye()}function FI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class xa{constructor(e,t,r,i,a=ht.min(),u=ht.min(),g=pr.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yw{constructor(e){this.fe=e}}function VI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ca(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Cf(i,a.version.toTimestamp()),createTime:Cf(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return Ye();r.unknownDocument={path:t.path.toArray(),version:Xu(e.version)}}var i,a;return r}function Pg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ll(n){const e=new Pn(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Vl(n,e){const t=(e.baseMutations||[]).map(a=>zy(n.fe,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>zy(n.fe,a)),i=Pn.fromMillis(e.localWriteTimeMs);return new By(e.batchId,i,t,r)}function Tf(n){const e=Ll(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ll(n.lastLimboFreeSnapshotVersion):ht.min();let r;var i;return void 0!==n.query.documents?(ct(1===(i=n.query).documents.length),r=ci(mf(hw(i.documents[0])))):r=ci(mw(n.query)),new xa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function _w(n,e){const t=Xu(e.snapshotVersion),r=Xu(e.lastLimboFreeSnapshotVersion);let i;i=yg(e.target)?no(n.fe,e.target):Ms(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Id(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Wy(n){const e=mw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yf(e,e.limit,"L"):e}function Ky(n,e){return new jy(e.largestBatchId,zy(n.fe,e.overlayMutation))}function vw(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function ww(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Xu(r.readTime),documentKey:Si(r.documentKey.path),largestBatchId:r.largestBatchId}}class UI{getBundleMetadata(e,t){return Ew(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ll(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Ew(e).put({bundleId:(r=t).id,createTime:Xu(mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return BI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Wy(i.bundledQuery),readTime:Ll(i.readTime)};var i})}saveNamedQuery(e,t){return BI(e).put({name:(r=t).name,readTime:Xu(mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ew(n){return Ar(n,"bundles")}function BI(n){return Ar(n,"namedQueries")}class Zy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Zy(e,t.uid||"")}getOverlay(e,t){return Ng(e).get(vw(this.userId,t)).next(r=>r?Ky(this.serializer,r):null)}getOverlays(e,t){const r=ba();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const g=new jy(t,u);i.push(this.we(e,g))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Si(u.getCollectionPath())));const a=[];return i.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Ng(e).J("collectionPathOverlayIndex",g))}),se.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ba(),a=Si(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ng(e).j("collectionPathOverlayIndex",u).next(g=>{for(const v of g){const b=Ky(this.serializer,v);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ba();let u;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ng(e).X({index:"collectionGroupOverlayIndex",range:g},(v,b,S)=>{const P=Ky(this.serializer,b);a.size()<i||P.largestBatchId===u?(a.set(P.getKey(),P),u=P.largestBatchId):S.done()}).next(()=>a)}we(e,t){return Ng(e).put(function(r,i,a){const[u,g,v]=vw(i,a.mutation.key);return{userId:i,collectionPath:g,documentId:v,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:xg(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Ng(n){return Ar(n,"documentOverlays")}class Pd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),md(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(So(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?iI(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ye()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),$e.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function JT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function jI(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=JT(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Pd.Ve=new Pd;class XT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=jI(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=jI(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eD{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class tD{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Rg{constructor(){this.je=new XT,this.ze=new eD(this.je),this.We=new tD(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Nd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nd(this.indexId,this.documentKey,this.arrayValue,r)}}function ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=HI(n.arrayValue,e.arrayValue),0!==t?t:(t=HI(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function HI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=vy(e);if(void 0!==t&&!this.en(t))return!1;const r=fd(e);let i=new Set,a=0,u=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const g=r[a];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[u++],g))return!1}++a}for(;a<r.length;++a){const g=r[a];if(u>=this.Ye.length||!this.sn(this.Ye[u++],g))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function $I(n){var e,t;if(ct(n instanceof Yt||n instanceof Cn),n instanceof Yt){if(n instanceof Py){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Yt.create(n.field,"==",a)))||[];return Cn.create(i,"or")}return n}const r=n.filters.map(i=>$I(i));return Cn.create(r,n.op)}function rD(n){if(0===n.getFilters().length)return[];const e=Yy($I(n));return ct(Cw(e)),Iw(e)||bw(e)?[e]:e.getFilters()}function Iw(n){return n instanceof Yt}function bw(n){return n instanceof Cn&&qv(n)}function Cw(n){return Iw(n)||bw(n)||function(e){if(e instanceof Cn&&zv(e)){for(const t of e.getFilters())if(!Iw(t)&&!bw(t))return!1;return!0}return!1}(n)}function Yy(n){if(ct(n instanceof Yt||n instanceof Cn),n instanceof Yt)return n;if(1===n.filters.length)return Yy(n.filters[0]);const e=n.filters.map(r=>Yy(r));let t=Cn.create(e,n.op);return t=Og(t),Cw(t)?t:(ct(t instanceof Cn),ct(Yu(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>Qy(r,i)))}function Qy(n,e){let t;return ct(n instanceof Yt||n instanceof Cn),ct(e instanceof Yt||e instanceof Cn),t=n instanceof Yt?e instanceof Yt?Cn.create([n,e],"and"):Tw(n,e):e instanceof Yt?Tw(e,n):function(r,i){if(ct(r.filters.length>0&&i.filters.length>0),Yu(r)&&Yu(i))return BT(r,i.getFilters());const a=zv(r)?r:i,u=zv(r)?i:r,g=a.filters.map(v=>Qy(v,u));return Cn.create(g,"or")}(n,e),Og(t)}function Tw(n,e){if(Yu(e))return BT(e,n.getFilters());{const t=e.filters.map(r=>Qy(n,r));return Cn.create(t,"or")}}function Og(n){if(ct(n instanceof Yt||n instanceof Cn),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return Og(e[0]);if(pg(n))return n;const t=e.map(i=>Og(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Cn.create(r,n.op)}class GI{constructor(){this.rn=new Jy}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Js.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Jy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(nn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(nn.comparator)).toArray()}}const kg=new Uint8Array(0);class zI{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Jy,this.un=new $i(r=>Id(r),(r,i)=>bd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Si(i)};return Dw(e).put(a)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Mv(t),""],!1,!0);return Dw(e).j(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Ea(u.parent))}return r})}addFieldIndex(e,t){const r=Pa(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=Fg(e);return a.next(g=>{u.put(ww(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Pa(e),i=Fg(e),a=Df(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Df(e);let i=!0;const a=new Map;return se.forEach(this.cn(t),u=>this.an(e,u).next(g=>{i&&(i=!!g),a.set(u,g)})).next(()=>{if(i){let u=Rt();const g=[];return se.forEach(a,(v,b)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Id(t)}`);const P=function(Qe,it){const Ft=vy(it);if(void 0===Ft)return null;for(const Lt of Oy(Qe,Ft.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(b,v),L=function(Qe,it){const Ft=new Map;for(const Lt of fd(it))for(const vn of Oy(Qe,Lt.fieldPath))switch(vn.op){case"==":case"in":Ft.set(Lt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Ft.set(Lt.fieldPath.canonicalString(),vn.value),Array.from(Ft.values())}return null}(b,v),$=function(Qe,it){const Ft=[];let Lt=!0;for(const vn of fd(it)){const Wi=0===vn.kind?gI(Qe,vn.fieldPath,Qe.startAt):gf(Qe,vn.fieldPath,Qe.startAt);Ft.push(Wi.value),Lt&&(Lt=Wi.inclusive)}return new Ia(Ft,Lt)}(b,v),Y=function(Qe,it){const Ft=[];let Lt=!0;for(const vn of fd(it)){const Wi=0===vn.kind?gf(Qe,vn.fieldPath,Qe.endAt):gI(Qe,vn.fieldPath,Qe.endAt);Ft.push(Wi.value),Lt&&(Lt=Wi.inclusive)}return new Ia(Ft,Lt)}(b,v),ue=this.hn(v,b,$),ge=this.hn(v,b,Y),Ue=this.ln(v,b,L),Ze=this.fn(v.indexId,P,ue,$.inclusive,ge,Y.inclusive,Ue);return se.forEach(Ze,Qe=>r.H(Qe,t.limit).next(it=>{it.forEach(Ft=>{const Lt=$e.fromSegments(Ft.documentKey);u.has(Lt)||(u=u.add(Lt),g.push(Lt))})}))}).next(()=>g)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:rD(Cn.create(e.filters,"and")).map(r=>Ed(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,u,g){const v=(null!=t?t.length:1)*Math.max(r.length,a.length),b=v/(null!=t?t.length:1),S=[];for(let P=0;P<v;++P){const L=t?this.dn(t[P/b]):kg,$=this.wn(e,L,r[P%b],i),Y=this._n(e,L,a[P%b],u),ue=g.map(ge=>this.wn(e,L,ge,!0));S.push(...this.createRange($,Y,ue))}return S}wn(e,t,r,i){const a=new Nd(e,$e.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Nd(e,$e.empty(),t,r);return i?a.Je():a}an(e,t){const r=new nD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const g of a)r.tn(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,a=>this.an(e,a).next(u=>{u?0!==r&&u.fields.length<function(g){let v=new Hn(lr.comparator),b=!1;for(const S of g.filters)for(const P of S.getFlattenedFilters())P.field.isKeyField()||("array-contains"===P.op||"array-contains-any"===P.op?b=!0:v=v.add(P.field));for(const S of g.orderBy)S.field.isKeyField()||(v=v.add(S.field));return v.size+(b?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Rg;for(const i of fd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.He(i.kind);Pd.Ve._e(a,u)}return r.Qe()}dn(e){const t=new Rg;return Pd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Rg;return Pd.Ve._e(wd(this.databaseId,t),r.He(function(i){const a=fd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Rg);let a=0;for(const u of fd(e)){const g=r[a++];for(const v of i)if(this.yn(t,u.fieldPath)&&ff(g))i=this.pn(i,u,g);else{const b=v.He(u.kind);Pd.Ve._e(g,b)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const g of i){const v=new Rg;v.seed(g.Qe()),Pd.Ve._e(u,v.He(t.kind)),a.push(v)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pa(e),i=Fg(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const u=[];return se.forEach(a,g=>i.get([g.indexId,this.uid]).next(v=>{u.push(function(b,S){const P=S?new wy(S.sequenceNumber,new Js(Ll(S.readTime),new $e(Ea(S.documentKey)),S.largestBatchId)):wy.empty(),L=b.fields.map(([$,Y])=>new ug(lr.fromServerFormat($),Y));return new _y(b.indexId,b.collectionGroup,L,P)}(g,v))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ct(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Pa(e),a=Fg(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>se.forEach(g,v=>a.put(ww(v.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?se.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),se.forEach(g,v=>this.En(e,i,v).next(b=>{const S=this.An(a,v);return b.isEqual(S)?se.resolve():this.vn(e,a,v,b,S)}))))})}Rn(e,t,r,i){return Df(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Df(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Df(e);let a=new Hn(ec);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,g)=>{a=a.add(new Nd(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>a)}An(e,t){let r=new Hn(ec);const i=this.mn(t,e);if(null==i)return r;const a=vy(t);if(null!=a){const u=e.data.field(a.fieldPath);if(ff(u))for(const g of u.arrayValue.values||[])r=r.add(new Nd(t.indexId,e.key,this.dn(g),i))}else r=r.add(new Nd(t.indexId,e.key,kg,i));return r}vn(e,t,r,i,a){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(g,v,b,S,P){const L=g.getIterator(),$=v.getIterator();let Y=Ml(L),ue=Ml($);for(;Y||ue;){let ge=!1,Ue=!1;if(Y&&ue){const Ze=b(Y,ue);Ze<0?Ue=!0:Ze>0&&(ge=!0)}else null!=Y?Ue=!0:ge=!0;ge?(S(ue),ue=Ml($)):Ue?(P(Y),Y=Ml(L)):(Y=Ml(L),ue=Ml($))}}(i,a,ec,g=>{u.push(this.Rn(e,t,r,g))},g=>{u.push(this.Pn(e,t,r,g))}),se.waitFor(u)}Tn(e){let t=1;return Fg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,g)=>ec(u,g)).filter((u,g,v)=>!g||0!==ec(u,v[g-1]));const i=[];i.push(e);for(const u of r){const g=ec(u,e),v=ec(u,t);if(0===g)i[0]=e.Je();else if(g>0&&v<0)i.push(u),i.push(u.Je());else if(v>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,kg,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,kg,[]]))}return a}bn(e,t){return ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qI)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Ye())).next(qI)}}function Dw(n){return Ar(n,"collectionParents")}function Df(n){return Ar(n,"indexEntries")}function Pa(n){return Ar(n,"indexConfiguration")}function Fg(n){return Ar(n,"indexState")}function qI(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;qu(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Js(e.readTime,e.documentKey,t)}const Rd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xy(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let g=0;const v=r.X({range:u},(S,P,L)=>(g++,L.delete()));a.push(v.next(()=>{ct(1===g)}));const b=[];for(const S of t.mutations){const P=Y0(e,S.key.path,t.batchId);a.push(i.delete(P)),b.push(S.key)}return se.waitFor(a).next(()=>b)}function Sw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ye();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class Lg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Lg(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).X({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=yt(e),u=Od(e);return u.add({}).next(g=>{ct("number"==typeof g);const v=new By(g,t,r,i),b=function(L,$,Y){const ue=Y.baseMutations.map(Ue=>xg(L.fe,Ue)),ge=Y.mutations.map(Ue=>xg(L.fe,Ue));return{userId:$,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ue,mutations:ge}}(this.serializer,this.userId,v),S=[];let P=new Hn((L,$)=>Ct(L.canonicalString(),$.canonicalString()));for(const L of i){const $=Y0(this.userId,L.key.path,g);P=P.add(L.key.path.popLast()),S.push(u.put(b)),S.push(a.put($,NM))}return P.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[g]=v.keys()}),se.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return Od(e).get(t).next(r=>r?(ct(r.userId===this.userId),Vl(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Od(e).X({index:"userMutationsIndex",range:i},(u,g,v)=>{g.userId===this.userId&&(ct(g.batchId>=r),a=Vl(this.serializer,g)),v.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Od(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).j("userMutationsIndex",t).next(r=>r.map(i=>Vl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return yt(e).X({range:i},(u,g,v)=>{const[b,S,P]=u,L=Ea(S);if(b===this.userId&&t.path.isEqual(L))return Od(e).get(P).next($=>{if(!$)throw Ye();ct($.userId===this.userId),a.push(Vl(this.serializer,$))});v.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ct);const i=[];return t.forEach(a=>{const u=Fv(this.userId,a.path),g=IDBKeyRange.lowerBound(u),v=yt(e).X({range:g},(b,S,P)=>{const[L,$,Y]=b,ue=Ea($);L===this.userId&&a.path.isEqual(ue)?r=r.add(Y):P.done()});i.push(v)}),se.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Fv(this.userId,r),u=IDBKeyRange.lowerBound(a);let g=new Hn(Ct);return yt(e).X({range:u},(v,b,S)=>{const[P,L,$]=v,Y=Ea(L);P===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(g=g.add($)):S.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Od(e).get(a).next(u=>{if(null===u)throw Ye();ct(u.userId===this.userId),r.push(Vl(this.serializer,u))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Xy(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return yt(e).X({range:r},(a,u,g)=>{if(a[0]===this.userId){const v=Ea(a[1]);i.push(v)}else g.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return Aw(e,this.userId,t)}xn(e){return WI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Aw(n,e,t){const r=Fv(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return yt(n).X({range:a,Y:!0},(g,v,b)=>{const[S,P,L]=g;S===e&&P===i&&(u=!0),b.done()}).next(()=>u)}function Od(n){return Ar(n,"mutations")}function yt(n){return Ar(n,"documentMutations")}function WI(n){return Ar(n,"mutationQueues")}class kd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kd(0)}static Mn(){return new kd(-1)}}class iD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new kd(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ht.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Po(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Po(e).X((u,g)=>{const v=Tf(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,a.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Po(e).X((r,i)=>{const a=Tf(i);t(a)})}$n(e){return KI(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return KI(e).put("targetGlobalKey",t)}Fn(e,t){return Po(e).put(_w(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Id(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Po(e).X({range:i,index:"queryTargetsIndex"},(u,g,v)=>{const b=Tf(g);bd(t,b.target)&&(a=b,v.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=No(e);return t.forEach(u=>{const g=Si(u.path);i.push(a.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,u))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=No(e);return se.forEach(t,a=>{const u=Si(a.path);return se.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=No(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=No(e);let a=Rt();return i.X({range:r,Y:!0},(u,g,v)=>{const b=Ea(u[1]),S=new $e(b);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=Si(t.path),i=IDBKeyRange.bound([r],[Mv(r)],!1,!0);let a=0;return No(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,g],v,b)=>{0!==u&&(a++,b.done())}).next(()=>a>0)}le(e,t){return Po(e).get(t).next(r=>r?Tf(r):null)}}function Po(n){return Ar(n,"targets")}function KI(n){return Ar(n,"targetGlobal")}function No(n){return Ar(n,"targetDocuments")}function Vg([n,e],[t,r]){const i=Ct(n,t);return 0===i?Ct(e,r):i}class ur{constructor(e){this.Ln=e,this.buffer=new Hn(Vg),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Vg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Sl(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Do(r)}yield t.Qn(3e5)}))}}class ZI{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(ji.ct);const r=new ur(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Rd)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rd):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,u,g,v,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),i=this.params.maximumSequenceNumbersToCollect):i=P,u=Date.now(),this.nthSequenceNumber(e,i))).next(P=>(r=P,g=Date.now(),this.removeTargets(e,r,t))).next(P=>(a=P,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(b=Date.now(),yy()<=wo.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-S}ms\n\tDetermined least recently used ${i} in `+(g-u)+`ms\n\tRemoved ${a} targets in `+(v-g)+`ms\n\tRemoved ${P} documents in `+(b-v)+`ms\nTotal Duration: ${b-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:P})))}}class oD{constructor(e,t){this.db=e,this.garbageCollector=function Mw(n,e){return new ZI(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Ug(e,r)}removeReference(e,t,r){return Ug(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ug(e,t)}Xn(e,t){return function(r,i){let a=!1;return WI(r).Z(u=>Aw(r,u,i).next(g=>(g&&(a=!0),se.resolve(!g)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(u,g)=>{if(g<=t){const v=this.Xn(e,u).next(b=>{if(!b)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,ht.min()),No(e).delete([0,Si(u.path)])))});i.push(v)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ug(e,t)}Yn(e,t){const r=No(e);let i,a=ji.ct;return r.X({index:"documentTargetsIndex"},([u,g],{path:v,sequenceNumber:b})=>{0===u?(a!==ji.ct&&t(new $e(Ea(i)),a),a=b,i=v):a=ji.ct}).next(()=>{a!==ji.ct&&t(new $e(Ea(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ug(n,e){return No(n).put((r=n.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:r}));var r}class xw{constructor(){this.changes=new $i(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fd(e).put(r)}removeEntry(e,t,r){return Fd(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Pg(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=rn.newInvalidDocument(t);return Fd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:rn.newInvalidDocument(t)};return Fd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(t))},(i,a)=>{r={document:this.ts(t,a),size:Sw(a)}}).next(()=>r)}getEntries(e,t){let r=ti();return this.ns(e,t,(i,a)=>{const u=this.ts(i,a);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=ti(),i=new kn($e.comparator);return this.ns(e,t,(a,u)=>{const g=this.ts(a,u);r=r.insert(a,g),i=i.insert(a,Sw(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let i=new Hn(XI);t.forEach(v=>i=i.add(v));const a=IDBKeyRange.bound(Ul(i.first()),Ul(i.last())),u=i.getIterator();let g=u.getNext();return Fd(e).X({index:"documentKeyIndex",range:a},(v,b,S)=>{const P=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&XI(g,P)<0;)r(g,null),g=u.getNext();g&&g.isEqual(P)&&(r(g,b),g=u.hasNext()?u.getNext():null),g?S.G(Ul(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),Pg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fd(e).j(IDBKeyRange.bound(u,g,!0)).next(v=>{let b=ti();for(const S of v){const P=this.ts($e.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);P.isFoundDocument()&&(vg(t,P)||i.has(P.key))&&(b=b.insert(P.key,P))}return b})}getAllFromCollectionGroup(e,t,r,i){let a=ti();const u=JI(t,r),g=JI(t,Js.max());return Fd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(v,b,S)=>{const P=this.ts($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(P.key,P),a.size===i&&S.done()}).next(()=>a)}newChangeBuffer(e){return new aD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QI(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return QI(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function qy(n,e){let t;if(e.document)t=pw(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=Ll(e.noDocument.readTime);t=rn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ye();{const r=$e.fromSegments(e.unknownDocument.path),i=Ll(e.unknownDocument.version);t=rn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Pn(r[0],r[1]);return ht.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return rn.newInvalidDocument(e)}}function Pw(n){return new YI(n)}class aD extends xw{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $i(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((a,u)=>Ct(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const g=this.us.get(a);if(t.push(this.os.removeEntry(e,a,g.readTime)),u.isValidDocument()){const v=VI(this.os.serializer,u);i=i.add(a.path.popLast()),r+=Sw(v)-g.size,t.push(this.os.addEntry(e,a,v))}else if(r-=g.size,this.trackRemovals){const v=VI(this.os.serializer,u.convertToNoDocument(ht.min()));t.push(this.os.addEntry(e,a,v))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,u)=>{this.us.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function QI(n){return Ar(n,"remoteDocumentGlobal")}function Fd(n){return Ar(n,"remoteDocumentsV14")}function Ul(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JI(n,e){const t=e.documentKey.path.toArray();return[n,Pg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ct(t[a],r[a]),i)return i;return i=Ct(t.length,r.length),i||(i=Ct(t[t.length-2],r[r.length-2]),i||Ct(t[t.length-1],r[r.length-1]))}class lD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bg{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xd(r.mutation,i,$r.empty(),Pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Rt()){const i=ba();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=wg();return a.forEach((g,v)=>{u=u.insert(g,v.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Rt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,g)=>{t.set(u,g)})})}computeViews(e,t,r,i){let a=ti();const u=Rl(),g=Rl();return t.forEach((v,b)=>{const S=r.get(b.key);i.has(b.key)&&(void 0===S||S.mutation instanceof to)?a=a.insert(b.key,b):void 0!==S?(u.set(b.key,S.mutation.getFieldMask()),xd(S.mutation,b,S.mutation.getFieldMask(),Pn.now())):u.set(b.key,$r.empty())}),this.recalculateAndSaveOverlays(e,a).next(v=>(v.forEach((b,S)=>u.set(b,S)),t.forEach((b,S)=>{var P;return g.set(b,new lD(S,null!==(P=u.get(b))&&void 0!==P?P:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Rl();let i=new kn((u,g)=>u-g),a=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const g of u)g.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let S=r.get(v)||$r.empty();S=g.applyToLocalView(b,S),r.set(v,S);const P=(i.get(g.batchId)||Rt()).add(v);i=i.insert(g.batchId,P)})}).next(()=>{const u=[],g=i.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),b=v.key,S=v.value,P=Mo();S.forEach(L=>{if(!a.has(L)){const $=II(t.get(L),r.get(L));null!==$&&P.set(L,$),a=a.add(L)}}),u.push(this.documentOverlayCache.saveOverlays(e,b,P))}return se.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):se.resolve(ba());let g=-1,v=a;return u.next(b=>se.forEach(b,(S,P)=>(g<P.largestBatchId&&(g=P.largestBatchId),a.get(S)?se.resolve():this.remoteDocumentCache.getEntry(e,S).next(L=>{v=v.insert(S,L)}))).next(()=>this.populateOverlays(e,b,a)).next(()=>this.computeViews(e,v,b,Rt())).next(S=>({batchId:g,changes:Ly(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=wg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=wg();return this.indexManager.getCollectionParents(e,i).next(u=>se.forEach(u,g=>{const v=(b=t,S=g.child(i),new Nl(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((S,P)=>{a=a.insert(S,P)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((g,v)=>{const b=v.getKey();null===a.get(b)&&(a=a.insert(b,rn.newInvalidDocument(b)))});let u=wg();return a.forEach((g,v)=>{const b=i.get(g);void 0!==b&&xd(b.mutation,v,$r.empty(),Pn.now()),vg(t,v)&&(u=u.insert(g,v))}),u})}}class eb{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:mr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Wy(r.bundledQuery),readTime:mr(r.readTime)}),se.resolve();var r}}class tb{constructor(){this.overlays=new kn($e.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ba();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ba(),a=t.length+1,u=new $e(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const v=g.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&v.largestBatchId>r&&i.set(v.getKey(),v)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new kn((b,S)=>b-S);const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=a.get(b.largestBatchId);null===S&&(S=ba(),a=a.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=ba(),v=a.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=i)););return se.resolve(g)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new jy(t,r));let a=this.ls.get(t);void 0===a&&(a=Rt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class e_{constructor(){this.fs=new Hn(ni.ds),this.ws=new Hn(ni._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ni(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ni(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new $e(new nn([])),r=new ni(t,e),i=new ni(t,e+1),a=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),a.push(u.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new $e(new nn([])),r=new ni(t,e),i=new ni(t,e+1);let a=Rt();return this.ws.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ni(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ni{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return $e.comparator(e.key,t.key)||Ct(e.As,t.As)}static _s(e,t){return Ct(e.As,t.As)||$e.comparator(e.key,t.key)}}class jg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hn(ni.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const u=new By(a,t,r,i);this.mutationQueue.push(u);for(const g of i)this.Rs=this.Rs.add(new ni(g.key,a)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ni(t,0),i=new ni(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],u=>{const g=this.Ps(u.As);a.push(g)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ct);return t.forEach(i=>{const a=new ni(i,0),u=new ni(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,u],g=>{r=r.add(g.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;$e.isDocumentKey(a)||(a=a.child(""));const u=new ni(new $e(a),0);let g=new Hn(Ct);return this.Rs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(g=g.add(v.As)),!0)},u),se.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,i=>{const a=new ni(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ni(t,0),i=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hg{constructor(e){this.Ds=e,this.docs=new kn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let r=ti();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():rn.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=ti();const u=t.path,g=new $e(u.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:b,value:{document:S}}=v.getNext();if(!u.isPrefixOf(b.path))break;b.path.length>u.length+1||qu(W0(S),r)<=0||(i.has(S.key)||vg(t,S))&&(a=a.insert(S.key,S.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ye()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uD(this)}getSize(e){return se.resolve(this.size)}}class uD extends xw{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class cD{constructor(e){this.persistence=e,this.xs=new $i(t=>Id(t),bd),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Ns=0,this.ks=new e_,this.targetCount=0,this.Ms=kd.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((u,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class Nw{constructor(e,t){this.$s={},this.overlays={},this.Os=new ji(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new cD(this),this.indexManager=new GI,this.remoteDocumentCache=new Hg(r=>this.referenceDelegate.Ls(r)),this.serializer=new yw(t),this.qs=new eb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new jg(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new nb(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class nb extends Nv{constructor(e){super(),this.currentSequenceNumber=e}}class $g{constructor(e){this.persistence=e,this.Qs=new e_,this.js=null}static zs(e){return new $g(e)}get Ws(){if(this.js)return this.js;throw Ye()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const i=$e.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,ht.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class dD{constructor(e){this.serializer=e}O(e,t,r,i){const a=new Iy("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kv,{unique:!0}),g.createObjectStore("documentMutations"),Rw(e),function(g){g.createObjectStore("remoteDocuments")}(e));let u=se.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Rw(e)),u=u.next(()=>function(g){const v=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(g,v){return v.store("mutations").j().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kv,{unique:!0});const S=v.store("mutations"),P=b.map(L=>S.put(L));return se.waitFor(P)})}(e,a))),u=u.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(a))),r<6&&i>=6&&(u=u.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(a))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(a))),r<11&&i>=11&&(u=u.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:BM});v.createIndex("collectionPathOverlayIndex",jM,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",HM,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:Q0});v.createIndex("documentKeyIndex",J0),v.createIndex("collectionGroupIndex",LT)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,a))),r<15&&i>=15&&(u=u.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:FM}).createIndex("sequenceNumberIndex",LM,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:VM}).createIndex("documentKeyIndex",UM,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Sw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>se.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(g=>se.forEach(g,v=>{ct(v.userId===a.userId);const b=Vl(this.serializer,v);return Xy(e,a.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((u,g)=>{const v=new nn(u),b=[0,Si(v)];a.push(t.get(b).next(S=>S?se.resolve():t.put({targetId:0,path:Si(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:kM});const r=t.store("collectionParents"),i=new Jy,a=u=>{if(i.add(u)){const g=u.lastSegment(),v=u.popLast();return r.put({collectionId:g,parent:Si(v)})}};return t.store("remoteDocuments").X({Y:!0},(u,g)=>{const v=new nn(u);return a(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,g,v],b)=>{const S=Ea(g);return a(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Tf(i),u=_w(this.serializer,a);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,u)=>{const g=t.store("remoteDocumentsV14"),v=(b=u,b.document?new $e(nn.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):Ye()).path.toArray();var b;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(g.put(S))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Pw(this.serializer),a=new Nw($g.zs,this.serializer.fe);return r.j().next(u=>{const g=new Map;return u.forEach(v=>{var b;let S=null!==(b=g.get(v.userId))&&void 0!==b?b:Rt();Vl(this.serializer,v).keys().forEach(P=>S=S.add(P)),g.set(v.userId,S)}),se.forEach(g,(v,b)=>{const S=new Jr(b),P=Zy.de(this.serializer,S),L=a.getIndexManager(S),$=Lg.de(S,this.serializer,L,a.referenceDelegate);return new Bg(i,$,P,L).recalculateAndSaveOverlaysForDocumentKeys(new Ty(t,ji.ct),v).next()})})}}function Rw(n){n.createObjectStore("targetDocuments",{keyPath:RM}).createIndex("documentTargetsIndex",OM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lv,{unique:!0}),n.createObjectStore("targetGlobal")}const Ow="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kw{constructor(e,t,r,i,a,u,g,v,b,S,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=u,this.document=g,this.ri=b,this.oi=S,this.ui=P,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!kw.D())throw new be(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oD(this,i),this.di=t+"main",this.serializer=new yw(v),this.wi=new As(this.di,this.ui,new dD(this.serializer)),this.Bs=new iD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Pw(this.serializer),this.qs=new UI,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,Ow);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ji(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Sl(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return t_(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return Fw(e).delete(this.clientId)}bi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ar(r,"clientMetadata");return i.j().next(a=>{const u=e.Si(a,18e5),g=a.filter(v=>-1===u.indexOf(v));return se.forEach(g,v=>i.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):t_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,Ow);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fw(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,g=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ty(t,ji.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Fw(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Lg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zI(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Zy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.ui)?Bv:14===u?Uv:13===u?X0:12===u?Vv:11===u?Al:void Ye();var u;let g;return this.wi.runTransaction(e,i,a,v=>(g=new Ty(v,this.Os?this.Os.next():ji.ct),"readwrite-primary"===t?this.Ti(g).next(b=>!!b||this.Ei(g)).next(b=>{if(!b)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(ce.FAILED_PRECONDITION,Pv);return r(g)}).next(b=>this.vi(g).next(()=>b)):this.Oi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Oi(e){return t_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ce.FAILED_PRECONDITION,Ow)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return t_(e).put("owner",t)}static D(){return As.D()}Ai(e){const t=t_(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,zt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function t_(n){return Ar(n,"owner")}function Fw(n){return Ar(n,"clientMetadata")}function rb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ib{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Rt(),i=Rt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ib(e,t.fromCache,r,i)}}class Lw{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(HT(t))return se.resolve(null);let r=ci(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=yf(t,null,"F"),r=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Rt(...a);return this.Ui.getDocuments(e,u).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.ji(t,g);return this.zi(t,b,u,v.readTime)?this.Ki(e,yf(t,null,"F")):this.Wi(e,b,t,v)}))})))}Gi(e,t,r,i){return HT(t)||i.isEqual(ht.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const u=this.ji(t,a);return this.zi(t,u,r,i)?this.Qi(e,t):(yy()<=wo.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qv(t)),this.Wi(e,u,t,Ey(i,-1)))})}ji(e,t){let r=new Hn(_I(e));return t.forEach((i,a)=>{vg(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return yy()<=wo.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Qv(t)),this.Ui.getDocumentsMatchingQuery(e,t,Js.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class n_{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new kn(Ct),this.Yi=new $i(a=>Id(a),bd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function sb(n,e,t,r){return new n_(n,e,t,r)}function ob(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],g=[];let v=Rt();for(const b of i){u.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}for(const b of a){g.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(b=>({er:b,removedBatchIds:u,addedBatchIds:g}))})})}),r_.apply(this,arguments)}function zg(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,g,v,b){const S=v.batch,P=S.keys();let L=se.resolve();return P.forEach($=>{L=L.next(()=>b.getEntry(g,$)).next(Y=>{const ue=v.docVersions.get($);ct(null!==ue),Y.version.compareTo(ue)<0&&(S.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),b.addEntry(Y)))})}),L.next(()=>u.mutationQueue.removeMutationBatch(g,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let g=Rt();for(let v=0;v<u.mutationResults.length;++v)u.mutationResults[v].transformResults.length>0&&(g=g.add(u.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ab(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function hD(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const g=[];e.targetChanges.forEach((S,P)=>{const L=i.get(P);if(!L)return;g.push(t.Bs.removeMatchingKeys(a,S.removedDocuments,P).next(()=>t.Bs.addMatchingKeys(a,S.addedDocuments,P)));let $=L.withSequenceNumber(a.currentSequenceNumber);var Y,ue,ge;null!==e.targetMismatches.get(P)?$=$.withResumeToken(pr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):S.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(S.resumeToken,r)),i=i.insert(P,$),ue=$,ge=S,(0===(Y=L).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(a,$))});let v=ti(),b=Rt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(a,S))}),g.push(lb(a,u,e.documentUpdates).next(S=>{v=S.nr,b=S.sr})),!r.isEqual(ht.min())){const S=t.Bs.getLastRemoteSnapshotVersion(a).next(P=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));g.push(S)}return se.waitFor(g).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,v,b)).next(()=>v)}).then(a=>(t.Ji=i,a))}function lb(n,e,t){let r=Rt(),i=Rt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=ti();return t.forEach((g,v)=>{const b=a.get(g);v.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(g)),v.isNoDocument()&&v.version.isEqual(ht.min())?(e.removeEntry(g,v.readTime),u=u.insert(g,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),u=u.insert(g,v)):Pe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",v.version)}),{nr:u,sr:i}})}function fD(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sf(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,se.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new xa(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ld(n,e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Sl(u))throw u;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Vw.apply(this,arguments)}function i_(n,e,t){const r=Ge(n);let i=ht.min(),a=Rt();return r.persistence.runTransaction("Execute query","readonly",u=>function(g,v,b){const S=Ge(g),P=S.Yi.get(b);return void 0!==P?se.resolve(S.Ji.get(P)):S.Bs.getTargetData(v,b)}(r,u,ci(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,g.targetId).next(v=>{a=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:ht.min(),t?a:Rt())).next(g=>(Uw(r,yI(e),g),{documents:g,ir:a})))}function Af(n,e){const t=Ge(n),r=Ge(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(u=>u?u.target:null))}function ub(n,e){const t=Ge(n),r=t.Xi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Ey(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Uw(t,e,i),i))}function Uw(n,e,t){let r=n.Xi.get(e)||ht.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function s_(){return s_=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);let a=Rt(),u=ti();for(const b of t){const S=e.rr(b.metadata.name);b.document&&(a=a.add(S));const P=e.ur(b);P.setReadTime(e.cr(b.metadata.readTime)),u=u.insert(S,P)}const g=i.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Sf(i,(b=r,ci(mf(nn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>lb(b,g,u).next(S=>(g.apply(b),S)).next(S=>i.Bs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>i.Bs.addMatchingKeys(b,a,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,S.nr,S.sr)).next(()=>S.nr)))}),s_.apply(this,arguments)}function gD(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,me.Z)(function*(n,e,t=Rt()){const r=yield Sf(n,ci(Wy(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=mr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(a,e);const g=r.withResumeToken(pr.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(g.targetId,g),i.Bs.updateTargetData(a,g).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),o_.apply(this,arguments)}function cb(n,e){return`firestore_clients_${n}_${e}`}function a_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bw(n,e){return`firestore_targets_${n}_${e}`}class qg{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new be(i.error.code,i.error.message))),u?new qg(e,t,i.state,a):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new be(r.error.code,r.error.message))),a?new Mf(e,r.state,i):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class l_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Eg();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=kT(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new l_(e,a):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jw(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hw{constructor(){this.activeTargetIds=Eg()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wg{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new kn(Ct),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=cb(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Hw),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(cb(e.persistenceKey,i));if(a){const u=l_.ar(i,a);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Bw(this.persistenceKey,e));if(r){const i=Mf.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bw(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let u=ji.ct;if(null!=a)try{const g=JSON.parse(a);ct("number"==typeof g),u=g}catch(g){fr("SharedClientState","Failed to read sequence number from WebStorage",g)}return u}(r.newValue);i!==ji.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new qg(this.currentUser,e,t,r),a=a_(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=a_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Bw(this.persistenceKey,e),a=new Mf(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return l_.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return qg.ar(new Jr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Mf.ar(i,t)}br(e){return jw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),u=[],g=[];return a.forEach(v=>{i.has(v)||u.push(v)}),i.forEach(v=>{a.has(v)||g.push(v)}),this.syncEngine.Wr(u,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Eg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class db{constructor(){this.Hr=new Hw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Hw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hb{Yr(e){}shutdown(){}}class fb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let u_=null;function $w(){return null===u_?u_=268435456+Math.round(2147483648*Math.random()):u_++,"0x"+u_.toString(16)}const mD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yD{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Mi="WebChannelConnection";class _D extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const u=$w(),g=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${u}:`,g,r);const v={};return this.Eo(v,i,a),this.Ao(e,g,v,r).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${u}: `,b),b),b=>{throw Ds("RestConnection",`RPC '${e}' ${u} failed with error: `,b,"url: ",g,"request:",r),b})}vo(e,t,r,i,a,u){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+At,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${mD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=$w();return new Promise((u,g)=>{const v=new AT;v.setWithCredentials(!0),v.listenOnce(DT.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ts.NO_ERROR:const S=v.getResponseJson();Pe(Mi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(S)),u(S);break;case Ts.TIMEOUT:Pe(Mi,`RPC '${e}' ${a} timed out`),g(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ts.HTTP_ERROR:const P=v.getStatus();if(Pe(Mi,`RPC '${e}' ${a} failed with status:`,P,"response text:",v.getResponseText()),P>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const Y=function(ue){const ge=ue.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ge)>=0?ge:ce.UNKNOWN}($.status);g(new be(Y,$.message))}else g(new be(ce.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new be(ce.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{Pe(Mi,`RPC '${e}' ${a} completed.`)}});const b=JSON.stringify(i);Pe(Mi,`RPC '${e}' ${a} sending request:`,i),v.send(t,"POST",b,r,15)})}Ro(e,t,r){const i=$w(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=CT(),g=TT(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.xmlHttpFactory=new ST({})),this.Eo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const S=a.join("");Pe(Mi,`Creating RPC '${e}' stream ${i}: ${S}`,v);const P=u.createWebChannel(S,v);let L=!1,$=!1;const Y=new yD({ro:ge=>{$?Pe(Mi,`Not sending because RPC '${e}' stream ${i} is closed:`,ge):(L||(Pe(Mi,`Opening RPC '${e}' stream ${i} transport.`),P.open(),L=!0),Pe(Mi,`RPC '${e}' stream ${i} sending:`,ge),P.send(ge))},oo:()=>P.close()}),ue=(ge,Ue,Ze)=>{ge.listen(Ue,Qe=>{try{Ze(Qe)}catch(it){setTimeout(()=>{throw it},0)}})};return ue(P,my.EventType.OPEN,()=>{$||Pe(Mi,`RPC '${e}' stream ${i} transport opened.`)}),ue(P,my.EventType.CLOSE,()=>{$||($=!0,Pe(Mi,`RPC '${e}' stream ${i} transport closed`),Y.wo())}),ue(P,my.EventType.ERROR,ge=>{$||($=!0,Ds(Mi,`RPC '${e}' stream ${i} transport errored:`,ge),Y.wo(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),ue(P,my.EventType.MESSAGE,ge=>{var Ue;if(!$){const Ze=ge.data[0];ct(!!Ze);const Qe=Ze,it=Qe.error||(null===(Ue=Qe[0])||void 0===Ue?void 0:Ue.error);if(it){Pe(Mi,`RPC '${e}' stream ${i} received error:`,it);const Ft=it.status;let Lt=function(Wi){const La=gr[Wi];if(void 0!==La)return sw(La)}(Ft),vn=it.message;void 0===Lt&&(Lt=ce.INTERNAL,vn="Unknown error status: "+Ft+" with message "+it.message),$=!0,Y.wo(new be(Lt,vn)),P.close()}else Pe(Mi,`RPC '${e}' stream ${i} received:`,Ze),Y._o(Ze)}}),ue(g,U0.STAT_EVENT,ge=>{ge.stat===B0.PROXY?Pe(Mi,`RPC '${e}' stream ${i} detected buffering proxy`):ge.stat===B0.NOPROXY&&Pe(Mi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Y.fo()},0),Y}}function pb(){return typeof window<"u"?window:null}function Kg(){return typeof document<"u"?document:null}function xf(n){return new Gr(n,!0)}class Gw{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class gb{constructor(e,t,r,i,a,u,g,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Gw(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,me.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,me.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,me.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mb extends gb{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Da(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Ye(),i=e.targetChange.targetIds||[],a=function(v,b){return v.useProto3Json?(ct(void 0===b||"string"==typeof b),pr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&function(v){const b=void 0===v.code?ce.UNKNOWN:sw(v.code);return new be(b,v.message||"")}(u);t=new lw(r,i,a,g||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),a=mr(r.document.updateTime),u=r.document.createTime?mr(r.document.createTime):ht.min(),g=new ei({mapValue:{fields:r.document.fields}}),v=rn.newFoundDocument(i,a,u,g);t=new Ag(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),a=r.readTime?mr(r.readTime):ht.min(),u=rn.newNoDocument(i,a);t=new Ag([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new Ag([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ye();{const r=e.filter,{count:i=0,unchangedNames:a}=r,u=new rw(i,a);t=new aw(r.targetId,u)}}var v;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ht.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ht.min():a.readTime?mr(a.readTime):ht.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Mg(this.serializer),t.addTarget=function(i,a){let u;const g=a.target;if(u=yg(g)?{documents:no(i,g)}:{query:Ms(i,g)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=PI(i,a.resumeToken);const v=$y(i,a.expectedCount);null!==v&&(u.expectedCount=v)}else if(a.snapshotVersion.compareTo(ht.min())>0){u.readTime=Cf(i,a.snapshotVersion.toTimestamp());const v=$y(i,a.expectedCount);null!==v&&(u.expectedCount=v)}return u}(this.serializer,e);const r=function RI(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Mg(this.serializer),t.removeTarget=e,this.Wo(t)}}class vD extends gb{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Sa(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,i){let a=mr(r.updateTime?r.updateTime:i);return a.isEqual(ht.min())&&(a=mr(i)),new EI(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xg(this.serializer,r))};this.Wo(t)}}class wD extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.vo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ce.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class zw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fr(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yb{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(g=>{r.enqueueAndForget((0,me.Z)(function*(){var v;Bl(u)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,me.Z)(function*(b){const S=Ge(b);S.vu.add(4),yield Pf(S),S.bu.set("Unknown"),S.vu.delete(4),yield Vd(S)}),function(b){return v.apply(this,arguments)})(u))}))}),this.bu=new zw(r,i)}}function Vd(n){return qw.apply(this,arguments)}function qw(){return qw=(0,me.Z)(function*(n){if(Bl(n))for(const e of n.Ru)yield e(!0)}),qw.apply(this,arguments)}function Pf(n){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,me.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),Yg.apply(this,arguments)}function c_(n,e){const t=Ge(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),_b(t)?Kw(t):Of(t).Ko()&&tc(t,e))}function Nf(n,e){const t=Ge(n),r=Of(t);t.Au.delete(e),r.Ko()&&Ww(t,e),0===t.Au.size&&(r.Ko()?r.jo():Bl(t)&&t.bu.set("Unknown"))}function tc(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Of(n).su(e)}function Ww(n,e){n.Vu.qt(e),Of(n).iu(e)}function Kw(n){n.Vu=new AI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Of(n).start(),n.bu.gu()}function _b(n){return Bl(n)&&!Of(n).Uo()&&n.Au.size>0}function Bl(n){return 0===Ge(n).vu.size}function d_(n){n.Vu=void 0}function ID(n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,me.Z)(function*(n){n.Au.forEach((e,t)=>{tc(n,e)})}),Qg.apply(this,arguments)}function bD(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,me.Z)(function*(n,e){d_(n),_b(n)?(n.bu.Iu(e),Kw(n)):n.bu.set("Unknown")}),h_.apply(this,arguments)}function Zw(n,e,t){return f_.apply(this,arguments)}function f_(){return f_=(0,me.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof lw&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const u=a.cause;for(const g of a.targetIds)i.Au.has(g)&&(yield i.remoteSyncer.rejectListen(g,u),i.Au.delete(g),i.Vu.removeTarget(g))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jg(n,r)}else if(e instanceof Ag?n.Vu.Ht(e):e instanceof aw?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ht.min()))try{const r=yield ab(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Vu.ce(a);return u.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=i.Au.get(v);b&&i.Au.set(v,b.withResumeToken(g.resumeToken,a))}}),u.targetMismatches.forEach((g,v)=>{const b=i.Au.get(g);if(!b)return;i.Au.set(g,b.withResumeToken(pr.EMPTY_BYTE_STRING,b.snapshotVersion)),Ww(i,g);const S=new xa(b.target,g,v,b.sequenceNumber);tc(i,S)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Jg(n,r)}var r}),f_.apply(this,arguments)}function Jg(n,e,t){return p_.apply(this,arguments)}function p_(){return p_=(0,me.Z)(function*(n,e,t){if(!Sl(e))throw e;n.vu.add(1),yield Pf(n),n.bu.set("Offline"),t||(t=()=>ab(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Vd(n)}))}),p_.apply(this,arguments)}function Yw(n,e){return e().catch(t=>Jg(n,t,e))}function Rf(n){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,me.Z)(function*(n){const e=Ge(n),t=nc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;CD(e);)try{const i=yield fD(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,TD(e,i)}catch(i){yield Jg(e,i)}Jw(e)&&DD(e)}),Qw.apply(this,arguments)}function CD(n){return Bl(n)&&n.Eu.length<10}function TD(n,e){n.Eu.push(e);const t=nc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Jw(n){return Bl(n)&&!nc(n).Uo()&&n.Eu.length>0}function DD(n){nc(n).start()}function vb(n){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,me.Z)(function*(n){nc(n).hu()}),Xw.apply(this,arguments)}function SD(n){return wb.apply(this,arguments)}function wb(){return wb=(0,me.Z)(function*(n){const e=nc(n);for(const t of n.Eu)e.uu(t.mutations)}),wb.apply(this,arguments)}function zM(n,e,t){return eE.apply(this,arguments)}function eE(){return eE=(0,me.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Tg.from(r,e,t);yield Yw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rf(n)}),eE.apply(this,arguments)}function AD(n,e){return tE.apply(this,arguments)}function tE(){return tE=(0,me.Z)(function*(n,e){var t;e&&nc(n).ou&&(yield(t=(0,me.Z)(function*(r,i){if(iw(a=i.code)&&a!==ce.ABORTED){const u=r.Eu.shift();nc(r).Qo(),yield Yw(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Rf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Jw(n)&&DD(n)}),tE.apply(this,arguments)}function nE(n,e){return rE.apply(this,arguments)}function rE(){return rE=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Bl(t);t.vu.add(3),yield Pf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Vd(t)}),rE.apply(this,arguments)}function iE(n,e){return g_.apply(this,arguments)}function g_(){return g_=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.vu.delete(2),yield Vd(t)):e||(t.vu.add(2),yield Pf(t),t.bu.set("Unknown"))}),g_.apply(this,arguments)}function Of(n){return n.Su||(n.Su=function(e,t,r){const i=Ge(e);return i.fu(),new mb(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:ID.bind(null,n),ao:bD.bind(null,n),nu:Zw.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Su.Qo(),_b(n)?Kw(n):n.bu.set("Unknown")):(yield n.Su.stop(),d_(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function nc(n){return n.Du||(n.Du=function(e,t,r){const i=Ge(e);return i.fu(),new vD(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:vb.bind(null,n),ao:AD.bind(null,n),au:SD.bind(null,n),cu:zM.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Du.Qo(),yield Rf(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class sE{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,g=new sE(e,t,u,i,a);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kf(n,e){if(fr("AsyncQueue",`${e}: ${n}`),Sl(n))return new be(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Ff{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=wg(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new Ff(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ff)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ff;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Lf{constructor(){this.Cu=new kn($e.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ye():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ud{constructor(e,t,r,i,a,u,g,v,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(g=>{u.push({type:0,doc:g})}),new Ud(e,t,Ff.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_g(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Eb{constructor(){this.Nu=void 0,this.listeners=[]}}class Ib{constructor(){this.queries=new $i(e=>mI(e),_g),this.onlineState="Unknown",this.ku=new Set}}function m_(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Eb),i)try{a.Nu=yield t.onListen(r)}catch(u){const g=kf(u,`Initialization of query '${Qv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&lE(t)}),y_.apply(this,arguments)}function oE(n,e){return aE.apply(this,arguments)}function aE(){return aE=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),aE.apply(this,arguments)}function qM(n,e){const t=Ge(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const g of u.listeners)g.$u(i)&&(r=!0);u.Nu=i}}r&&lE(t)}function MD(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function lE(n){n.ku.forEach(e=>{e.next()})}class uE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xD{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class bb{constructor(e){this.serializer=e}rr(e){return Ta(this.serializer,e)}ur(e){return e.metadata.exists?pw(this.serializer,e.document,!1):rn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return mr(e)}}class Xg{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cb(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=nn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new bb(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const u of i.metadata.queries){const g=(t.get(u)||Rt()).add(a);t.set(u,g)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function pD(n,e,t,r){return s_.apply(this,arguments)}(e.localStore,new bb(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield gD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Cb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class __{constructor(e){this.key=e}}class Ro{constructor(e){this.key=e}}class Tb{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Rt(),this.mutatedKeys=Rt(),this.tc=_I(e),this.ec=new Ff(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Lf,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,g=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,P)=>{const L=i.get(S),$=vg(this.query,P)?P:null,Y=!!L&&this.mutatedKeys.has(L.key),ue=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let ge=!1;L&&$?L.data.isEqual($.data)?Y!==ue&&(r.track({type:3,doc:$}),ge=!0):this.rc(L,$)||(r.track({type:2,doc:$}),ge=!0,(v&&this.tc($,v)>0||b&&this.tc($,b)<0)&&(g=!0)):!L&&$?(r.track({type:0,doc:$}),ge=!0):L&&!$&&(r.track({type:1,doc:L}),ge=!0,(v||b)&&(g=!0)),ge&&($?(u=u.add($),a=ue?a.add(S):a.delete(S)):(u=u.delete(S),a=a.delete(S)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const S="F"===this.query.limitType?u.last():u.first();u=u.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{ec:u,ic:r,zi:g,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((b,S)=>function(P,L){const $=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return $(P)-$(L)}(b.type,S.type)||this.tc(b.doc,S.doc)),this.oc(r);const u=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,v=g!==this.Xu;return this.Xu=g,0!==a.length||v?{snapshot:new Ud(this.query,e.ec,i,a,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Lf,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Rt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Ro(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new __(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Rt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ud.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class cE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class em{constructor(e){this.key=e,this.fc=!1}}class PD{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new $i(g=>mI(g),_g),this._c=new Map,this.mc=new Set,this.gc=new kn($e.comparator),this.yc=new Map,this.Ic=new e_,this.Tc={},this.Ec=new Map,this.Ac=kd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ND(n,e){return dE.apply(this,arguments)}function dE(){return dE=(0,me.Z)(function*(n,e){const t=EE(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const u=yield Sf(t.localStore,ci(e)),g=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Vf(t,e,r,"current"===g,u.resumeToken),t.isPrimaryClient&&c_(t.remoteStore,u)}return i}),dE.apply(this,arguments)}function Vf(n,e,t,r,i){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,me.Z)(function*(n,e,t,r,i){n.Rc=(P,L,$)=>{return(Y=(0,me.Z)(function*(ue,ge,Ue,Ze){let Qe=ge.view.sc(Ue);Qe.zi&&(Qe=yield i_(ue.localStore,ge.query,!1).then(({documents:Lt})=>ge.view.sc(Lt,Qe)));const it=Ze&&Ze.targetChanges.get(ge.targetId),Ft=ge.view.applyChanges(Qe,ue.isPrimaryClient,it);return rm(ue,ge.targetId,Ft.cc),Ft.snapshot}),function(ue,ge,Ue,Ze){return Y.apply(this,arguments)})(n,P,L,$);var Y};const a=yield i_(n.localStore,e,!0),u=new Tb(e,a.ir),g=u.sc(a.documents),v=bf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=u.applyChanges(g,n.isPrimaryClient,v);rm(n,t,b.cc);const S=new cE(e,t,u);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Uf.apply(this,arguments)}function RD(n,e){return hE.apply(this,arguments)}function hE(){return hE=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!_g(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ld(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Nf(t.remoteStore,r.targetId),Bf(t,r.targetId)}).catch(Do))):(Bf(t,r.targetId),yield Ld(t.localStore,r.targetId,!0))}),hE.apply(this,arguments)}function v_(){return v_=(0,me.Z)(function*(n,e,t){const r=IE(n);try{const i=yield function(a,u){const g=Ge(a),v=Pn.now(),b=u.reduce((L,$)=>L.add($.key),Rt());let S,P;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let $=ti(),Y=Rt();return g.Zi.getEntries(L,b).next(ue=>{$=ue,$.forEach((ge,Ue)=>{Ue.isValidDocument()||(Y=Y.add(ge))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,$)).next(ue=>{S=ue;const ge=[];for(const Ue of u){const Ze=nw(Ue,S.get(Ue.key).overlayedDocument);null!=Ze&&ge.push(new to(Ue.key,Ze,aI(Ze.value.mapValue),qn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,v,ge,u)}).next(ue=>{P=ue;const ge=ue.applyToLocalDocumentSet(S,Y);return g.documentOverlayCache.saveOverlays(L,ue.batchId,ge)})}).then(()=>({batchId:P.batchId,changes:Ly(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,g){let v=a.Tc[a.currentUser.toKey()];v||(v=new kn(Ct)),v=v.insert(u,g),a.Tc[a.currentUser.toKey()]=v}(r,i.batchId,t),yield Na(r,i.changes),yield Rf(r.remoteStore)}catch(i){const a=kf(i,"Failed to persist write");t.reject(a)}}),v_.apply(this,arguments)}function w_(n,e){return E_.apply(this,arguments)}function E_(){return E_=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield hD(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.yc.get(a);u&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?ct(u.fc):i.removedDocuments.size>0&&(ct(u.fc),u.fc=!1))}),yield Na(t,r,e)}catch(r){yield Do(r)}}),E_.apply(this,arguments)}function Sb(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,u)=>{const g=u.view.Mu(e);g.snapshot&&i.push(g.snapshot)}),function(a,u){const g=Ge(a);g.onlineState=u;let v=!1;g.queries.forEach((b,S)=>{for(const P of S.listeners)P.Mu(u)&&(v=!0)}),v&&lE(g)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OD(n,e,t){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let u=new kn($e.comparator);u=u.insert(a,rn.newNoDocument(a,ht.min()));const g=Rt().add(a),v=new If(ht.min(),new Map,new kn(Ct),u,g);yield w_(r,v),r.gc=r.gc.remove(a),r.yc.delete(e),I_(r)}else yield Ld(r.localStore,e,!1).then(()=>Bf(r,e,t)).catch(Do)}),Ab.apply(this,arguments)}function fE(n,e){return tm.apply(this,arguments)}function tm(){return tm=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield zg(t.localStore,e);yE(t,r,null),mE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Na(t,i)}catch(i){yield Do(i)}}),tm.apply(this,arguments)}function Mb(n,e,t){return nm.apply(this,arguments)}function nm(){return nm=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(a,u){const g=Ge(a);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return g.mutationQueue.lookupMutationBatch(v,u).next(S=>(ct(null!==S),b=S.keys(),g.mutationQueue.removeMutationBatch(v,S))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,b,u)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>g.localDocuments.getDocuments(v,b))})}(r.localStore,e);yE(r,e,t),mE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Na(r,i)}catch(i){yield Do(i)}}),nm.apply(this,arguments)}function gE(){return gE=(0,me.Z)(function*(n,e){const t=Ge(n);Bl(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Ge(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>u.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=kf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gE.apply(this,arguments)}function mE(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function yE(n,e,t){const r=Ge(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Bf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||_E(n,r)})}function _E(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Nf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),I_(n))}function rm(n,e,t){for(const r of t)r instanceof __?(n.Ic.addReference(r.key,e),xb(n,r)):r instanceof Ro?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||_E(n,r.key)):Ye()}function xb(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),I_(n))}function I_(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new $e(nn.fromString(e)),r=n.Ac.next();n.yc.set(r,new em(t)),n.gc=n.gc.insert(t,r),c_(n.remoteStore,new xa(ci(mf(t.path)),r,"TargetPurposeLimboResolution",ji.ct))}}function Na(n,e,t){return b_.apply(this,arguments)}function b_(){return b_=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[],u=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,v)=>{u.push(r.Rc(v,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const S=ib.Li(v.targetId,b);a.push(S)}}))}),yield Promise.all(u),r.dc.nu(i),yield(g=(0,me.Z)(function*(v,b){const S=Ge(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>se.forEach(b,L=>se.forEach(L.Fi,$=>S.persistence.referenceDelegate.addReference(P,L.targetId,$)).next(()=>se.forEach(L.Bi,$=>S.persistence.referenceDelegate.removeReference(P,L.targetId,$)))))}catch(P){if(!Sl(P))throw P;Pe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of b){const L=P.targetId;if(!P.fromCache){const $=S.Ji.get(L),ue=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);S.Ji=S.Ji.insert(L,ue)}}}),function(v,b){return g.apply(this,arguments)})(r.localStore,a))}),b_.apply(this,arguments)}function kD(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield ob(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(g=>{g.reject(new be(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Na(t,r.er)}var i}),C_.apply(this,arguments)}function Pb(n,e){const t=Ge(n),r=t.yc.get(e);if(r&&r.fc)return Rt().add(r.key);{let i=Rt();const a=t._c.get(e);if(!a)return i;for(const u of a){const g=t.wc.get(u);i=i.unionWith(g.view.nc)}return i}}function FD(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield i_(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&rm(t,e.targetId,i.cc),i}),T_.apply(this,arguments)}function LD(n,e){return di.apply(this,arguments)}function di(){return di=(0,me.Z)(function*(n,e){const t=Ge(n);return ub(t.localStore,e).then(r=>Na(t,r))}),di.apply(this,arguments)}function jf(n,e,t,r){return vE.apply(this,arguments)}function vE(){return vE=(0,me.Z)(function*(n,e,t,r){const i=Ge(n),a=yield function(u,g){const v=Ge(u),b=Ge(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Sn(S,g).next(P=>P?v.localDocuments.getDocuments(S,P):se.resolve(null)))}(i.localStore,e);var g;null!==a?("pending"===t?yield Rf(i.remoteStore):"acknowledged"===t||"rejected"===t?(yE(i,e,r||null),mE(i,e),g=e,Ge(Ge(i.localStore).mutationQueue).Cn(g)):Ye(),yield Na(i,a)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),vE.apply(this,arguments)}function Nb(){return Nb=(0,me.Z)(function*(n,e){const t=Ge(n);if(EE(t),IE(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UD(t,r.toArray());t.vc=!0,yield iE(t.remoteStore,!0);for(const a of i)c_(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Bf(t,u),Ld(t.localStore,u,!0))),Nf(t.remoteStore,u)}),yield i,yield UD(t,r),function(a){const u=Ge(a);u.yc.forEach((g,v)=>{Nf(u.remoteStore,v)}),u.Ic.Ts(),u.yc=new Map,u.gc=new kn($e.comparator)}(t),t.vc=!1,yield iE(t.remoteStore,!1)}}),Nb.apply(this,arguments)}function UD(n,e,t){return D_.apply(this,arguments)}function D_(){return D_=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[];for(const u of e){let g;const v=r._c.get(u);if(v&&0!==v.length){g=yield Sf(r.localStore,ci(v[0]));for(const b of v){const S=r.wc.get(b),P=yield FD(r,S);P.snapshot&&a.push(P.snapshot)}}else{const b=yield Af(r.localStore,u);g=yield Sf(r.localStore,b),yield Vf(r,wE(b),u,!1,g.resumeToken)}i.push(g)}return r.dc.nu(a),i}),D_.apply(this,arguments)}function wE(n){return jT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function im(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).$i()}function BD(n,e,t,r){return sm.apply(this,arguments)}function sm(){return sm=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);if(i.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield ub(i.localStore,yI(a[0])),g=If.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield Na(i,u,g);break}case"rejected":yield Ld(i.localStore,e,!0),Bf(i,e,r);break;default:Ye()}}),sm.apply(this,arguments)}function jD(n,e,t){return S_.apply(this,arguments)}function S_(){return S_=(0,me.Z)(function*(n,e,t){const r=EE(n);if(r.vc){for(const i of e){if(r._c.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const a=yield Af(r.localStore,i),u=yield Sf(r.localStore,a);yield Vf(r,wE(a),u.targetId,!1,u.resumeToken),c_(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield Ld(r.localStore,i,!1).then(()=>{Nf(r.remoteStore,i),Bf(r,i)}).catch(Do))}}),S_.apply(this,arguments)}function EE(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=w_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OD.bind(null,e),e.dc.nu=qM.bind(null,e.eventManager),e.dc.Pc=MD.bind(null,e.eventManager),e}function IE(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mb.bind(null,e),e}class Bd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=xf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return sb(this.persistence,new Lw,e.initialUser,this.serializer)}createPersistence(e){return new Nw($g.zs,this.serializer)}createSharedClientState(e){return new db}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class A_ extends Bd{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield IE(r.Vc.syncEngine),yield Rf(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return sb(this.persistence,new Lw,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new sD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Cy(t,this.persistence);return new by(e.asyncQueue,r)}createPersistence(e){const t=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new kw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pb(),Kg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new db}}class om extends A_{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Wg&&(r.sharedClientState.syncEngine={jr:jf.bind(null,i),zr:BD.bind(null,i),Wr:jD.bind(null,i),$i:im.bind(null,i),Qr:LD.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,me.Z)(function*(u){yield function VD(n,e){return Nb.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=pb();if(!Wg.D(t))throw new be(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rc{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=kD.bind(null,r.syncEngine),yield iE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ib}createDatastore(e){const t=xf(e.databaseInfo.databaseId),r=new _D(e.databaseInfo);return new wD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=g=>Sb(this.syncEngine,g,0),u=fb.D()?new fb:new hb,new yb(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,g,v,b){const S=new PD(r,i,a,u,g,v);return b&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Pf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $D(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class am{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GD{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new jn,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new xD(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,me.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ob{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,u){const g=Ge(a),v=Mg(g.serializer)+"/documents",b={documents:u.map($=>Ca(g.serializer,$))},S=yield g.vo("BatchGetDocuments",v,b,u.length),P=new Map;S.forEach($=>{const Y=function gw(n,e){return"found"in e?function(t,r){ct(!!r.found);const i=Ta(t,r.found.name),a=mr(r.found.updateTime),u=r.found.createTime?mr(r.found.createTime):ht.min(),g=new ei({mapValue:{fields:r.found.fields}});return rn.newFoundDocument(i,a,u,g)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const i=Ta(t,r.missing),a=mr(r.readTime);return rn.newNoDocument(i,a)}(n,e):Ye()}(g.serializer,$);P.set(Y.key.toString(),Y)});const L=[];return u.forEach($=>{const Y=P.get($.toString());ct(!!Y),L.push(Y)}),L}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=$e.fromPath(i);e.mutations.push(new Cg(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const u=Ge(i),g=Mg(u.serializer)+"/documents",v={writes:a.map(b=>xg(u.serializer,b))};yield u.Io("Commit",g,v)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ye();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new be(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Hf{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Gw(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,me.Z)(function*(){const t=new Ob(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!gd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!iw(t)}return!1}}class zD{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=z0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,me.Z)(function*(g){Pe("FirestoreClient","Received user=",g.uid),yield a.authCredentialListener(g),a.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=kf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function lm(n,e){return um.apply(this,arguments)}function um(){return um=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield ob(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),um.apply(this,arguments)}function kb(n,e){return bE.apply(this,arguments)}function bE(){return bE=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CE(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>nE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>nE(e.remoteStore,a)),n._onlineComponents=e}),bE.apply(this,arguments)}function qD(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function CE(n){return TE.apply(this,arguments)}function TE(){return TE=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!qD(t))throw t;Ds("Error using user provided cache. Falling back to memory cache: "+t),yield lm(n,new Bd)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield lm(n,new Bd);return n._offlineComponents}),TE.apply(this,arguments)}function M_(n){return x_.apply(this,arguments)}function x_(){return x_=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield kb(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield kb(n,new rc))),n._onlineComponents}),x_.apply(this,arguments)}function DE(n){return CE(n).then(e=>e.persistence)}function P_(n){return CE(n).then(e=>e.localStore)}function SE(n){return M_(n).then(e=>e.remoteStore)}function N_(n){return M_(n).then(e=>e.syncEngine)}function $f(n){return R_.apply(this,arguments)}function R_(){return R_=(0,me.Z)(function*(n){const e=yield M_(n),t=e.eventManager;return t.onListen=ND.bind(null,e.syncEngine),t.onUnlisten=RD.bind(null,e.syncEngine),t}),R_.apply(this,arguments)}function AE(n,e,t={}){const r=new jn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,u,g,v){const b=new am({next:P=>{a.enqueueAndForget(()=>oE(i,S));const L=P.docs.has(u);!L&&P.fromCache?v.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&P.fromCache&&g&&"server"===g.source?v.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(P)},error:P=>v.reject(P)}),S=new uE(mf(u.path),b,{includeMetadataChanges:!0,Ku:!0});return m_(i,S)}(yield $f(n),n.asyncQueue,e,t,r)})),r.promise}function Bb(n,e,t={}){const r=new jn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,u,g,v){const b=new am({next:P=>{a.enqueueAndForget(()=>oE(i,S)),P.fromCache&&"server"===g.source?v.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(P)},error:P=>v.reject(P)}),S=new uE(u,b,{includeMetadataChanges:!0,Ku:!0});return m_(i,S)}(yield $f(n),n.asyncQueue,e,t,r)})),r.promise}function ZD(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const YD=new Map;function Hb(n,e,t){if(!t)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QD(n,e,t,r){if(!0===e&&!0===r)throw new be(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JD(n){if(!$e.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XD(n){if($e.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ME(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ye()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ME(n);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eS(n,e){if(e<=0)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xE{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ZD(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Sv;switch(t.type){case"firstParty":return new xM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YD.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),YD.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class ro extends xi{constructor(e,t,r){super(e,t,mf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new $e(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function NE(n,e,...t){if(n=(0,zt.m9)(n),Hb("collection","path",e),n instanceof ic){const r=nn.fromString(e,...t);return XD(r),new ro(n,null,r)}{if(!(n instanceof Fn||n instanceof ro))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return XD(r),new ro(n.firestore,null,r)}}function cm(n,e,...t){if(n=(0,zt.m9)(n),1===arguments.length&&(e=z0.A()),Hb("doc","path",e),n instanceof ic){const r=nn.fromString(e,...t);return JD(r),new Fn(n,null,new $e(r))}{if(!(n instanceof Fn||n instanceof ro))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return JD(r),new Fn(n.firestore,n instanceof ro?n.converter:null,new $e(r))}}function nS(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),(n instanceof Fn||n instanceof ro)&&(e instanceof Fn||e instanceof ro)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RE(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),n instanceof xi&&e instanceof xi&&n.firestore===e.firestore&&_g(n._query,e._query)&&n.converter===e.converter}class rS{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Gw(this,"async_queue_retry"),this.Xc=()=>{const t=Kg();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Kg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Kg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new jn;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,me.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Sl(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=sE.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&Ye()}verifyOperationInProgress(){}sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function OE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class O_{constructor(){this._progressObserver={},this._taskCompletionResolver=new jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends ic{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rS,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$b(this),this._firestoreClient.terminate()}}function yr(n){return n._firestoreClient||$b(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $b(n){var e,t,r;const i=n._freezeSettings(),a=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VT(n._databaseId,g,n._persistenceKey,(b=i).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ZD(b.experimentalLongPollingOptions),b.useFetchStreams));var g,b;n._firestoreClient=new zD(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Gb(n,e,t){const r=new jn;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield lm(n,t),yield kb(n,e),r.resolve()}catch(i){const a=i;if(!qD(a))throw a;Ds("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function xs(n){if(n._initialized||n._terminated)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ra(pr.fromBase64String(e))}catch(t){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ra(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sc{constructor(e){this._methodName=e}}class hm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}const aS=/^__.*__$/;class Kb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class LE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new to(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class fm{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new fm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pm(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Zb(this.ca)&&aS.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class lS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xf(e)}ya(e,t,r,i=!1){return new fm({ca:e,methodName:t,ga:r,path:lr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hl(n){const e=n._freezeSettings(),t=xf(n._databaseId);return new lS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ko(n,e,t,r,i,a={}){const u=n.ya(a.merge||a.mergeFields?2:0,e,t,i);jE("Data must be an object, but it was:",u,r);const g=dS(r,u);let v,b;if(a.merge)v=new $r(u.fieldMask),b=u.fieldTransforms;else if(a.mergeFields){const S=[];for(const P of a.mergeFields){const L=zf(e,P,t);if(!u.contains(L))throw new be(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);HE(S,L)||S.push(L)}v=new $r(S),b=u.fieldTransforms.filter(P=>v.covers(P.field))}else v=null,b=u.fieldTransforms;return new Kb(new ei(g),v,b)}class Gf extends sc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function k_(n,e,t){return new fm({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fo extends sc{_toFieldTransform(e){return new wf(e.path,new xo)}isEqual(e){return e instanceof Fo}}class uS extends sc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=k_(this,e,!0),r=this.pa.map(a=>oc(a,t)),i=new eo(r);return new wf(e.path,i)}isEqual(e){return this===e}}class JM extends sc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=k_(this,e,!0),r=this.pa.map(a=>oc(a,t)),i=new Ju(r);return new wf(e.path,i)}isEqual(e){return this===e}}class cS extends sc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Md(e.serializer,Sd(e.serializer,this.Ia));return new wf(e.path,t)}isEqual(e){return this===e}}function VE(n,e,t,r){const i=n.ya(1,e,t);jE("Data must be an object, but it was:",i,r);const a=[],u=ei.empty();Hi(r,(v,b)=>{const S=qf(e,v,t);b=(0,zt.m9)(b);const P=i.da(S);if(b instanceof Gf)a.push(S);else{const L=oc(b,P);null!=L&&(a.push(S),u.set(S,L))}});const g=new $r(a);return new LE(u,g,i.fieldTransforms)}function UE(n,e,t,r,i,a){const u=n.ya(1,e,t),g=[zf(e,r,t)],v=[i];if(a.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)g.push(zf(e,a[L])),v.push(a[L+1]);const b=[],S=ei.empty();for(let L=g.length-1;L>=0;--L)if(!HE(b,g[L])){const $=g[L];let Y=v[L];Y=(0,zt.m9)(Y);const ue=u.da($);if(Y instanceof Gf)b.push($);else{const ge=oc(Y,ue);null!=ge&&(b.push($),S.set($,ge))}}const P=new $r(b);return new LE(S,P,u.fieldTransforms)}function Yb(n,e,t,r=!1){return oc(t,n.ya(r?4:3,e))}function oc(n,e){if(BE(n=(0,zt.m9)(n)))return jE("Unsupported field value:",e,n),dS(n,e);if(n instanceof sc)return function(t,r){if(!Zb(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let g=oc(u,r.wa(a));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sd(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Pn.fromDate(t);return{timestampValue:Cf(r.serializer,i)}}if(t instanceof Pn){const i=new Pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cf(r.serializer,i)}}if(t instanceof hm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ra)return{bytesValue:PI(r.serializer,t._byteString)};if(t instanceof Fn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${ME(t)}`)}(n,e)}function dS(n,e){const t={};return jv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(n,(r,i)=>{const a=oc(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function BE(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof hm||n instanceof Ra||n instanceof Fn||n instanceof sc)}function jE(n,e,t){if(!BE(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ME(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function zf(n,e,t){if((e=(0,zt.m9)(e))instanceof jl)return e._internalPath;if("string"==typeof e)return qf(n,e);throw pm("Field path arguments must be of type string or ",n,!1,void 0,t)}const XM=new RegExp("[~\\*/\\[\\]]");function qf(n,e,t){if(e.search(XM)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jl(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pm(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(a||u)&&(v+=" (found",a&&(v+=` in field ${r}`),u&&(v+=` in document ${i}`),v+=")"),new be(ce.INVALID_ARGUMENT,g+n+v)}function HE(n,e){return n.some(t=>t.isEqual(e))}class Wf{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qb extends Wf{data(){return super.data()}}function gm(n,e){return"string"==typeof e?qf(n,e):e instanceof jl?e._internalPath:e._delegate._internalPath}function mm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kf{}class Zf extends Kf{}function ac(n,e,...t){let r=[];e instanceof Kf&&r.push(e),r=r.concat(t),function(i){const a=i.filter(g=>g instanceof Qf).length,u=i.filter(g=>g instanceof Yf).length;if(a>1||a>0&&u>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Yf extends Zf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Yf(e,t,r)}_apply(e){const t=this._parse(e);return zE(e._query,t),new xi(e.firestore,e.converter,Yv(e._query,t))}_parse(e){const t=Hl(e.firestore);return function(i,a,u,g,v,b,S){let P;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){nC(S,b);const L=[];for(const $ of S)L.push(tC(g,i,$));P={arrayValue:{values:L}}}else P=tC(g,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||nC(S,b),P=Yb(u,"where",S,"in"===b||"not-in"===b);return Yt.create(v,b,P)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qf extends Kf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const g of u)zE(a,g),a=Yv(a,g)}(e._query,t),new xi(e.firestore,e.converter,Yv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xb extends Zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xb(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new fg(i,a);return function(g,v){if(null===Kv(g)){const b=ky(g);null!==b&&lc(0,b,v.field)}}(r,u),u}(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Nl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class F_ extends Zf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new F_(e,t,r)}_apply(e){return new xi(e.firestore,e.converter,yf(e._query,this._limit,this._limitType))}}class $E extends Zf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $E(e,t,r)}_apply(e){const t=ym(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(i=t,new Nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class GE extends Zf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GE(e,t,r)}_apply(e){const t=ym(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(i=t,new Nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ym(n,e,t,r){if(t[0]=(0,zt.m9)(t[0]),t[0]instanceof Wf)return function(i,a,u,g,v){if(!g)throw new be(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const b=[];for(const S of Qu(i))if(S.field.isKeyField())b.push(wd(a,g.key));else{const P=g.data.field(S.field);if(df(P))throw new be(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const L=S.field.canonicalString();throw new be(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(P)}return new Ia(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hl(n.firestore);return function(a,u,g,v,b,S){const P=a.explicitOrderBy;if(b.length>P.length)throw new be(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let $=0;$<b.length;$++){const Y=b[$];if(P[$].field.isKeyField()){if("string"!=typeof Y)throw new be(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Y}`);if(!Zv(a)&&-1!==Y.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Y}' contains a slash.`);const ue=a.path.child(nn.fromString(Y));if(!$e.isDocumentKey(ue))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const ge=new $e(ue);L.push(wd(u,ge))}else{const ue=Yb(g,v,Y);L.push(ue)}}return new Ia(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tC(n,e,t){if("string"==typeof(t=(0,zt.m9)(t))){if(""===t)throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&-1!==t.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!$e.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wd(n,new $e(r))}if(t instanceof Fn)return wd(n,t._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ME(t)}.`)}function nC(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zE(n,e){if(e.isInequality()){const r=ky(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new be(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=Kv(n);null!==a&&lc(0,i,a)}const t=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function lc(n,e,t){if(!t.isEqual(e))throw new be(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _m{convertValue(e,t="none"){switch(Ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hi(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new hm(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const t=xl(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);ct(LI(r));const i=new _d(r.get(1),r.get(3)),a=new $e(r.popFirst(5));return i.isEqual(t)||fr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Jf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gS extends _m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class Xf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uc extends Wf{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ep extends uc{data(e={}){return super.data(e)}}class cc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ep(this._firestore,this._userDataWriter,r.key,r,new Xf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new ep(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Xf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const g=new ep(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Xf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==u.type&&(v=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),b=a.indexOf(u.doc.key)),{type:mS(u.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}function sC(n,e){return n instanceof uc&&e instanceof uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cc&&e instanceof cc&&n._firestore===e._firestore&&RE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class $l extends _m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function V_(n,e,t){n=Ht(n,Fn);const r=Ht(n.firestore,Wn),i=Jf(n.converter,e,t);return vm(r,[ko(Hl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qn.none())])}function wS(n,e,t,...r){n=Ht(n,Fn);const i=Ht(n.firestore,Wn),a=Hl(i);let u;return u="string"==typeof(e=(0,zt.m9)(e))||e instanceof jl?UE(a,"updateDoc",n._key,e,t,r):VE(a,"updateDoc",n._key,e),vm(i,[u.toMutation(n._key,qn.exists(!0))])}function cC(n,...e){var t,r,i;n=(0,zt.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||OE(e[u])||(a=e[u],u++);const g={includeMetadataChanges:a.includeMetadataChanges};if(OE(e[u])){const P=e[u];e[u]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[u+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[u+2]=null===(i=P.complete)||void 0===i?void 0:i.bind(P)}let v,b,S;if(n instanceof Fn)b=Ht(n.firestore,Wn),S=mf(n._key.path),v={next:P=>{e[u]&&e[u](dC(b,n,P))},error:e[u+1],complete:e[u+2]};else{const P=Ht(n,xi);b=Ht(P.firestore,Wn),S=P._query;const L=new $l(b);v={next:$=>{e[u]&&e[u](new cc(b,L,P,$))},error:e[u+1],complete:e[u+2]},mm(n._query)}return function(P,L,$,Y){const ue=new am(Y),ge=new uE(L,ue,$);return P.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return m_(yield $f(P),ge)})),()=>{ue.Dc(),P.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return oE(yield $f(P),ge)}))}}(yr(b),S,g,v)}function vm(n,e){return function(t,r){const i=new jn;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Db(n,e,t){return v_.apply(this,arguments)}(yield N_(t),r,i)})),i.promise}(yr(n),e)}function dC(n,e,t){const r=t.docs.get(e._key),i=new $l(n);return new uc(n,i,e._key,r,new Xf(t.hasPendingWrites,t.fromCache),e.converter)}const hx={maxAttempts:5};class s{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hl(e)}set(e,t,r){this._verifyNotCommitted();const i=o(e,this._firestore),a=Jf(i.converter,t,r),u=ko(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=o(e,this._firestore);let u;return u="string"==typeof(t=(0,zt.m9)(t))||t instanceof jl?UE(this._dataReader,"WriteBatch.update",a._key,t,r,i):VE(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=o(e,this._firestore);return this._mutations=this._mutations.concat(new Fl(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function o(n,e){if((n=(0,zt.m9)(n)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class l extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hl(e)}get(e){const t=o(e,this._firestore),r=new gS(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Ye();const a=i[0];if(a.isFoundDocument())return new Wf(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Wf(this._firestore,r,t._key,null,t.converter);throw Ye()})}set(e,t,r){const i=o(e,this._firestore),a=Jf(i.converter,t,r),u=ko(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=o(e,this._firestore);let u;return u="string"==typeof(t=(0,zt.m9)(t))||t instanceof jl?UE(this._dataReader,"Transaction.update",a._key,t,r,i):VE(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=o(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=o(e,this._firestore),r=new $l(this._firestore);return super.get(e).then(i=>new uc(this._firestore,r,t._key,i._document,new Xf(!1,!1),t.converter))}}function _e(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fe(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function je(){if(!function cf(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){At=_l.SDK_VERSION,(0,_l._registerComponent)(new da.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new Wn(new xT(t.getProvider("auth-internal")),new NT(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(g.options.projectId,v)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,_l.registerVersion)(H0,"3.13.0",n),(0,_l.registerVersion)(H0,"3.13.0","esm2017")}();class Je{constructor(e){this._delegate=e}static fromBase64String(e){return je(),new Je(Ra.fromBase64String(e))}static fromUint8Array(e){return Fe(),new Je(Ra.fromUint8Array(e))}toBase64(){return je(),this._delegate.toBase64()}toUint8Array(){return Fe(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vt(n){return function De(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Dt{enableIndexedDbPersistence(e,t){return function sS(n,e){xs(n=Ht(n,Wn));const t=yr(n);if(t._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new rc;return Gb(t,i,new A_(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ZM(n){xs(n=Ht(n,Wn));const e=yr(n);if(e._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ds("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new rc;return Gb(e,r,new om(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zb(n){if(n._initialized&&!n._terminated)throw new be(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!As.D())return Promise.resolve();const i=r+"main";yield As.delete(i)}),function(r){return t.apply(this,arguments)})(rb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hn{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function PE(n,e,t,r={}){var i;const a=(n=Ht(n,ic))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==u&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let g,v;if("string"==typeof r.mockUserToken)g=r.mockUserToken,v=Jr.MOCK_USER;else{g=(0,zt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new be(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jr(b)}n._authCredentials=new Av(new G0(g,v))}}(this._delegate,e,t,r)}enableNetwork(){return function YM(n){return function WD(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield DE(n),t=yield SE(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.vu.delete(0),Vd(i)}(t)}))}(yr(n=Ht(n,Wn)))}(this._delegate)}disableNetwork(){return function Oo(n){return function Lb(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield DE(n),t=yield SE(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=Ge(i);a.vu.add(0),yield Pf(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(yr(n=Ht(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qb(n){return function(e){const t=new jn;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function pE(n,e){return gE.apply(this,arguments)}(yield N_(e),t)})),t.promise}(yr(n=Ht(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function ES(n,e){return function KD(n,e){const t=new am(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield $f(n),i=t,Ge(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield $f(n),i=t,void Ge(r).ku.delete(i);var r,i}))}}(yr(n=Ht(n,Wn)),OE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,NE(this._delegate,e))}catch(t){throw hi(t,"collection()","Firestore.collection()")}}doc(e){try{return new cs(this,cm(this._delegate,e))}catch(t){throw hi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function tS(n,e){if(n=Ht(n,ic),Hb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xi(n,null,(t=e,new Nl(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function c(n,e,t){n=Ht(n,Wn);const r=Object.assign(Object.assign({},hx),t);return function(i){if(i.maxAttempts<1)throw new be(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const g=new jn;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const v=yield function Fb(n){return M_(n).then(e=>e.datastore)}(i);new Hf(i.asyncQueue,v,u,a,g).run()})),g.promise}(yr(n),i=>e(new l(n,i)),r)}(this._delegate,t=>e(new U_(this,t)))}batch(){return yr(this._delegate),new B_(new s(this._delegate,e=>vm(this._delegate,e)))}loadBundle(e){return function kE(n,e){const t=yr(n=Ht(n,Wn)),r=new O_;return function WM(n,e,t,r){const i=function(a,u){let g;return g="string"==typeof a?DI().encode(a):a,v=function(v,b){if(v instanceof Uint8Array)return $D(v,b);if(v instanceof ArrayBuffer)return $D(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new GD(v,u);var v}(t,xf(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function HD(n,e,t){const r=Ge(n);var i;(i=(0,me.Z)(function*(a,u,g){try{const v=yield u.getMetadata();if(yield function(L,$){const Y=Ge(L),ue=mr($.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",ge=>Y.qs.getBundleMetadata(ge,$.id)).then(ge=>!!ge&&ge.createTime.compareTo(ue)>=0)}(a.localStore,v))return yield u.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(Cb(v));const b=new Xg(v,a.localStore,u.serializer);let S=yield u.bc();for(;S;){const L=yield b.zu(S);L&&g._updateProgress(L),S=yield u.bc()}const P=yield b.complete();return yield Na(a,P.Ju,void 0),yield function(L,$){const Y=Ge(L);return Y.persistence.runTransaction("Save bundle","readwrite",ue=>Y.qs.saveBundleMetadata(ue,$))}(a.localStore,v),g._completeWith(P.progress),Promise.resolve(P.Hu)}catch(v){return Ds("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var L}),function(a,u,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield N_(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oS(n,e){return function jb(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield P_(n),e)}))}(yr(n=Ht(n,Wn)),e).then(t=>t?new xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class Nn extends _m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Je(new Ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return cs.forKey(t,this.firestore,null)}}class U_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nn(e)}get(e){const t=wm(e);return this._delegate.get(t).then(r=>new Hd(this._firestore,new uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wm(e);return r?(_e("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wm(e);return this._delegate.delete(t),this}}class B_{constructor(e){this._delegate=e}set(e,t,r){const i=wm(e);return r?(_e("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ep(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $d(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Gl(e,new Nn(e),t),i.set(t,a)),a}}Gl.INSTANCES=new WeakMap;class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nn(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new cs(t,new Fn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new cs(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,NE(this._delegate,e))}catch(t){throw hi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,zt.m9)(e))instanceof Fn&&nS(this._delegate,e)}set(e,t){t=_e("DocumentReference.set",t);try{return t?V_(this._delegate,e,t):V_(this._delegate,e)}catch(r){throw hi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wS(this._delegate,e):wS(this._delegate,e,t,...r)}catch(i){throw hi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uC(n){return vm(Ht(n.firestore,Wn),[new Fl(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=j_(e),r=H_(e,i=>new Hd(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cC(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function oC(n){n=Ht(n,Fn);const e=Ht(n.firestore,Wn),t=yr(e),r=new $l(e);return function Vb(n,e){const t=new jn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,u){try{const g=yield function(v,b){const S=Ge(v);return S.persistence.runTransaction("read document","readonly",P=>S.localDocuments.getDocument(P,b))}(i,a);g.isFoundDocument()?u.resolve(g):g.isNoDocument()?u.resolve(null):u.reject(new be(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=kf(g,`Failed to get document '${a} from cache`);u.reject(v)}}),function(i,a,u){return r.apply(this,arguments)})(yield P_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new uc(e,r,n._key,i,new Xf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function aC(n){n=Ht(n,Fn);const e=Ht(n.firestore,Wn);return AE(yr(e),n._key,{source:"server"}).then(t=>dC(e,n,t))}(this._delegate):function yS(n){n=Ht(n,Fn);const e=Ht(n.firestore,Wn);return AE(yr(e),n._key).then(t=>dC(e,n,t))}(this._delegate),t.then(r=>new Hd(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Gl.getInstance(this.firestore,e):null))}}function hi(n,e,t){return n.message=n.message.replace(e,t),n}function j_(n){for(const e of n)if("object"==typeof e&&!vt(e))return e;return{}}function H_(n,e){var t,r;let i;return i=vt(n[0])?n[0]:vt(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Hd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new cs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sC(this._delegate,e._delegate)}}class $d extends Hd{data(e){const t=this._delegate.data(e);return function MT(n,e){n||Ye()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nn(e)}where(e,t,r){try{return new Ps(this.firestore,ac(this._delegate,function Jb(n,e,t){const r=e,i=gm("where",n);return Yf._create(i,r,t)}(e,t,r)))}catch(i){throw hi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,ac(this._delegate,function eC(n,e="asc"){const t=e,r=gm("orderBy",n);return Xb._create(r,t)}(e,t)))}catch(r){throw hi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,ac(this._delegate,function hS(n){return eS("limit",n),F_._create("limit",n,"F")}(e)))}catch(t){throw hi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,ac(this._delegate,function fS(n){return eS("limitToLast",n),F_._create("limitToLast",n,"L")}(e)))}catch(t){throw hi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,ac(this._delegate,function tx(...n){return $E._create("startAt",n,!0)}(...e)))}catch(t){throw hi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,ac(this._delegate,function nx(...n){return $E._create("startAfter",n,!1)}(...e)))}catch(t){throw hi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,ac(this._delegate,function rx(...n){return GE._create("endBefore",n,!1)}(...e)))}catch(t){throw hi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,ac(this._delegate,function pS(...n){return GE._create("endAt",n,!0)}(...e)))}catch(t){throw hi(t,"endAt()","Query.endAt()")}}isEqual(e){return RE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function vS(n){n=Ht(n,xi);const e=Ht(n.firestore,Wn),t=yr(e),r=new $l(e);return function Ub(n,e){const t=new jn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,u){try{const g=yield i_(i,a,!0),v=new Tb(a,g.ir),b=v.sc(g.documents),S=v.applyChanges(b,!1);u.resolve(S.snapshot)}catch(g){const v=kf(g,`Failed to execute query '${a} against cache`);u.reject(v)}}),function(i,a,u){return r.apply(this,arguments)})(yield P_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new cc(e,r,n,i))}(this._delegate):"server"===e?.source?function lC(n){n=Ht(n,xi);const e=Ht(n.firestore,Wn),t=yr(e),r=new $l(e);return Bb(t,n._query,{source:"server"}).then(i=>new cc(e,r,n,i))}(this._delegate):function _S(n){n=Ht(n,xi);const e=Ht(n.firestore,Wn),t=yr(e),r=new $l(e);return mm(n._query),Bb(t,n._query).then(i=>new cc(e,r,n,i))}(this._delegate),t.then(r=>new CS(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=j_(e),r=H_(e,i=>new CS(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cC(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?Gl.getInstance(this.firestore,e):null))}}class AO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $d(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $d(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new AO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $d(this._firestore,r))})}isEqual(e){return sC(this._delegate,e._delegate)}}class $_ extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cs(this.firestore,e):null}doc(e){try{return new cs(this.firestore,void 0===e?cm(this._delegate):cm(this._delegate,e))}catch(t){throw hi(t,"doc()","CollectionReference.doc()")}}add(e){return function WE(n,e){const t=Ht(n.firestore,Wn),r=cm(n),i=Jf(n.converter,e);return vm(t,[ko(Hl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new cs(this.firestore,t))}isEqual(e){return nS(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?Gl.getInstance(this.firestore,e):null))}}function wm(n){return Ht(n,Fn)}class TS{constructor(...e){this._delegate=new jl(...e)}static documentId(){return new TS(lr.keyField().canonicalString())}isEqual(e){return(e=(0,zt.m9)(e))instanceof jl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Em{constructor(e){this._delegate=e}static serverTimestamp(){const e=function m(){return new Fo("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Em(e)}static delete(){const e=function h(){return new Gf("deleteField")}();return e._methodName="FieldValue.delete",new Em(e)}static arrayUnion(...e){const t=function w(...n){return new uS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Em(t)}static arrayRemove(...e){const t=function I(...n){return new JM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Em(t)}static increment(e){const t=function T(n){return new cS("increment",n)}(e);return t._methodName="FieldValue.increment",new Em(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MO={Firestore:hn,GeoPoint:hm,Timestamp:Pn,Blob:Je,Transaction:U_,WriteBatch:B_,DocumentReference:cs,DocumentSnapshot:Hd,Query:Ps,QueryDocumentSnapshot:$d,QuerySnapshot:CS,CollectionReference:$_,FieldPath:TS,FieldValue:Em,setLogLevel:function jd(n){!function $0(n){Tl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function PO(n){(function xO(n,e){n.INTERNAL.registerComponent(new da.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},MO)))})(n,(e,t)=>new hn(e,t,new Dt)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Cu.Z);var NO=V(8623),KE=V(6516),G_=V(2831);function fi(n,e){return"function"==typeof e?t=>t.pipe(fi((r,i)=>(0,xn.D)(n(r,i)).pipe((0,mt.U)((a,u)=>e(r,a,i,u))))):t=>t.lift(new RO(n))}class RO{constructor(e){this.project=e}call(e,t){return t.subscribe(new OO(e,this.project))}}class OO extends G_.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new G_.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,G_.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var kO=V(7122),fx=V(6957),px=V(9086),FO=V(1722);class LO extends Yr.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new VO(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;let u;if(this.closed)throw new px.N;if(this.isStopped||this.hasError?u=fx.w.EMPTY:(this.observers.push(e),u=new FO.W(this,e)),i&&e.add(e=new KE.ht(e,i)),t)for(let g=0;g<a&&!e.closed;g++)e.next(r[g]);else for(let g=0;g<a&&!e.closed;g++)e.next(r[g].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),u}_getNow(){return(this.scheduler||kO.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,a=i.length;let u=0;for(;u<a&&!(e-i[u].time<r);)u++;return a>t&&(u=Math.max(u,a-t)),u>0&&i.splice(0,u),i}}class VO{constructor(e,t){this.time=e,this.value=t}}function gx(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function UO({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,u,a=0,g=!1,v=!1;return function(S){let P;a++,!i||g?(g=!1,i=new LO(n,e,r),P=i.subscribe(this),u=S.subscribe({next(L){i.next(L)},error(L){g=!0,i.error(L)},complete(){v=!0,u=void 0,i.complete()}}),v&&(u=void 0)):P=i.subscribe(this),this.add(()=>{a--,P.unsubscribe(),P=void 0,u&&!v&&t&&0===a&&(u.unsubscribe(),u=void 0,i=void 0)})}}(r))}const hC=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),mx=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var tp=V(6439);function ZE(n){return e=>0===n?(0,tp.c)():e.lift(new BO(n))}class BO{constructor(e){if(this.total=e,this.total<0)throw new mx}call(e,t){return t.subscribe(new jO(e,this.total))}}class jO extends Bn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function fC(n=null){return e=>e.lift(new HO(n))}class HO{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new $O(e,this.defaultValue))}}class $O extends Bn.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function yx(n=qO){return e=>e.lift(new GO(n))}class GO{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new zO(e,this.errorFactory))}}class zO extends Bn.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function qO(){return new hC}var _x=V(1356);function Gd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((i,a)=>n(i,a,r)):_x.y,ZE(1),t?fC(e):yx(()=>new hC))}function vx(n,e){return e?fi(()=>n,e):fi(()=>n)}var DS=V(3132);V(2779);const AS=new Map,Ex={activated:!1,tokenObservers:[]},QO={initialized:!1,enabled:!1};function Mr(n){return AS.get(n)||Object.assign({},Ex)}function gC(){return QO}class r1{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new zt.BH,yield function s1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zi=new zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xS(n){if(!Mr(n).activated)throw zi.create("use-before-activation",{appName:n.name})}function _C(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const P=yield i.getHeartbeatsHeader();P&&(r["X-Firebase-Client"]=P)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,g;try{u=yield fetch(n,a)}catch(P){throw zi.create("fetch-network-error",{originalErrorMessage:P?.message})}if(200!==u.status)throw zi.create("fetch-status-error",{httpStatus:u.status});try{g=yield u.json()}catch(P){throw zi.create("fetch-parse-error",{originalErrorMessage:P?.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(v[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),NS.apply(this,arguments)}function bx(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const YE="firebase-app-check-store";let vC=null;function Tx(){return vC||(vC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(zi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(YE,{keyPath:"compositeKey"})}}catch(t){e(zi.create("storage-open",{originalErrorMessage:t?.message}))}}),vC)}function RS(){return RS=(0,me.Z)(function*(n,e){const r=(yield Tx()).transaction(YE,"readwrite"),a=r.objectStore(YE).put({compositeKey:n,value:e});return new Promise((u,g)=>{a.onsuccess=v=>{u()},r.onerror=v=>{var b;g(zi.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})}),RS.apply(this,arguments)}const QE=new wo.Yd("@firebase/app-check");function FS(n,e){return(0,zt.hl)()?function h1(n,e){return function Dx(n,e){return RS.apply(this,arguments)}(function Ax(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{QE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VS(){return gC().enabled}function US(){return BS.apply(this,arguments)}function BS(){return BS=(0,me.Z)(function*(){const n=gC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),BS.apply(this,arguments)}const _1={error:"UNKNOWN_ERROR"};function v1(n){return zt.US.encodeString(JSON.stringify(n),!1)}function wC(n){return jS.apply(this,arguments)}function jS(){return jS=(0,me.Z)(function*(n,e=!1){const t=n.app;xS(t);const r=Mr(t);let a,i=r.token;if(i&&!z_(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(z_(v)?i=v:yield FS(t,void 0))}if(!e&&i&&z_(i))return{token:i.token};let g,u=!1;if(VS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_C(bx(t,yield US()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const v=yield r.exchangeTokenPromise;return yield FS(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Mr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?QE.warn(v.message):QE.error(v),a=v}return i?a?g=z_(i)?{token:i.token,internalError:a}:Nx(a):(g={token:i.token},r.token=i,yield FS(t,i)):g=Nx(a),u&&Px(t,g),g}),jS.apply(this,arguments)}function HS(){return HS=(0,me.Z)(function*(n){const e=n.app;xS(e);const{provider:t}=Mr(e);if(VS()){const r=yield US(),{token:i}=yield _C(bx(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),HS.apply(this,arguments)}function GS(n,e){const t=Mr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xx(n){const{app:e}=n,t=Mr(e);let r=t.tokenRefresher;r||(r=function w1(n){const{app:e}=n;return new r1((0,me.Z)(function*(){let r;if(r=Mr(e).token?yield wC(n,!0):yield wC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Px(n,e){const t=Mr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function z_(n){return n.expireTimeMillis-Date.now()>0}function Nx(n){return{token:v1(_1),error:n}}class E1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mr(this.app);for(const t of e)GS(this.app,t.next);return Promise.resolve()}}const Bx="app-check-internal";!function k1(){(0,_l._registerComponent)(new da.wA("app-check",n=>function I1(n,e){return new E1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Bx).initialize()})),(0,_l._registerComponent)(new da.wA(Bx,n=>function b1(n){return{getToken:e=>wC(n,e),getLimitedUseToken:()=>function Mx(n){return HS.apply(this,arguments)}(n),addTokenListener:e=>function $S(n,e,t,r){const{app:i}=n,a=Mr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&z_(a.token)){const g=a.token;Promise.resolve().then(()=>{t({token:g.token}),xx(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xx(n))}(n,"INTERNAL",e),removeTokenListener:e=>GS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_l.registerVersion)("@firebase/app-check","0.8.0")}();class KS{constructor(){return(0,En.vb)("app-check")}}typeof window<"u"&&window;var Hx=V(1181);const $x=new f.OlP("angularfire2.auth.use-emulator"),Gx=new f.OlP("angularfire2.auth.settings"),zx=new f.OlP("angularfire2.auth.tenant-id"),qx=new f.OlP("angularfire2.auth.langugage-code"),Wx=new f.OlP("angularfire2.auth.use-device-language"),Kx=new f.OlP("angularfire.auth.persistence"),Zx=(n,e,t,r,i,a,u,g)=>(0,br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,a&&v.useDeviceLanguage(),u)for(const[b,S]of Object.entries(u))v.settings[b]=S;return g&&v.setPersistence(g),v},[t,r,i,a,u,g]);let IC=(()=>{class n{constructor(t,r,i,a,u,g,v,b,S,P,L,$){const Y=new Yr.xQ,ue=(0,et.of)(void 0).pipe((0,KE.QV)(u.outsideAngular),fi(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,736)))),(0,mt.U)(()=>(0,br.on)(t,a,r)),(0,mt.U)(ge=>Zx(ge,a,g,b,S,P,v,L)),gx({bufferSize:1,refCount:!1}));if(Ql(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,et.of)(null);else{ue.pipe(Gd()).subscribe();const Ue=ue.pipe(fi(it=>it.getRedirectResult().then(Ft=>Ft,()=>null)),En.iC,gx({bufferSize:1,refCount:!1})),Ze=ue.pipe(fi(it=>new li.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>it.onAuthStateChanged(Lt=>Ft.next(Lt),Lt=>Ft.error(Lt),()=>Ft.complete()))})))),Qe=ue.pipe(fi(it=>new li.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>it.onIdTokenChanged(Lt=>Ft.next(Lt),Lt=>Ft.error(Lt),()=>Ft.complete()))}))));this.authState=Ue.pipe(vx(Ze),(0,DS.R)(u.outsideAngular),(0,KE.QV)(u.insideAngular)),this.user=Ue.pipe(vx(Qe),(0,DS.R)(u.outsideAngular),(0,KE.QV)(u.insideAngular)),this.idToken=this.user.pipe(fi(it=>it?(0,xn.D)(it.getIdToken()):(0,et.of)(null))),this.idTokenResult=this.user.pipe(fi(it=>it?(0,xn.D)(it.getIdTokenResult()):(0,et.of)(null))),this.credential=(0,NO.T)(Ue,Y,this.authState.pipe(Ur(it=>!it))).pipe((0,mt.U)(it=>it?.user?it:null),(0,DS.R)(u.outsideAngular),(0,KE.QV)(u.insideAngular))}return(0,br.pX)(this,ue,a,{spy:{apply:(ge,Ue,Ze)=>{(ge.startsWith("signIn")||ge.startsWith("createUser"))&&Ze.then(Qe=>Y.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(br.Dh),f.LFG(br.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(En.HU),f.LFG($x,8),f.LFG(Gx,8),f.LFG(zx,8),f.LFG(qx,8),f.LFG(Wx,8),f.LFG(Kx,8),f.LFG(KS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),j1=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",En.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[IC]}),n})();function Yx(n,e){return function H1(n,e=kp.z){return new li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function YS(n,e){return Yx(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function bC(n,e){return YS(n,e).pipe(Hs(void 0),gl(),(0,mt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,g)=>{const v=i.find(S=>S.doc.ref.isEqual(u.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(u.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(u.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:u}})}),a}))}function Qx(n,e,t){return bC(n,t).pipe(Ci((r,i)=>function G1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function z1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function bu(n,e){return t=>t.lift(new ml(n,e))}(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function QS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Jx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Xx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hs(void 0),gl(),Ur(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ci((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jx(e);return Qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return YS(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new eP(this.ref.doc(e),this.afs)}}class eP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=rP(r,t);return new Xx(i,a,this.afs)}snapshotChanges(){return function $1(n,e){return Yx(n,e).pipe(Hs(void 0),gl(),(0,mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(En.iC)}}class q1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bC(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ur(t=>t.length>0),En.iC):bC(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ci((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jx(e);return Qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return YS(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),En.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(En.iC)}}const tP=new f.OlP("angularfire2.enableFirestorePersistence"),nP=new f.OlP("angularfire2.firestore.persistenceSettings"),W1=new f.OlP("angularfire2.firestore.settings"),K1=new f.OlP("angularfire2.firestore.use-emulator");function rP(n,e=(t=>t)){return{query:e(n),ref:n}}let iP=(()=>{class n{constructor(t,r,i,a,u,g,v,b,S,P,L,$,Y,ue,ge,Ue,Ze){this.schedulers=v;const Qe=(0,br.on)(t,g,r),it=S;P&&Zx(Qe,g,L,Y,ue,ge,$,Ue),[this.firestore,this.persistenceEnabled$]=(0,br.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Ft=g.runOutsideAngular(()=>Qe.firestore());if(a&&Ft.settings(a),it&&Ft.useEmulator(...it),i&&!Ql(u)){const Lt=()=>{try{return(0,xn.D)(Ft.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),(0,et.of)(!1)}};return[Ft,g.runOutsideAngular(Lt)]}return[Ft,(0,et.of)(!1)]},[a,it,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=rP(i,r),g=this.schedulers.ngZone.run(()=>a);return new Xx(g,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new q1(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new eP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(br.Dh),f.LFG(br.xv,8),f.LFG(tP,8),f.LFG(W1,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(En.HU),f.LFG(nP,8),f.LFG(K1,8),f.LFG(IC,8),f.LFG($x,8),f.LFG(Gx,8),f.LFG(zx,8),f.LFG(qx,8),f.LFG(Wx,8),f.LFG(Kx,8),f.LFG(KS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z1=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",En.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tP,useValue:!0},{provide:nP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iP]}),n})();class zl extends Yr.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new px.N;return this._value}next(e){super.next(this._value=e)}}var JS=V(4327);class Y1 extends Bn.L{notifyNext(e,t,r,i,a){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Q1 extends Bn.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var J1=V(3956);function X1(n,e,t,r,i=new Q1(n,t,r)){if(!i.closed)return e instanceof li.y?e.subscribe(i):(0,J1.s)(e)(i)}var ek=V(8005);const sP={};function oP(...n){let e,t;return(0,Eu.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,JS.k)(n[0])&&(n=n[0]),(0,ek.n)(n,t).lift(new tk(e))}class tk{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new nk(e,this.resultSelector))}}class nk extends Y1{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(sP),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(X1(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,u=this.toRespond?i[r]===sP?--this.toRespond:this.toRespond:0;i[r]=t,0===u&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function aP(n){return new li.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,xn.D)(t):(0,tp.c)()).subscribe(e)})}var rk=V(6800),JE=V(6587),lP=V(4483),io=V(522);function Im(n,e){return(0,io.zg)(n,e,1)}var ds=V(2692);function bm(n){return function(t){const r=new ik(n),i=t.lift(r);return r.caught=i}}class ik{constructor(e){this.selector=e}call(e,t){return t.subscribe(new sk(e,this.selector,this.caught))}}class sk extends G_.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const r=new G_.IY(this);this.add(r);const i=(0,G_.ft)(t,r);i!==r&&this.add(i)}}}function XS(n){return function(t){return 0===n?(0,tp.c)():t.lift(new ok(n))}}class ok{constructor(e){if(this.total=e,this.total<0)throw new mx}call(e,t){return t.subscribe(new ak(e,this.total))}}class ak extends Bn.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let a=0;a<r;a++){const u=t++%r;e.next(i[u])}}e.complete()}}function uP(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((i,a)=>n(i,a,r)):_x.y,XS(1),t?fC(e):yx(()=>new hC))}class uk{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new ck(e,this.predicate,this.inclusive))}}class ck extends Bn.L{constructor(e,t,r){super(e),this.predicate=t,this.inclusive=r,this.index=0}_next(e){const t=this.destination;let r;try{r=this.predicate(e,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(e,r)}nextOrComplete(e,t){const r=this.destination;Boolean(t)?r.next(e):(this.inclusive&&r.next(e),r.complete())}}class hk{constructor(e){this.value=e}call(e,t){return t.subscribe(new fk(e,this.value))}}class fk extends Bn.L{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function eA(n){return e=>e.lift(new pk(n))}class pk{constructor(e){this.callback=e}call(e,t){return t.subscribe(new gk(e,this.callback))}}class gk extends Bn.L{constructor(e,t){super(e),this.add(new fx.w(t))}}var cP=V(8331);const Wt="primary",XE=Symbol("RouteTitle");class mk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function q_(n){return new mk(n)}function yk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],g=n[a];if(u.startsWith(":"))i[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function dc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!dP(n[i],e[i]))return!1;return!0}function dP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function hP(n){return Array.prototype.concat.apply([],n)}function fP(n){return n.length>0?n[n.length-1]:null}function qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function np(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,xn.D)(Promise.resolve(n)):(0,et.of)(n)}const wk={exact:function mP(n,e,t){if(!Tm(n.segments,e.segments)||!CC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mP(n.children[r],e.children[r],t))return!1;return!0},subset:yP},pP={exact:function Ek(n,e){return dc(n,e)},subset:function Ik(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dP(n[t],e[t]))},ignored:()=>!0};function gP(n,e,t){return wk[t.paths](n.root,e.root,t.matrixParams)&&pP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yP(n,e,t){return _P(n,e,e.segments,t)}function _P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Tm(i,t)||e.hasChildren()||!CC(i,t,r))}if(n.segments.length===t.length){if(!Tm(n.segments,t)||!CC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!yP(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Tm(n.segments,i)&&CC(n.segments,i,r)&&n.children[Wt])&&_P(n.children[Wt],e,a,r)}}function CC(n,e,t){return e.every((r,i)=>pP[t](n[i].parameters,r.parameters))}class Cm{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=q_(this.queryParams)),this._queryParamMap}toString(){return Tk.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return TC(this)}}class e0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=q_(this.parameters)),this._parameterMap}toString(){return IP(this)}}function Tm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new nA},providedIn:"root"}),n})();class nA{parse(e){const t=new Ok(e);return new Cm(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${t0(e.root,!0)}`,r=function Ak(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${DC(t)}=${DC(i)}`).join("&"):`${DC(t)}=${DC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Dk(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Tk=new nA;function TC(n){return n.segments.map(e=>IP(e)).join("/")}function t0(n,e){if(!n.hasChildren())return TC(n);if(e){const t=n.children[Wt]?t0(n.children[Wt],!1):"",r=[];return qi(n.children,(i,a)=>{a!==Wt&&r.push(`${a}:${t0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ck(n,e){let t=[];return qi(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),qi(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[t0(n.children[Wt],!1)]:[`${i}:${t0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${TC(n)}/${t[0]}`:`${TC(n)}/(${t.join("//")})`}}function wP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function DC(n){return wP(n).replace(/%3B/gi,";")}function rA(n){return wP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function SC(n){return decodeURIComponent(n)}function EP(n){return SC(n.replace(/\+/g,"%20"))}function IP(n){return`${rA(n.path)}${function Sk(n){return Object.keys(n).map(e=>`;${rA(e)}=${rA(n[e])}`).join("")}(n.parameters)}`}const Mk=/^[^\/()?;=#]+/;function AC(n){const e=n.match(Mk);return e?e[0]:""}const xk=/^[^=?&#]+/,Nk=/^[^&#]+/;class Ok{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Qt(e,t)),r}parseSegment(){const e=AC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new e0(SC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=AC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=AC(this.remaining);i&&(r=i,this.capture(r))}e[SC(t)]=SC(r)}parseQueryParam(e){const t=function Pk(n){const e=n.match(xk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Rk(n){const e=n.match(Nk);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=EP(t),a=EP(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=AC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Wt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Wt]:new Qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function iA(n){return n.segments.length>0?new Qt([],{[Wt]:n}):n}function MC(n){const e={};for(const r of Object.keys(n.children)){const a=MC(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function kk(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function Dm(n){return n instanceof Cm}function Vk(n,e,t,r,i){if(0===t.length)return W_(e.root,e.root,e.root,r,i);const a=function TP(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new CP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const g={};return qi(a.outlets,(v,b)=>{g[b]="string"==typeof v?v.split("/"):v}),[...i,{outlets:g}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,a]},[]);return new CP(t,e,r)}(t);return a.toRoot()?W_(e.root,e.root,new Qt([],{}),r,i):function u(v){const b=function Bk(n,e,t,r){if(n.isAbsolute)return new K_(e.root,!0,0);if(-1===r)return new K_(t,t===e.root,0);return function DP(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new K_(r,!1,i-a)}(t,r+(n0(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,v),S=b.processChildren?s0(b.segmentGroup,b.index,a.commands):oA(b.segmentGroup,b.index,a.commands);return W_(e.root,b.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function n0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function r0(n){return"object"==typeof n&&null!=n&&n.outlets}function W_(n,e,t,r,i){let u,a={};r&&qi(r,(v,b)=>{a[b]=Array.isArray(v)?v.map(S=>`${S}`):`${v}`}),u=n===e?t:bP(n,e,t);const g=iA(MC(u));return new Cm(g,a,i)}function bP(n,e,t){const r={};return qi(n.children,(i,a)=>{r[a]=i===e?t:bP(i,e,t)}),new Qt(n.segments,r)}class CP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&n0(r[0]))throw new f.vHH(4003,!1);const i=r.find(r0);if(i&&i!==fP(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class K_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function oA(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return s0(n,e,t);const r=function Hk(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],g=t[r];if(r0(g))break;const v=`${g}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!AP(v,b,u))return a;r+=2}else{if(!AP(v,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Wt]=new Qt(n.segments.slice(r.pathIndex),n.children),s0(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?aA(n,e,t):r.match?s0(n,0,i):aA(n,e,t)}function s0(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function jk(n){return r0(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return qi(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=oA(n.children[u],e,a))}),qi(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Qt(n.segments,i)}}function aA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(r0(a)){const v=$k(a.outlets);return new Qt(r,v)}if(0===i&&n0(t[0])){r.push(new e0(n.segments[e].path,SP(t[0]))),i++;continue}const u=r0(a)?a.outlets[Wt]:`${a}`,g=i<t.length-1?t[i+1]:null;u&&g&&n0(g)?(r.push(new e0(u,SP(g))),i+=2):(r.push(new e0(u,{})),i++)}return new Qt(r,{})}function $k(n){const e={};return qi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aA(new Qt([],{}),0,t))}),e}function SP(n){const e={};return qi(n,(t,r)=>e[r]=`${t}`),e}function AP(n,e,t){return n==t.path&&dc(e,t.parameters)}class zd{constructor(e,t){this.id=e,this.url=t}}class lA extends zd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sm extends zd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xC extends zd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class MP extends zd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gk extends zd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zk extends zd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qk extends zd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wk extends zd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kk extends zd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zk{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yk{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qk{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jk{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xk{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class PP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cA(e,this._root).map(t=>t.value)}}function uA(n,e){if(n===e.value)return e;for(const t of e.children){const r=uA(n,t);if(r)return r}return null}function cA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cA(n,t);if(r.length)return r.unshift(e),r}return[]}class qd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Z_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NP extends PP{constructor(e,t){super(e),this.snapshot=t,dA(this,e)}toString(){return this.snapshot.toString()}}function RP(n,e){const t=function nF(n,e){const u=new PC([],{},{},"",{},Wt,e,null,n.root,-1,{});return new kP("",new qd(u,[]))}(n,e),r=new zl([new e0("",{})]),i=new zl({}),a=new zl({}),u=new zl({}),g=new zl(""),v=new rp(r,i,u,g,a,Wt,e,t.root);return v.snapshot=t.root,new NP(new qd(v,[]),t)}class rp{constructor(e,t,r,i,a,u,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.title=this.data?.pipe((0,mt.U)(b=>b[XE]))??(0,et.of)(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>q_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>q_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OP(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function rF(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class PC{constructor(e,t,r,i,a,u,g,v,b,S,P,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.title=this.data?.[XE],this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=L??S,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=q_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=q_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kP extends PP{constructor(e,t){super(t),this.url=e,dA(this,t)}toString(){return FP(this._root)}}function dA(n,e){e.value._routerState=n,e.children.forEach(t=>dA(n,t))}function FP(n){const e=n.children.length>0?` { ${n.children.map(FP).join(", ")} } `:"";return`${n.value}${e}`}function hA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),dc(e.params,t.params)||n.params.next(t.params),function _k(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),dc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fA(n,e){const t=dc(n.params,e.params)&&function bk(n,e){return Tm(n,e)&&n.every((t,r)=>dc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fA(n.parent,e.parent))}function o0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function sF(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return o0(n,r,i);return o0(n,r)})}(n,e,t);return new qd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(g=>o0(n,g)),u}}const r=function oF(n){return new rp(new zl(n.url),new zl(n.params),new zl(n.queryParams),new zl(n.fragment),new zl(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>o0(n,a));return new qd(r,i)}}const pA="ngNavigationCancelingError";function LP(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Dm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VP(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function VP(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function UP(n){return BP(n)&&Dm(n.url)}function BP(n){return n&&n[pA]}class aF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new a0,this.attachRef=null}}let a0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new aF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NC=!1;let gA=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,NC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,NC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,NC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,NC);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new lF(t,g,i.injector);if(r&&function uF(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(u);this.activated=i.createComponent(b,i.length,v)}else this.activated=i.createComponent(u,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(a0),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class lF{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===rp?this.route:e===a0?this.childContexts:this.parent.get(e,t)}}let mA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[gA],encapsulation:2}),n})();function jP(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _A(n){const e=n.children&&n.children.map(_A),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=mA),t}function Oa(n){return n.outlet||Wt}function HP(n,e){const t=n.filter(r=>Oa(r)===e);return t.push(...n.filter(r=>Oa(r)!==e)),t}function l0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class pF{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Z_(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),qi(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Z_(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Z_(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Z_(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new eF(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Jk(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(hA(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),hA(g.route.value),this.activateChildRoutes(e,null,u.children)}else{const g=l0(i.snapshot),v=g?.get(f._Vd)??null;u.attachRef=null,u.route=i,u.resolver=v,u.injector=g,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class $P{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class RC{constructor(e,t){this.component=e,this.route=t}}function gF(n,e,t){const r=n._root;return u0(r,e?e._root:null,t,[r.value])}function Y_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function u0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Z_(e);return n.children.forEach(u=>{(function yF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const v=function _F(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tm(n.url,e.url)||!dc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fA(n,e)||!dc(n.queryParams,e.queryParams);default:return!fA(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new $P(r)):(a.data=u.data,a._resolvedData=u._resolvedData),u0(n,e,a.component?g?g.children:null:t,r,i),v&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new RC(g.outlet.component,u))}else u&&c0(e,g,i),i.canActivateChecks.push(new $P(r)),u0(n,null,a.component?g?g.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),qi(a,(u,g)=>c0(u,t.getContext(g),i)),i}function c0(n,e,t){const r=Z_(n),i=n.value;qi(r,(a,u)=>{c0(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new RC(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function d0(n){return"function"==typeof n}function vA(n){return n instanceof hC||"EmptyError"===n?.name}const OC=Symbol("INITIAL_VALUE");function Q_(){return fi(n=>oP(n.map(e=>e.pipe(ZE(1),Hs(OC)))).pipe((0,mt.U)(e=>{for(const t of e)if(!0!==t){if(t===OC)return OC;if(!1===t||t instanceof Cm)return t}return!0}),Ur(e=>e!==OC),ZE(1)))}function GP(n){return(0,rk.z)((0,ds.b)(e=>{if(Dm(e))throw LP(0,e)}),(0,mt.U)(e=>!0===e))}const wA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zP(n,e,t,r,i){const a=EA(n,e,t);return a.matched?function kF(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,et.of)(!0);const a=i.map(u=>{const g=Y_(u,n);return np(function CF(n){return n&&d0(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,et.of)(a).pipe(Q_(),GP())}(r=jP(e,r),e,t).pipe((0,mt.U)(u=>!0===u?a:{...wA})):(0,et.of)(a)}function EA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...wA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||yk)(t,n,e);if(!i)return{...wA};const a={};qi(i.posParams,(g,v)=>{a[v]=g.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function kC(n,e,t,r,i="corrected"){if(t.length>0&&function VF(n,e,t){return t.some(r=>FC(n,e,r)&&Oa(r)!==Wt)}(n,t,r)){const u=new Qt(e,function LF(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Oa(a)!==Wt){const u=new Qt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Oa(a)]=u}return i}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function UF(n,e,t){return t.some(r=>FC(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function FF(n,e,t,r,i,a){const u={};for(const g of r)if(FC(n,t,g)&&!i[Oa(g)]){const v=new Qt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[Oa(g)]=v}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function FC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qP(n,e,t,r){return!!(Oa(n)===r||r!==Wt&&FC(e,t,n))&&("**"===n.path||EA(e,n,t).matched)}function WP(n,e,t){return 0===e.length&&!n.children[t]}const LC=!1;class VC{constructor(e){this.segmentGroup=e||null}}class KP{constructor(e){this.urlTree=e}}function h0(n){return(0,JE._)(new VC(n))}function ZP(n){return(0,JE._)(new KP(n))}class $F{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=kC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,mt.U)(a=>this.createUrlTree(MC(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bm(a=>{if(a instanceof KP)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof VC?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,mt.U)(i=>this.createUrlTree(MC(i),e.queryParams,e.fragment))).pipe(bm(i=>{throw i instanceof VC?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,LC)}createUrlTree(e,t,r){const i=iA(e);return new Cm(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,xn.D)(i).pipe(Im(a=>{const u=r.children[a],g=HP(t,a);return this.expandSegmentGroup(e,g,u,a).pipe((0,mt.U)(v=>({segment:v,outlet:a})))}),Ci((a,u)=>(a[u.outlet]=u.segment,a),{}),uP())}expandSegment(e,t,r,i,a,u){return(0,xn.D)(r).pipe(Im(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,a,u).pipe(bm(b=>{if(b instanceof VC)return(0,et.of)(null);throw b}))),Gd(g=>!!g),bm((g,v)=>{if(vA(g))return WP(t,i,a)?(0,et.of)(new Qt([],{})):h0(t);throw g}))}expandSegmentAgainstRoute(e,t,r,i,a,u,g){return qP(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):h0(t):h0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ZP(a):this.lineralizeSegments(r,a).pipe((0,io.zg)(u=>{const g=new Qt(u,{});return this.expandSegment(e,g,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:g,consumedSegments:v,remainingSegments:b,positionalParamSegments:S}=EA(t,i,a);if(!g)return h0(t);const P=this.applyRedirectCommands(v,i.redirectTo,S);return i.redirectTo.startsWith("/")?ZP(P):this.lineralizeSegments(i,P).pipe((0,io.zg)(L=>this.expandSegment(e,t,r,L.concat(b),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=jP(r,e),r.loadChildren?(r._loadedRoutes?(0,et.of)({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,mt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Qt(i,{})))):(0,et.of)(new Qt(i,{}))):zP(t,r,i,e).pipe(fi(({matched:u,consumedSegments:g,remainingSegments:v})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,io.zg)(S=>{const P=S.injector??e,L=S.routes,{segmentGroup:$,slicedSegments:Y}=kC(t,g,v,L),ue=new Qt($.segments,$.children);if(0===Y.length&&ue.hasChildren())return this.expandChildren(P,L,ue).pipe((0,mt.U)(Qe=>new Qt(g,Qe)));if(0===L.length&&0===Y.length)return(0,et.of)(new Qt(g,{}));const ge=Oa(r)===a;return this.expandSegment(P,ue,L,Y,ge?Wt:a,!0).pipe((0,mt.U)(Ze=>new Qt(g.concat(Ze.segments),Ze.children)))})):h0(t)))}getChildConfig(e,t,r){return t.children?(0,et.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,et.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function OF(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,et.of)(!0);const a=i.map(u=>{const g=Y_(u,n);return np(function wF(n){return n&&d0(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,et.of)(a).pipe(Q_(),GP())}(e,t,r).pipe((0,io.zg)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ds.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function jF(n){return(0,JE._)(VP(LC,3))}())):(0,et.of)({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,et.of)(r);if(i.numberOfChildren>1||!i.children[Wt])return(0,JE._)(new f.vHH(4e3,LC));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Cm(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return qi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[a]=t[g]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return qi(t.children,(g,v)=>{u[v]=this.createSegmentGroup(e,g,r,i)}),new Qt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,LC);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class zF{}class KF{constructor(e,t,r,i,a,u,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=kC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,mt.U)(t=>{if(null===t)return null;const r=new PC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qd(r,t),a=new kP(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=OP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,xn.D)(Object.keys(r.children)).pipe(Im(i=>{const a=r.children[i],u=HP(t,i);return this.processSegmentGroup(e,u,a,i)}),Ci((i,a)=>i&&a?(i.push(...a),i):null),function lk(n,e=!1){return t=>t.lift(new uk(n,e))}(i=>null!==i),fC(null),uP(),(0,mt.U)(i=>{if(null===i)return null;const a=YP(i);return function ZF(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,xn.D)(t).pipe(Im(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),Gd(u=>!!u),bm(u=>{if(vA(u))return WP(r,i,a)?(0,et.of)([]):(0,et.of)(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!qP(t,r,i,a))return(0,et.of)(null);let u;if("**"===t.path){const g=i.length>0?fP(i).parameters:{},v=JP(r)+i.length,b=new PC(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eN(t),Oa(t),t.component??t._loadedComponent??null,t,QP(r),v,tN(t),v);u=(0,et.of)({snapshot:b,consumedSegments:[],remainingSegments:[]})}else u=zP(r,t,i,e).pipe((0,mt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:S})=>{if(!g)return null;const P=JP(r)+v.length;return{snapshot:new PC(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eN(t),Oa(t),t.component??t._loadedComponent??null,t,QP(r),P,tN(t),P),consumedSegments:v,remainingSegments:b}}));return u.pipe(fi(g=>{if(null===g)return(0,et.of)(null);const{snapshot:v,consumedSegments:b,remainingSegments:S}=g;e=t._injector??e;const P=t._loadedInjector??e,L=function YF(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:$,slicedSegments:Y}=kC(r,b,S,L.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution);if(0===Y.length&&$.hasChildren())return this.processChildren(P,L,$).pipe((0,mt.U)(ge=>null===ge?null:[new qd(v,ge)]));if(0===L.length&&0===Y.length)return(0,et.of)([new qd(v,[])]);const ue=Oa(t)===a;return this.processSegment(P,L,$,Y,ue?Wt:a).pipe((0,mt.U)(ge=>null===ge?null:[new qd(v,ge)]))}))}}function QF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function YP(n){const e=[],t=new Set;for(const r of n){if(!QF(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=YP(r.children);e.push(new qd(r.value,i))}return e.filter(r=>!t.has(r))}function QP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function JP(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eN(n){return n.data||{}}function tN(n){return n.resolve||{}}function nN(n){return"string"==typeof n.title||null===n.title}function IA(n){return fi(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,mt.U)(()=>e)):(0,et.of)(e)})}let rN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[XE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(iN)},providedIn:"root"}),n})(),iN=(()=>{class n extends rN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sL{}class aL extends class oL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const BC=new f.OlP("",{providedIn:"root",factory:()=>({})}),bA=new f.OlP("ROUTES");let CA=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,et.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=np(t.loadComponent()).pipe((0,ds.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),eA(()=>{this.componentLoaders.delete(t)})),i=new lP.c(r,()=>new Yr.xQ).pipe((0,cP.x)());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,et.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,mt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,S=!1;Array.isArray(g)?b=g:(v=g.create(t).injector,b=hP(v.get(bA,[],f.XFs.Self|f.XFs.Optional)));return{routes:b.map(_A),injector:v}}),eA(()=>{this.childrenLoaders.delete(r)})),u=new lP.c(a,()=>new Yr.xQ).pipe((0,cP.x)());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return np(t()).pipe((0,io.zg)(r=>r instanceof f.YKP||Array.isArray(r)?(0,et.of)(r):(0,xn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uL{}class cL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function dL(n){throw n}function hL(n,e,t){return e.parse("/")}const fL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function oN(){const n=(0,f.f3M)(vP),e=(0,f.f3M)(a0),t=(0,f.f3M)(ze),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(bA,{optional:!0})??[],u=(0,f.f3M)(BC,{optional:!0})??{},g=(0,f.f3M)(iN),v=(0,f.f3M)(rN,{optional:!0}),b=(0,f.f3M)(uL,{optional:!0}),S=(0,f.f3M)(sL,{optional:!0}),P=new ri(null,n,e,t,r,i,hP(a));return b&&(P.urlHandlingStrategy=b),S&&(P.routeReuseStrategy=S),P.titleStrategy=v??g,function gL(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,P),P}let ri=(()=>{class n{constructor(t,r,i,a,u,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yr.xQ,this.errorHandler=dL,this.malformedUriErrorHandler=hL,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,et.of)(void 0),this.urlHandlingStrategy=new cL,this.routeReuseStrategy=new aL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(CA),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Yk(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Zk(L)),this.ngModule=u.get(f.h0i),this.console=u.get(f.c2e);const P=u.get(f.R0b);this.isNgZoneEnabled=P instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function vk(){return new Cm(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RP(this.currentUrlTree,this.rootComponentType),this.transitions=new zl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ur(i=>0!==i.id),(0,mt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),fi(i=>{let a=!1,u=!1;return(0,et.of)(i).pipe((0,ds.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),fi(g=>{const v=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return aN(g.source)&&(this.browserUrlTree=g.extractedUrl),(0,et.of)(g).pipe(fi(P=>{const L=this.transitions.getValue();return r.next(new lA(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),L!==this.transitions.getValue()?tp.E:Promise.resolve(P)}),function GF(n,e,t,r){return fi(i=>function HF(n,e,t,r,i){return new $F(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,mt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ds.b)(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},i.urlAfterRedirects=P.urlAfterRedirects}),function XF(n,e,t,r,i,a){return(0,io.zg)(u=>function WF(n,e,t,r,i,a,u="emptyOnly",g="legacy"){return new KF(n,e,t,r,i,u,g,a).recognize().pipe(fi(v=>null===v?function qF(n){return new li.y(e=>e.error(n))}(new zF):(0,et.of)(v)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,mt.U)(g=>({...u,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ds.b)(P=>{if(i.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl($,P)}this.browserUrlTree=P.urlAfterRedirects}const L=new Gk(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:$,source:Y,restoredState:ue,extras:ge}=g,Ue=new lA(L,this.serializeUrl($),Y,ue);r.next(Ue);const Ze=RP($,this.rootComponentType).snapshot;return i={...g,targetSnapshot:Ze,urlAfterRedirects:$,extras:{...ge,skipLocationChange:!1,replaceUrl:!1}},(0,et.of)(i)}return this.rawUrlTree=g.rawUrl,g.resolve(null),tp.E}),(0,ds.b)(g=>{const v=new zk(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,mt.U)(g=>i={...g,guards:gF(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function DF(n,e){return(0,io.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?(0,et.of)({...t,guardsResult:!0}):function SF(n,e,t,r){return(0,xn.D)(n).pipe((0,io.zg)(i=>function RF(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,et.of)(!0);const u=a.map(g=>{const v=l0(e)??i,b=Y_(g,v);return np(function bF(n){return n&&d0(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(Gd())});return(0,et.of)(u).pipe(Q_())}(i.component,i.route,t,e,r)),Gd(i=>!0!==i,!0))}(u,r,i,n).pipe((0,io.zg)(g=>g&&function vF(n){return"boolean"==typeof n}(g)?function AF(n,e,t,r){return(0,xn.D)(e).pipe(Im(i=>Oh(function xF(n,e){return null!==n&&e&&e(new Qk(n)),(0,et.of)(!0)}(i.route.parent,r),function MF(n,e){return null!==n&&e&&e(new Xk(n)),(0,et.of)(!0)}(i.route,r),function NF(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function mF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>aP(()=>{const g=u.guards.map(v=>{const b=l0(u.node)??t,S=Y_(v,b);return np(function IF(n){return n&&d0(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Gd())});return(0,et.of)(g).pipe(Q_())}));return(0,et.of)(a).pipe(Q_())}(n,i.path,t),function PF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,et.of)(!0);const i=r.map(a=>aP(()=>{const u=l0(e)??t,g=Y_(a,u);return np(function EF(n){return n&&d0(n.canActivate)}(g)?g.canActivate(e,n):u.runInContext(()=>g(e,n))).pipe(Gd())}));return(0,et.of)(i).pipe(Q_())}(n,i.route,t))),Gd(i=>!0!==i,!0))}(r,a,n,e):(0,et.of)(g)),(0,mt.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,ds.b)(g=>{if(i.guardsResult=g.guardsResult,Dm(g.guardsResult))throw LP(0,g.guardsResult);const v=new qk(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),Ur(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),IA(g=>{if(g.guards.canActivateChecks.length)return(0,et.of)(g).pipe((0,ds.b)(v=>{const b=new Wk(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),fi(v=>{let b=!1;return(0,et.of)(v).pipe(function eL(n,e){return(0,io.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,et.of)(t);let a=0;return(0,xn.D)(i).pipe(Im(u=>function tL(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!nN(i)&&(a[XE]=i.title),function nL(n,e,t,r){const i=function rL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,et.of)({});const a={};return(0,xn.D)(i).pipe((0,io.zg)(u=>function iL(n,e,t,r){const i=l0(e)??r,a=Y_(n,i);return np(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(Gd(),(0,ds.b)(g=>{a[u]=g}))),XS(1),function dk(n){return e=>e.lift(new hk(n))}(a),bm(u=>vA(u)?tp.E:(0,JE._)(u)))}(a,n,e,r).pipe((0,mt.U)(u=>(n._resolvedData=u,n.data=OP(n,t).resolve,i&&nN(i)&&(n.data[XE]=i.title),null)))}(u.route,r,n,e)),(0,ds.b)(()=>a++),XS(1),(0,io.zg)(u=>a===i.length?(0,et.of)(t):tp.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ds.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,ds.b)(v=>{const b=new Kk(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),IA(g=>{const v=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,ds.b)(P=>{b.component=P}),(0,mt.U)(()=>{})));for(const P of b.children)S.push(...v(P));return S};return oP(v(g.targetSnapshot.root)).pipe(fC(),ZE(1))}),IA(()=>this.afterPreactivation()),(0,mt.U)(g=>{const v=function iF(n,e,t){const r=o0(n,e._root,t?t._root:void 0);return new NP(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return i={...g,targetRouterState:v}}),(0,ds.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new pF(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,ds.b)({next(){a=!0},complete(){a=!0}}),eA(()=>{a||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),bm(g=>{if(u=!0,BP(g)){UP(g)||(this.navigated=!0,this.restoreHistory(i,!0));const v=new xC(i.id,this.serializeUrl(i.extractedUrl),g.message,g.cancellationCode);if(r.next(v),UP(g)){const b=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aN(i.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new MP(i.id,this.serializeUrl(i.extractedUrl),g,i.targetSnapshot??void 0);r.next(v);try{i.resolve(this.errorHandler(g))}catch(b){i.reject(b)}}return tp.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const g={...a};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(i.state=g)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(_A),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:g,preserveFragment:v}=r,b=i||this.routerState.root,S=v?this.currentUrlTree.fragment:u;let P=null;switch(g){case"merge":P={...this.currentUrlTree.queryParams,...a};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=a||null}return null!==P&&(P=this.removeEmptyProps(P)),Vk(b,this.currentUrlTree,t,P,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Dm(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function mL(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...fL}:!1===r?{...pL}:r,Dm(t))return gP(this.currentUrlTree,t,i);const a=this.parseUrl(t);return gP(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Sm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let g,v,b;u?(g=u.resolve,v=u.reject,b=u.promise):b=new Promise((L,$)=>{g=L,v=$});const S=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),P=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:S,targetPageId:P,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:g,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new xC(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return oN()},providedIn:"root"}),n})();function aN(n){return"imperative"!==n}class lN{}let vL=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(t=>t instanceof Sm),Im(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,g=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(g,a.children??a._loadedRoutes))}return(0,xn.D)(i).pipe((0,pl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,et.of)(null);const a=i.pipe((0,io.zg)(u=>null===u?(0,et.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,xn.D)([a,u]).pipe((0,pl.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ri),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(lN),f.LFG(CA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SA=new f.OlP("");let uN=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function J_(n,e){return{\u0275kind:n,\u0275providers:e}}function AA(n){return[{provide:bA,multi:!0,useValue:n}]}function dN(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(ri),i=n.get(hN);1===n.get(MA)&&r.initialNavigation(),n.get(fN,null,f.XFs.Optional)?.setUpPreloading(),n.get(SA,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const hN=new f.OlP("",{factory:()=>new Yr.xQ}),MA=new f.OlP("",{providedIn:"root",factory:()=>1});const fN=new f.OlP("");function bL(n){return J_(0,[{provide:fN,useExisting:vL},{provide:lN,useExisting:n}])}const pN=new f.OlP("ROUTER_FORROOT_GUARD"),CL=[ze,{provide:vP,useClass:nA},{provide:ri,useFactory:oN},a0,{provide:rp,useFactory:function cN(n){return n.routerState.root},deps:[ri]},CA];function TL(){return new f.PXZ("Router",ri)}let gN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[CL,[],AA(t),{provide:pN,useFactory:ML,deps:[[ri,new f.FiY,new f.tp0]]},{provide:BC,useValue:r||{}},r?.useHash?{provide:fe,useClass:ke}:{provide:fe,useClass:Ke},{provide:SA,useFactory:()=>{const n=(0,f.f3M)(ri),e=(0,f.f3M)(Jl),t=(0,f.f3M)(BC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new uN(n,e,t)}},r?.preloadingStrategy?bL(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:TL},r?.initialNavigation?xL(r):[],[{provide:mN,useFactory:dN},{provide:f.tb,multi:!0,useExisting:mN}]]}}static forChild(t){return{ngModule:n,providers:[AA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pN,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[mA]}),n})();function ML(n){return"guarded"}function xL(n){return["disabled"===n.initialNavigation?J_(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(ri);return()=>{e.setUpLocationChangeListener()}}},{provide:MA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?J_(2,[{provide:MA,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(F,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const u=e.get(ri),g=e.get(hN);(function i(a){e.get(ri).events.pipe(Ur(g=>g instanceof Sm||g instanceof xC||g instanceof MP),(0,mt.U)(g=>g instanceof Sm||g instanceof xC&&(0===g.code||1===g.code)&&null),Ur(g=>null!==g),ZE(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),u.afterPreactivation=()=>(a(!0),r||g.closed?(0,et.of)(void 0):g),u.initialNavigation()}))}}]).\u0275providers:[]]}const mN=new f.OlP("");let xA=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.messageService=a,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUserData(t){return this.afs.doc(`user/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.setUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&(this.messageService.add({severity:"success",summary:"Welcome",detail:":D"}),this.router.navigate(["home"]))})}).catch(()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Wrong credentials"})})}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{i.user?.sendEmailVerification(),this.setUserData(i.user),this.router.navigate(["login"]),this.messageService.add({severity:"success",summary:"Success",detail:"Account created successfully"})}).catch(()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Wrong credentials"})})}logout(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(iP),f.LFG(IC),f.LFG(ri),f.LFG(ca))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var GC=V(4043);const PA=new f.OlP("LOCAL_STORAGE_SERVICE_CONFIG");let NL=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:PA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const f0="LOCAL_STORAGE_NOT_SUPPORTED";class ql{constructor(e={}){this.isSupported=!1,this.notifyOptions={setItem:!1,removeItem:!1},this.prefix="ls",this.storageType="localStorage",this.errors=new Bn.L,this.removeItems=new Bn.L,this.setItems=new Bn.L,this.warnings=new Bn.L;let{notifyOptions:t,prefix:r,storageType:i}=e;if(null!=t){let{setItem:a,removeItem:u}=t;this.setNotify(!!a,!!u)}null!=r&&this.setPrefix(r),null!=i&&this.setStorageType(i),this.errors$=new li.y(a=>this.errors=a).pipe((0,GC.B)()),this.removeItems$=new li.y(a=>this.removeItems=a).pipe((0,GC.B)()),this.setItems$=new li.y(a=>this.setItems=a).pipe((0,GC.B)()),this.warnings$=new li.y(a=>this.warnings=a).pipe((0,GC.B)()),this.isSupported=this.checkSupport()}add(e,t){return console&&console.warn&&(console.warn("This function is deprecated."),console.warn("Use `LocalStorageService.set` instead.")),this.set(e,t)}clearAll(e){let t=this.prefix?new RegExp("^"+this.prefix):new RegExp(""),r=e?new RegExp(e):new RegExp("");if(!this.isSupported)return this.warnings.next(f0),!1;let i=this.prefix.length;for(let a in this.webStorage)if(t.test(a)&&r.test(a.substr(i)))try{this.remove(a.substr(i))}catch(u){return this.errors.next(u.message),!1}return!0}deriveKey(e){return`${this.prefix}${e}`}get(e){if(!this.isSupported)return this.warnings.next(f0),null;let t=this.webStorage?this.webStorage.getItem(this.deriveKey(e)):null;if(!t||"null"===t)return null;try{return JSON.parse(t)}catch{return null}}getStorageType(){return this.storageType}keys(){if(!this.isSupported)return this.warnings.next(f0),[];let e=this.prefix.length,t=[];for(let r in this.webStorage)if(r.substr(0,e)===this.prefix)try{t.push(r.substr(e))}catch(i){return this.errors.next(i.message),[]}return t}length(){let e=0,t=this.webStorage;for(let r=0;r<t.length;r++)0===t.key(r).indexOf(this.prefix)&&(e+=1);return e}remove(...e){let t=!0;return e.forEach(r=>{this.isSupported||(this.warnings.next(f0),t=!1);try{this.webStorage.removeItem(this.deriveKey(r)),this.notifyOptions.removeItem&&this.removeItems.next({key:r,storageType:this.storageType})}catch(i){this.errors.next(i.message),t=!1}}),t}set(e,t){if(t=void 0===t?null:JSON.stringify(t),!this.isSupported)return this.warnings.next(f0),!1;try{this.webStorage&&this.webStorage.setItem(this.deriveKey(e),t),this.notifyOptions.setItem&&this.setItems.next({key:e,newvalue:t,storageType:this.storageType})}catch(r){return this.errors.next(r.message),!1}return!0}checkSupport(){try{let e=this.storageType in window&&null!==window[this.storageType];if(e){this.webStorage=window[this.storageType];let t=this.deriveKey(`__${Math.round(1e7*Math.random())}`);this.webStorage.setItem(t,""),this.webStorage.removeItem(t)}return e}catch(e){return this.errors.next(e.message),!1}}setPrefix(e){this.prefix=e,this.prefix&&!this.prefix.endsWith(".")&&(this.prefix=this.prefix?`${this.prefix}.`:"")}setStorageType(e){this.storageType=e}setNotify(e,t){null!=e&&(this.notifyOptions.setItem=e),null!=t&&(this.notifyOptions.removeItem=t)}}ql.\u0275fac=function(e){return new(e||ql)(f.LFG(PA,8))},ql.\u0275prov=f.Yz7({token:ql,factory:ql.\u0275fac,providedIn:"root"}),ql.ngInjectableDef=(0,f.Ez6)({factory:function(){return new ql((0,f.f3M)(PA,8))},token:ql,providedIn:"root"});let OL=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.localStorage=i,this.contactList=[]}ngOnInit(){const t=this.localStorage.get("contacts");t&&(this.contactList=JSON.parse(t)),window.addEventListener("load",()=>{this.getUserLocation()})}getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{if(this.userLocation={latitude:t.coords.latitude,longitude:t.coords.longitude},this.userLocation){const r={center:{lat:this.userLocation.latitude,lng:this.userLocation.longitude},zoom:15};this.map=new google.maps.Map(document.getElementById("map"),r),this.convertCoordinatesToAddress()}},t=>{console.error("Error al obtener la ubicaci\xf3n: ",t)}):console.error("Geolocalizaci\xf3n no est\xe1 disponible en este navegador.")}convertCoordinatesToAddress(){if(this.userLocation&&this.map){const t=new google.maps.Geocoder,r=new google.maps.LatLng(this.userLocation.latitude,this.userLocation.longitude);t.geocode({location:r},(i,a)=>{a===google.maps.GeocoderStatus.OK?i[0]?this.userAddress=i[0].formatted_address:console.error("No se encontraron resultados de geocodificaci\xf3n."):console.error("Error en la geocodificaci\xf3n: "+a)})}}sendSOSMessage(){if(navigator.userAgent.match(/Android|iOS/i)){const t=`\xa1Necesito ayuda! Mi ubicaci\xf3n actual es: ${this.userAddress}`;this.contactList.forEach(r=>{const i=r.phoneNumbers[0]?.value;if(i){const a=`sms:${i}?body=${encodeURIComponent(t)}`,u=`https://api.whatsapp.com/send?phone=${i}&text=${encodeURIComponent(t)}`;window.open(a,"_blank"),window.open(u,"_blank")}})}else alert("Esta funci\xf3n solo est\xe1 disponible en dispositivos m\xf3viles. Por favor, env\xeda un mensaje SOS manualmente.")}navigateTocontact(){this.router.navigate(["/contact-detail"])}navigateToHome(){this.router.navigate(["/home"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xA),f.Y36(ri),f.Y36(ql))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:18,vars:1,consts:[[1,"container"],[1,"toolbar"],[1,"content"],[1,"location"],[1,"ubicacion"],[1,"addres"],[1,"map-container"],["id","map",2,"height","calc(50vh)"],[1,"bottom-toolbar"],[1,"pi","pi-home",2,"margin-left","5px",3,"click"],[1,"custom-button",2,"margin-left","20px",3,"click"],[1,"pi","pi-users",2,"margin-left","20px",3,"click"],[1,"pi","pi-cog",2,"margin-left","20px"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"span"),f._uU(3,"SOSecurity"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"div",4),f._uU(7,"Tu ubicaci\xf3n actual"),f.qZA(),f.TgZ(8,"div",5),f._uU(9),f.qZA()(),f.TgZ(10,"div",6),f._UZ(11,"div",7),f.qZA()(),f.TgZ(12,"div",8)(13,"button",9),f.NdJ("click",function(){return r.navigateToHome()}),f.qZA(),f.TgZ(14,"button",10),f.NdJ("click",function(){return r.sendSOSMessage()}),f._uU(15,"SOS"),f.qZA(),f.TgZ(16,"button",11),f.NdJ("click",function(){return r.navigateTocontact()}),f.qZA(),f._UZ(17,"button",12),f.qZA()()),2&t&&(f.xp6(9),f.Oqu(r.userLocation?r.userAddress:"Obteniendo ubicaci\xf3n..."))},styles:[".container[_ngcontent-%COMP%]{background:black;display:flex;flex-direction:column;height:100vh;position:relative}.toolbar[_ngcontent-%COMP%]{background-color:#d61111;color:#fff;text-align:center;padding:10px;font-weight:700;font-size:24px;margin-bottom:20px}.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;align-items:center;position:relative}.map-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:167px}.ubicacion[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:30px;margin-top:55px}.addres[_ngcontent-%COMP%]{color:#4242e5;text-align:center;font-size:25px;margin-top:20px}.bottom-toolbar[_ngcontent-%COMP%]{background:rgb(214,17,17);display:flex;justify-content:space-around;align-items:center;position:relative;padding:10px}.pi[_ngcontent-%COMP%]{font-size:30px;width:70px;height:70px;background:red;border-radius:50%}.custom-button[_ngcontent-%COMP%]{width:70px;height:70px;background:red;border-radius:50%;color:#fff;font-size:26px}"]}),n})();var kL=V(6549);function zC(n,e){return new li.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let a=0,u=0;for(let g=0;g<r;g++){const v=(0,xn.D)(n[g]);let b=!1;t.add(v.subscribe({next:S=>{b||(b=!0,u++),i[g]=S},error:S=>t.error(S),complete:()=>{a++,(a===r||!b)&&(u===r&&t.next(e?e.reduce((S,P,L)=>(S[P]=i[L],S),{}):i),t.complete())}}))}})}let yN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Am=(()=>{class n extends yN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const hc=new f.OlP("NgValueAccessor"),VL={provide:hc,useExisting:(0,f.Gpc)(()=>X_),multi:!0},BL=new f.OlP("CompositionEventMode");let X_=(()=>{class n extends yN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UL(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(BL,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([VL]),f.qOj]}),n})();const hs=new f.OlP("NgValidators"),sp=new f.OlP("NgAsyncValidators");function AN(n){return null!=n}function MN(n){return(0,f.QGY)(n)?(0,xn.D)(n):n}function xN(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function PN(n,e){return e.map(t=>t(n))}function NN(n){return n.map(e=>function $L(n){return!n.validate}(e)?e:t=>e.validate(t))}function NA(n){return null!=n?function RN(n){if(!n)return null;const e=n.filter(AN);return 0==e.length?null:function(t){return xN(PN(t,e))}}(NN(n)):null}function RA(n){return null!=n?function ON(n){if(!n)return null;const e=n.filter(AN);return 0==e.length?null:function(t){return function FL(...n){if(1===n.length){const e=n[0];if((0,JS.k)(e))return zC(e,null);if((0,kL.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return zC(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return zC(n=1===n.length&&(0,JS.k)(n[0])?n[0]:n,null).pipe((0,mt.U)(t=>e(...t)))}return zC(n,null)}(PN(t,e).map(MN)).pipe((0,mt.U)(xN))}}(NN(n)):null}function kN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OA(n){return n?Array.isArray(n)?n:[n]:[]}function WC(n,e){return Array.isArray(n)?n.includes(e):n===e}function VN(n,e){const t=OA(e);return OA(n).forEach(i=>{WC(t,i)||t.push(i)}),t}function UN(n,e){return OA(e).filter(t=>!WC(n,t))}class BN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=NA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ns extends BN{get formDirective(){return null}get path(){return null}}class op extends BN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let KC=(()=>{class n extends class jN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(op,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})();const p0="VALID",YC="INVALID",ev="PENDING",g0="DISABLED";function $N(n){return Array.isArray(n)?NA(n):n||null}function GN(n){return Array.isArray(n)?RA(n):n||null}function QC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function m0(n,e){(function jA(n,e){const t=function FN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(kN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function LN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(kN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();eT(e._rawValidators,i),eT(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function XL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&KN(n,e)})}(n,e),function tV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&KN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function JL(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function eT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JN(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function XN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const uV={provide:op,useExisting:(0,f.Gpc)(()=>tv)},rR=(()=>Promise.resolve())();let tv=(()=>{class n extends op{constructor(t,r,i,a,u){super(),this._changeDetectorRef=u,this.control=new class extends class WN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$N(this._rawValidators),this._composedAsyncValidatorFn=GN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===p0}get invalid(){return this.status===YC}get pending(){return this.status==ev}get disabled(){return this.status===g0}get enabled(){return this.status!==g0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$N(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=GN(e)}addValidators(e){this.setValidators(VN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UN(e,this._rawAsyncValidators))}hasValidator(e){return WC(this._rawValidators,e)}hasAsyncValidator(e){return WC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ev,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=g0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=p0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===p0||this.status===ev)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?g0:p0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ev,this._hasOwnPendingAsyncValidator=!0;const t=MN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?g0:this.errors?YC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ev)?ev:this._anyControlsHaveStatus(YC)?YC:p0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function VA(n){return(QC(n)?n.validators:n)||null}(t),function UA(n,e){return(QC(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=XN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){XN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function $A(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===X_?t=a:function iV(n){return Object.getPrototypeOf(n.constructor)===Am}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function HA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){m0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){rR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);rR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function JC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ns,9),f.Y36(hs,10),f.Y36(sp,10),f.Y36(hc,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([uV]),f.qOj,f.TTD]}),n})(),sR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),OV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[sR]}),n})(),kV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[OV]}),n})(),pi=(()=>{class n{static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var u=0;u<i.length;u++){if(i[u]==t)return a;i[u].attributes&&i[u].attributes[r]&&1==i[u].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(r)+"px")),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r){const i=ue=>{if(ue)return"relative"===getComputedStyle(ue).getPropertyValue("position")?ue:i(ue.parentElement)},a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),u=r.offsetHeight,g=r.getBoundingClientRect(),v=this.getWindowScrollTop(),b=this.getWindowScrollLeft(),S=this.getViewport(),L=i(t)?.getBoundingClientRect()||{top:-1*v,left:-1*b};let $,Y;g.top+u+a.height>S.height?($=g.top-L.top-a.height,t.style.transformOrigin="bottom",g.top+$<0&&($=-1*g.top)):($=u+g.top-L.top,t.style.transformOrigin="top"),Y=a.width>S.width?-1*(g.left-L.left):g.left-L.left+a.width>S.width?-1*(g.left-L.left+a.width-S.width):g.left-L.left,t.style.top=$+"px",t.style.left=Y+"px"}static absolutePosition(t,r){const i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=i.height,u=i.width,g=r.offsetHeight,v=r.offsetWidth,b=r.getBoundingClientRect(),S=this.getWindowScrollTop(),P=this.getWindowScrollLeft(),L=this.getViewport();let $,Y;b.top+g+a>L.height?($=b.top+S-a,t.style.transformOrigin="bottom",$<0&&($=S)):($=g+b.top+S,t.style.transformOrigin="top"),Y=b.left+u>L.width?Math.max(0,b.left+P+v-u):b.left+P,t.style.top=$+"px",t.style.left=Y+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,u=g=>{let v=window.getComputedStyle(g,null);return a.test(v.getPropertyValue("overflow"))||a.test(v.getPropertyValue("overflowX"))||a.test(v.getPropertyValue("overflowY"))};for(let g of i){let v=1===g.nodeType&&g.dataset.scrollselectors;if(v){let b=v.split(",");for(let S of b){let P=this.findSingle(g,S);P&&u(P)&&r.push(P)}}9!==g.nodeType&&u(g)&&r.push(g)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,u=getComputedStyle(t).getPropertyValue("paddingTop"),g=u?parseFloat(u):0,v=t.getBoundingClientRect(),S=r.getBoundingClientRect().top+document.body.scrollTop-(v.top+document.body.scrollTop)-a-g,P=t.scrollTop,L=t.clientHeight,$=this.getOuterHeight(r);S<0?t.scrollTop=P+S:S+$>L&&(t.scrollTop=P+S-L+$)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,u=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(t,r){var i=1,g=50/r;let v=setInterval(()=>{(i-=g)<=0&&(i=0,clearInterval(v)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&i.push(a);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const u=(g=t)&&g.constructor&&g.call&&g.apply?t():t;return u&&9===u.nodeType||this.isExist(u)?u:null}var g}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),LV=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(pi.removeClass(r,"p-ink-active"),!pi.getHeight(r)&&!pi.getWidth(r)){let g=Math.max(pi.getOuterWidth(this.el.nativeElement),pi.getOuterHeight(this.el.nativeElement));r.style.height=g+"px",r.style.width=g+"px"}let i=pi.getOffset(this.el.nativeElement),a=t.pageX-i.left+document.body.scrollTop-pi.getWidth(r)/2,u=t.pageY-i.top+document.body.scrollLeft-pi.getHeight(r)/2;r.style.top=u+"px",r.style.left=a+"px",pi.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let g=this.getInk();g&&pi.removeClass(g,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&pi.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),pi.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),pi.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(Ir,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),QA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os]}),n})();class nT{static equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a,u,g,r=Array.isArray(e),i=Array.isArray(t);if(r&&i){if((u=e.length)!=t.length)return!1;for(a=u;0!=a--;)if(!this.equalsByValue(e[a],t[a]))return!1;return!0}if(r!=i)return!1;var v=e instanceof Date,b=t instanceof Date;if(v!=b)return!1;if(v&&b)return e.getTime()==t.getTime();var S=e instanceof RegExp,P=t instanceof RegExp;if(S!=P)return!1;if(S&&P)return e.toString()==t.toString();var L=Object.keys(e);if((u=L.length)!==Object.keys(t).length)return!1;for(a=u;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,L[a]))return!1;for(a=u;0!=a--;)if(!this.equalsByValue(e[g=L[a]],t[g]))return!1;return!0}return e!=e&&t!=t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(-1==t.indexOf("."))return e[t];{let r=t.split("."),i=e;for(let a=0,u=r.length;a<u;++a){if(null==i)return null;i=i[r[a]]}return i}}return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,r){e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,r,i){if(r.length>0){let a=!1;for(let u=0;u<r.length;u++)if(this.findIndexInList(r[u],i)>t){r.splice(u,0,e),a=!0;break}a||r.push(e)}else r.push(e)}static findIndexInList(e,t){let r=-1;if(t)for(let i=0;i<t.length;i++)if(t[i]==e){r=i;break}return r}static contains(e,t){if(null!=e&&t&&t.length)for(let r of t)if(this.equals(e,r))return!0;return!1}static removeAccents(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}static isEmpty(e){return null==e||""===e||Array.isArray(e)&&0===e.length||!(e instanceof Date)&&"object"==typeof e&&0===Object.keys(e).length}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,r,i=1){let a=-1;const u=this.isEmpty(e),g=this.isEmpty(t);return a=u&&g?0:u?i:g?-i:"string"==typeof e&&"string"==typeof t?e.localeCompare(t,r,{numeric:!0}):e<t?-1:e>t?1:0,a}static sort(e,t,r=1,i,a=1){return(1===a?r:a)*nT.compare(e,t,i,r)}static merge(e,t){return null!=e&&"object"!=typeof e||null!=t&&"object"!=typeof t?null!=e&&"string"!=typeof e||null!=t&&"string"!=typeof t?t||e:[e||"",t||""].join(" "):{...e||{},...t||{}}}}var bR=0,JA=function UV(){let n=[];const i=a=>a&&parseInt(a.style.zIndex,10)||0;return{get:i,set:(a,u,g)=>{u&&(u.style.zIndex=String(((a,u)=>{let g=n.length>0?n[n.length-1]:{key:a,value:u},v=g.value+(g.key===a?0:u)+1;return n.push({key:a,value:v}),v})(a,g)))},clear:a=>{a&&((a=>{n=n.filter(u=>u.value!==a)})(i(a)),a.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();let XA=(()=>{class n{constructor(t){this.el=t,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}get label(){return this._label}set label(t){this._label=t,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,pi.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let t="p-button p-component";return this.icon&&!this.label&&nT.isEmpty(this.el.nativeElement.textContent)&&(t+=" p-button-icon-only"),this.loading&&(t+=" p-disabled p-button-loading",!this.icon&&this.label&&(t+=" p-button-loading-label-only")),t}setStyleClass(){let t=this.getStyleClass();this.el.nativeElement.className=t+" "+this._initialStyleClass}createLabel(){if(this.label){let t=document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",t.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(t)}}createIcon(){if(this.icon||this.loading){let t=document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let r=this.label?"p-button-icon-"+this.iconPos:null;r&&pi.addClass(t,r);let i=this.getIconClass();i&&pi.addMultipleClasses(t,i),this.el.nativeElement.insertBefore(t,this.el.nativeElement.firstChild)}}updateLabel(){let t=pi.findSingle(this.el.nativeElement,".p-button-label");this.label?t?t.textContent=this.label:this.createLabel():t&&this.el.nativeElement.removeChild(t)}updateIcon(){let t=pi.findSingle(this.el.nativeElement,".p-button-icon");this.icon||this.loading?t?t.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():t&&this.el.nativeElement.removeChild(t)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),jV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os,QA]}),n})(),eM=(()=>{class n{constructor(t,r,i){this.el=t,this.ngModel=r,this.cd=i}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(t){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(tv,8),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r.onInput(a)}),2&t&&f.ekj("p-filled",r.filled)}}),n})(),HV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os]}),n})();function $V(n,e){1&n&&(f.TgZ(0,"div",13),f._uU(1," Las contrase\xf1as no coinciden. "),f.qZA())}function GV(n,e){1&n&&(f.TgZ(0,"div",13),f._uU(1," La contrase\xf1a debe contener caracteres especiales. "),f.qZA())}let zV=(()=>{class n{constructor(t){this.authService=t,this.registerUser={email:"",password:"",confirmPassword:""},this.passwordsMismatch=!1}ngOnInit(){}checkPasswordMatch(){this.passwordsMismatch=this.registerUser.password!==this.registerUser.confirmPassword}hasSpecialCharacters(t){return/[!@#$%^&*(),.?":{}|<>]/.test(t)}register(){!this.passwordsMismatch&&this.hasSpecialCharacters(this.registerUser.password)?this.authService.register(this.registerUser.email,this.registerUser.password):console.log("Las contrase\xf1as no coinciden o no cumplen los requisitos m\xednimos")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xA))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:20,vars:5,consts:[[1,"container","h-screen","w-full","flex","justify-content-center","align-items-center"],[1,"surface-card","p-4","shadow-2","border-round","w-full","lg:w-6"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],["href","login",1,"font-medium","no-underline","ml-2","text-blue-500","cursor-pointer"],["for","email1",1,"block","text-900","font-medium","mb-2"],["id","email","name","email","type","text","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["for","password1",1,"block","text-900","font-medium","mb-2"],["id","password1","name","password","type","password","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["for","password2",1,"block","text-900","font-medium","mb-2"],["id","password2","name","confirmPassword","type","password","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["class","text-red-500 mb-3",4,"ngIf"],["pButton","","pRipple","","label","Register","icon","pi pi-user",1,"w-full",3,"click"],[1,"text-red-500","mb-3"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f._uU(4,"Creaci\xf3n de cuenta"),f.qZA(),f.TgZ(5,"a",4),f._uU(6,"Volver"),f.qZA()(),f.TgZ(7,"div")(8,"label",5),f._uU(9,"Correo"),f.qZA(),f.TgZ(10,"input",6),f.NdJ("ngModelChange",function(a){return r.registerUser.email=a}),f.qZA(),f.TgZ(11,"label",7),f._uU(12,"Contrase\xf1a"),f.qZA(),f.TgZ(13,"input",8),f.NdJ("ngModelChange",function(a){return r.registerUser.password=a})("ngModelChange",function(){return r.checkPasswordMatch()}),f.qZA(),f.TgZ(14,"label",9),f._uU(15,"Confirmaci\xf3n de contrase\xf1a"),f.qZA(),f.TgZ(16,"input",10),f.NdJ("ngModelChange",function(a){return r.registerUser.confirmPassword=a})("ngModelChange",function(){return r.checkPasswordMatch()}),f.qZA(),f.YNc(17,$V,2,0,"div",11),f.YNc(18,GV,2,0,"div",11),f.TgZ(19,"button",12),f.NdJ("click",function(){return r.register()}),f.qZA()()()()),2&t&&(f.xp6(10),f.Q6J("ngModel",r.registerUser.email),f.xp6(3),f.Q6J("ngModel",r.registerUser.password),f.xp6(3),f.Q6J("ngModel",r.registerUser.confirmPassword),f.xp6(1),f.Q6J("ngIf",r.passwordsMismatch&&""!==r.registerUser.password),f.xp6(1),f.Q6J("ngIf",!r.hasSpecialCharacters(r.registerUser.password)&&""!==r.registerUser.password))},dependencies:[Kn,X_,KC,tv,XA,eM]}),n})(),qV=(()=>{class n{constructor(t){this.authService=t,this.loginUser={email:"",password:""}}ngOnInit(){}login(t){this.authService.login(t.email,t.password)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xA))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:2,consts:[[1,"container","h-screen","w-full","flex","justify-content-center","align-items-center","fondo-login"],[1,"surface-card","p-4","shadow-2","border-round","w-full","lg:w-6"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium","line-height-3"],["href","register",1,"font-medium","no-underline","ml-2","text-blue-500","cursor-pointer"],["for","email1",1,"block","text-900","font-medium","mb-2"],["id","email1","name","email","type","text","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["for","password1",1,"block","text-900","font-medium","mb-2"],["id","password1","type","password","name","password","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],[1,"flex","align-items-center","justify-content-between","mb-6"],["href","olvidar-contr",1,"font-medium","no-underline","ml-2","text-blue-500","text-right","cursor-pointer"],["pButton","","pRipple","","label","Iniciar sesi\xf3n","icon","pi pi-user",1,"w-full",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),f._uU(5,"SOSecurity"),f.qZA()(),f.TgZ(6,"span",4),f._uU(7,"\xbfNo tienes una cuenta?"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"\xa1Crea una hoy mismo!"),f.qZA()(),f.TgZ(10,"div")(11,"label",6),f._uU(12,"Correo"),f.qZA(),f.TgZ(13,"input",7),f.NdJ("ngModelChange",function(a){return r.loginUser.email=a}),f.qZA(),f.TgZ(14,"label",8),f._uU(15,"Contrase\xf1a"),f.qZA(),f.TgZ(16,"input",9),f.NdJ("ngModelChange",function(a){return r.loginUser.password=a}),f.qZA(),f.TgZ(17,"div",10)(18,"a",11),f._uU(19,"\xbfOlvidaste tu contrase\xf1a?"),f.qZA()(),f.TgZ(20,"button",12),f.NdJ("click",function(){return r.login(r.loginUser)}),f.qZA()()()()),2&t&&(f.xp6(13),f.Q6J("ngModel",r.loginUser.email),f.xp6(3),f.Q6J("ngModel",r.loginUser.password))},dependencies:[X_,KC,tv,XA,eM],styles:[".fondo-login[_ngcontent-%COMP%]{background:url(Principal.30b455efd28f6f6b.jpg) no-repeat center center fixed;background-size:cover}"]}),n})(),WV=(()=>{class n{constructor(){this.registerUser={email:"",password:""}}ngOnInit(){}register(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-olvidar-contr"]],decls:15,vars:2,consts:[[1,"container","h-screen","w-full","flex","justify-content-center","align-items-center"],[1,"surface-card","p-4","shadow-2","border-round","w-full","lg:w-6"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],["href","login",1,"font-medium","no-underline","ml-2","text-blue-500","cursor-pointer"],["for","email1",1,"block","text-900","font-medium","mb-2"],["id","email","name","email","type","text","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["for","password1",1,"block","text-900","font-medium","mb-2"],["id","password1","name","password","type","password","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Register","icon","pi pi-user",1,"w-full",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f._uU(4,"\xbfOlvidaste tu contrase\xf1a?"),f.qZA(),f.TgZ(5,"a",4),f._uU(6,"Login"),f.qZA()(),f.TgZ(7,"div")(8,"label",5),f._uU(9,"Email"),f.qZA(),f.TgZ(10,"input",6),f.NdJ("ngModelChange",function(a){return r.registerUser.email=a}),f.qZA(),f.TgZ(11,"label",7),f._uU(12,"Password"),f.qZA(),f.TgZ(13,"input",8),f.NdJ("ngModelChange",function(a){return r.registerUser.password=a}),f.qZA(),f.TgZ(14,"button",9),f.NdJ("click",function(){return r.register(r.registerUser)}),f.qZA()()()()),2&t&&(f.xp6(10),f.Q6J("ngModel",r.registerUser.email),f.xp6(3),f.Q6J("ngModel",r.registerUser.password))},dependencies:[X_,KC,tv,XA,eM]}),n})();function KV(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",10)(1,"div",11)(2,"span",12),f._uU(3),f.qZA(),f.TgZ(4,"span",13),f._uU(5),f.qZA()(),f.TgZ(6,"button",14),f.NdJ("click",function(){const a=f.CHM(t).$implicit,u=f.oxw();return f.KtG(u.deleteContact(a))}),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(3),f.Oqu(t.name.formatted),f.xp6(2),f.Oqu(null==t.phoneNumbers[0]?null:t.phoneNumbers[0].value)}}const ZV=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:qV},{path:"register",component:zV},{path:"home",component:OL},{path:"olvidar-contr",component:WV},{path:"contact-detail",component:(()=>{class n{constructor(t,r,i,a){this.route=t,this.router=r,this.cd=i,this.localStorage=a,this.contactList=[]}ngOnInit(){const t=this.localStorage.get("contacts");t&&(this.contactList=JSON.parse(t));const r=this.router.getCurrentNavigation();r&&r.extras&&r.extras.state&&(this.contactList=r.extras.state.contact||[]),window.addEventListener("load",()=>{this.getUserLocation()})}getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{if(this.userLocation={latitude:t.coords.latitude,longitude:t.coords.longitude},this.userLocation){const r={center:{lat:this.userLocation.latitude,lng:this.userLocation.longitude},zoom:15};this.map=new google.maps.Map(document.getElementById("map"),r),this.convertCoordinatesToAddress()}},t=>{console.error("Error al obtener la ubicaci\xf3n: ",t)}):console.error("Geolocalizaci\xf3n no est\xe1 disponible en este navegador.")}convertCoordinatesToAddress(){if(this.userLocation&&this.map){const t=new google.maps.Geocoder,r=new google.maps.LatLng(this.userLocation.latitude,this.userLocation.longitude);t.geocode({location:r},(i,a)=>{a===google.maps.GeocoderStatus.OK?i[0]?this.userAddress=i[0].formatted_address:console.error("No se encontraron resultados de geocodificaci\xf3n."):console.error("Error en la geocodificaci\xf3n: "+a)})}}sendSOSMessage(){if(navigator.userAgent.match(/Android|iOS/i)){const t=`\xa1Necesito ayuda! Mi ubicaci\xf3n actual es: ${this.userAddress}`;this.contactList.forEach(r=>{const i=r.phoneNumbers[0]?.value;if(i){const a=`sms:${i}?body=${encodeURIComponent(t)}`,u=`https://api.whatsapp.com/send?phone=${i}&text=${encodeURIComponent(t)}`;window.open(a,"_blank"),window.open(u,"_blank")}})}else alert("Esta funci\xf3n solo est\xe1 disponible en dispositivos m\xf3viles. Por favor, env\xeda un mensaje SOS manualmente.")}selectContact(){"contacts"in navigator?navigator.contacts.pickContact(r=>{console.log("Contacto seleccionado:",r),this.contactList.push(r),this.cd.detectChanges()},r=>{console.error("Error al seleccionar el contacto:",r)},{multiple:!0}):alert("La API de Contactos no est\xe1 disponible en este dispositivo."),this.saveContactsToLocalStorage()}deleteContact(t){const r=this.contactList.indexOf(t);-1!==r&&(this.contactList.splice(r,1),this.cd.detectChanges()),this.saveContactsToLocalStorage()}saveContactsToLocalStorage(){this.localStorage.set("contacts",JSON.stringify(this.contactList))}navigateTocontact(){this.router.navigate(["/contact-detail"])}navigateToHome(){this.router.navigate(["/home"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(rp),f.Y36(ri),f.Y36(f.sBO),f.Y36(ql))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact-detail"]],decls:13,vars:1,consts:[[1,"container"],[1,"toolbar"],["class","contact-item",4,"ngFor","ngForOf"],[1,"bottom-toolbar"],[1,"pi","pi-home",2,"margin-left","5px",3,"click"],[1,"custom-button",2,"margin-left","20px",3,"click"],[1,"pi","pi-users",2,"margin-left","20px",3,"click"],[1,"pi","pi-cog",2,"margin-left","20px"],[1,"bottom-center-button"],[1,"pi","pi-plus",3,"click"],[1,"contact-item"],[1,"contact-info"],[1,"texto"],[1,"numero"],[1,"pi","pi-trash","delete-button-small",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h2",1),f._uU(2,"Detalles de Contacto"),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,KV,7,2,"li",2),f.qZA(),f.TgZ(5,"div",3)(6,"button",4),f.NdJ("click",function(){return r.navigateToHome()}),f.qZA(),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.sendSOSMessage()}),f._uU(8,"SOS"),f.qZA(),f.TgZ(9,"button",6),f.NdJ("click",function(){return r.navigateTocontact()}),f.qZA(),f._UZ(10,"button",7),f.qZA(),f.TgZ(11,"div",8)(12,"button",9),f.NdJ("click",function(){return r.selectContact()}),f.qZA()()()),2&t&&(f.xp6(4),f.Q6J("ngForOf",r.contactList))},dependencies:[ki],styles:[".container[_ngcontent-%COMP%]{background:black;display:flex;flex-direction:column;height:100vh;position:relative}.toolbar[_ngcontent-%COMP%]{background-color:#d61111;color:#fff;text-align:center;padding:10px;font-weight:700;font-size:24px}.contact-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.texto[_ngcontent-%COMP%]{color:#adaaff;font-size:18px;margin-top:10px}.numero[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-top:5px}.delete-button-small[_ngcontent-%COMP%]{font-size:20px!important;width:30px!important;height:30px!important;background:red!important;border-radius:50%!important;display:flex!important;align-items:center!important;justify-content:center!important;margin-top:10px!important;margin-right:20px!important}.bottom-toolbar[_ngcontent-%COMP%]{background:rgb(214,17,17);display:flex;justify-content:space-around;align-items:center;position:fixed;bottom:0;left:0;right:0;padding:10px}.pi[_ngcontent-%COMP%]{font-size:30px;width:70px;height:70px;background:red;border-radius:50%}.custom-button[_ngcontent-%COMP%]{width:70px;height:70px;background:red;border-radius:50%;color:#fff;font-size:26px}.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;align-items:center;position:relative}.bottom-center-button[_ngcontent-%COMP%]{position:absolute;bottom:90px;left:50%;transform:translate(-50%);text-align:center}.round-button[_ngcontent-%COMP%]{width:50px;height:50px;background-color:red;border-radius:50%;border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}"]}),n})()}];let YV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[gN.forRoot(ZV),gN]}),n})();class CR{}const Wd="*";function TR(n,e){return{type:7,name:n,definitions:e,options:{}}}function DR(n,e=null){return{type:4,styles:e,timings:n}}function SR(n,e=null){return{type:2,steps:n,options:e}}function _0(n){return{type:6,styles:n,offset:null}}function JV(n,e,t){return{type:0,name:n,styles:e,options:t}}function tM(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function XV(n=null){return{type:9,options:n}}function e2(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function AR(n){Promise.resolve().then(n)}class v0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){AR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class MR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?AR(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,g)=>Math.max(u,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const xR=["container"],t2=function(n,e,t,r){return{"pi-info-circle":n,"pi-exclamation-triangle":e,"pi-times-circle":t,"pi-check":r}};function n2(n,e){if(1&n&&(f.ynx(0),f._UZ(1,"span",6),f.TgZ(2,"div",7)(3,"div",8),f._uU(4),f.qZA(),f.TgZ(5,"div",9),f._uU(6),f.qZA()(),f.BQk()),2&n){const t=f.oxw();f.xp6(1),f.Tol("p-toast-message-icon pi"+(t.message.icon?" "+t.message.icon:"")),f.Q6J("ngClass",f.l5B(5,t2,"info"==t.message.severity,"warn"==t.message.severity,"error"==t.message.severity,"success"==t.message.severity)),f.xp6(3),f.Oqu(t.message.summary),f.xp6(2),f.Oqu(t.message.detail)}}function r2(n,e){1&n&&f.GkF(0)}function s2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(i){f.CHM(t);const a=f.oxw();return f.KtG(a.onCloseIconClick(i))})("keydown.enter",function(i){f.CHM(t);const a=f.oxw();return f.KtG(a.onCloseIconClick(i))}),f._UZ(1,"span",11),f.qZA()}}const o2=function(n){return[n,"p-toast-message"]},a2=function(n,e,t,r){return{showTransformParams:n,hideTransformParams:e,showTransitionParams:t,hideTransitionParams:r}},l2=function(n){return{value:"visible",params:n}},u2=function(n){return{$implicit:n}};function c2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"p-toastItem",3),f.NdJ("onClose",function(i){f.CHM(t);const a=f.oxw();return f.KtG(a.onMessageClose(i))})("@toastAnimation.start",function(i){f.CHM(t);const a=f.oxw();return f.KtG(a.onAnimationStart(i))})("@toastAnimation.done",function(i){f.CHM(t);const a=f.oxw();return f.KtG(a.onAnimationEnd(i))}),f.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=f.oxw();f.Q6J("message",t)("index",r)("template",i.template)("@toastAnimation",void 0)("showTransformOptions",i.showTransformOptions)("hideTransformOptions",i.hideTransformOptions)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}}let d2=(()=>{class n{constructor(t){this.zone=t,this.onClose=new f.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(t){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),t.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["p-toastItem"]],viewQuery:function(t,r){if(1&t&&f.Gf(xR,5),2&t){let i;f.iGM(i=f.CRH())&&(r.containerViewChild=i.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0,1),f.NdJ("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()}),f.TgZ(2,"div",2),f.YNc(3,n2,7,10,"ng-container",3),f.YNc(4,r2,1,0,"ng-container",4),f.YNc(5,s2,2,0,"button",5),f.qZA()()),2&t&&(f.Tol(r.message.styleClass),f.Q6J("ngClass",f.VKq(10,o2,"p-toast-message-"+r.message.severity))("@messageState",f.VKq(17,l2,f.l5B(12,a2,r.showTransformOptions,r.hideTransformOptions,r.showTransitionOptions,r.hideTransitionOptions))),f.uIk("id",r.message.id),f.xp6(2),f.Q6J("ngClass",r.message.contentStyleClass),f.xp6(1),f.Q6J("ngIf",!r.template),f.xp6(1),f.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",f.VKq(19,u2,r.message)),f.xp6(1),f.Q6J("ngIf",!1!==r.message.closable))},dependencies:[an,Kn,_c,LV],encapsulation:2,data:{animation:[TR("messageState",[JV("visible",_0({transform:"translateY(0)",opacity:1})),tM("void => *",[_0({transform:"{{showTransformParams}}",opacity:0}),DR("{{showTransitionParams}}")]),tM("* => void",[DR("{{hideTransitionParams}}",_0({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),n})(),h2=(()=>{class n{constructor(t,r,i){this.messageService=t,this.cd=r,this.config=i,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new f.vpe,this.id=function VV(){return"pr_id_"+ ++bR}()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t)if(t instanceof Array){const r=t.filter(i=>this.canAdd(i));this.add(r)}else this.canAdd(t)&&this.add([t])}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(t){this.messages=this.messages?[...this.messages,...t]:[...t],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...t]:[...t]),this.cd.markForCheck()}canAdd(t){let r=this.key===t.key;return r&&this.preventOpenDuplicates&&(r=!this.containsMessage(this.messages,t)),r&&this.preventDuplicates&&(r=!this.containsMessage(this.messagesArchieve,t)),r}containsMessage(t,r){return!!t&&null!=t.find(i=>i.summary===r.summary&&i.detail==r.detail&&i.severity===r.severity)}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.template=t.template})}onMessageClose(t){this.messages.splice(t.index,1),this.onClose.emit({message:t.message}),this.cd.detectChanges()}onAnimationStart(t){"void"===t.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&JA.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(t){"void"===t.toState&&this.autoZIndex&&nT.isEmpty(this.messages)&&JA.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let r in this.breakpoints){let i="";for(let a in this.breakpoints[r])i+=a+":"+this.breakpoints[r][a]+" !important;";t+=`\n                    @media screen and (max-width: ${r}) {\n                        .p-toast[${this.id}] {\n                           ${i}\n                        }\n                    }\n                `}this.styleElement.innerHTML=t}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&JA.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ca),f.Y36(f.sBO),f.Y36(Ir))},n.\u0275cmp=f.Xpm({type:n,selectors:[["p-toast"]],contentQueries:function(t,r,i){if(1&t&&f.Suo(i,Nh,4),2&t){let a;f.iGM(a=f.CRH())&&(r.templates=a)}},viewQuery:function(t,r){if(1&t&&f.Gf(xR,5),2&t){let i;f.iGM(i=f.CRH())&&(r.containerViewChild=i.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0,1),f.YNc(2,c2,1,8,"p-toastItem",2),f.qZA()),2&t&&(f.Tol(r.styleClass),f.Q6J("ngClass","p-toast p-component p-toast-"+r.position)("ngStyle",r.style),f.xp6(2),f.Q6J("ngForOf",r.messages))},dependencies:[an,ki,yc,d2],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[TR("toastAnimation",[tM(":enter, :leave",[e2("@*",XV())])])]},changeDetection:0}),n})(),f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os,QA,Rh]}),n})(),p2=(()=>{class n{constructor(){this.title="angularfirebase"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")(1,"p-toast")},dependencies:[gA,h2]}),n})();const PR_firebase={apiKey:"AIzaSyB7o6XZFA-n_kV596y1sAyZBXKA1ubhowU",authDomain:"sosecurity-de1af.firebaseapp.com",projectId:"sosecurity-de1af",storageBucket:"sosecurity-de1af.appspot.com",messagingSenderId:"336620348387"};let S2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os,QA]}),n})(),R2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Os]}),n})();function NR(n){return new f.vHH(3e3,!1)}function pU(){return typeof window<"u"&&typeof window.document<"u"}function rM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ap(n){switch(n.length){case 0:return new v0;case 1:return n[0];default:return new MR(n)}}function RR(n,e,t,r,i=new Map,a=new Map){const u=[],g=[];let v=-1,b=null;if(r.forEach(S=>{const P=S.get("offset"),L=P==v,$=L&&b||new Map;S.forEach((Y,ue)=>{let ge=ue,Ue=Y;if("offset"!==ue)switch(ge=e.normalizePropertyName(ge,u),Ue){case"!":Ue=i.get(ue);break;case Wd:Ue=a.get(ue);break;default:Ue=e.normalizeStyleValue(ue,ge,Ue,u)}$.set(ge,Ue)}),L||g.push($),b=$,v=P}),u.length)throw function nU(n){return new f.vHH(3502,!1)}();return g}function iM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&sM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&sM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&sM(t,"destroy",n)))}}function sM(n,e,t){const a=oM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function oM(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Lo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function OR(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let aM=(n,e)=>!1,kR=(n,e,t)=>[],FR=null;function lM(n){const e=n.parentNode||n.host;return e===FR?null:e}(rM()||typeof Element<"u")&&(pU()?(FR=(()=>document.documentElement)(),aM=(n,e)=>{for(;e;){if(e===n)return!0;e=lM(e)}return!1}):aM=(n,e)=>n.contains(e),kR=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let xm=null,LR=!1;const VR=aM,UR=kR;let BR=(()=>{class n{validateStyleProperty(t){return function mU(n){xm||(xm=function yU(){return typeof document<"u"?document.body:null}()||{},LR=!!xm.style&&"WebkitAppearance"in xm.style);let e=!0;return xm.style&&!function gU(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in xm.style,!e&&LR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in xm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return VR(t,r)}getParentElement(t){return lM(t)}query(t,r,i){return UR(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,g=[],v){return new v0(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),uM=(()=>{class n{}return n.NOOP=new BR,n})();const cM="ng-enter",rT="ng-leave",iT="ng-trigger",sT=".ng-trigger",HR="ng-animating",dM=".ng-animating";function Kd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hM(parseFloat(e[1]),e[2])}function hM(n,e){return"s"===e?1e3*n:n}function oT(n,e,t){return n.hasOwnProperty("duration")?n:function wU(n,e,t){let i,a=0,u="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(NR()),{duration:0,delay:0,easing:""};i=hM(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(a=hM(parseFloat(v),g[4]));const b=g[5];b&&(u=b)}else i=n;if(!t){let g=!1,v=e.length;i<0&&(e.push(function O2(){return new f.vHH(3100,!1)}()),g=!0),a<0&&(e.push(function k2(){return new f.vHH(3101,!1)}()),g=!0),g&&e.splice(v,0,NR())}return{duration:i,delay:a,easing:u}}(n,e,t)}function w0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function $R(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function lp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function zR(n,e,t){return t?e+":"+t+";":""}function qR(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=zR(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=zR(0,CU(t),n.style[t]));n.setAttribute("style",e)}function fc(n,e,t){n.style&&(e.forEach((r,i)=>{const a=pM(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),rM()&&qR(n))}function Pm(n,e){n.style&&(e.forEach((t,r)=>{const i=pM(r);n.style[i]=""}),rM()&&qR(n))}function E0(n){return Array.isArray(n)?1==n.length?n[0]:SR(n):n}const fM=new RegExp("{{\\s*(.+?)\\s*}}","g");function WR(n){let e=[];if("string"==typeof n){let t;for(;t=fM.exec(n);)e.push(t[1]);fM.lastIndex=0}return e}function I0(n,e,t){const r=n.toString(),i=r.replace(fM,(a,u)=>{let g=e[u];return null==g&&(t.push(function L2(n){return new f.vHH(3003,!1)}()),g=""),g.toString()});return i==r?n:i}function aT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bU=/-+([a-z0-9])/g;function pM(n){return n.replace(bU,(...e)=>e[1].toUpperCase())}function CU(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function V2(n){return new f.vHH(3004,!1)}()}}function KR(n,e){return window.getComputedStyle(n)[e]}function xU(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function PU(n,e,t){if(":"==n[0]){const v=function NU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function J2(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Q2(n){return new f.vHH(3015,!1)}()),e;const i=r[1],a=r[2],u=r[3];e.push(ZR(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(ZR(u,i))}(r,t,e)):t.push(n),t}const dT=new Set(["true","1"]),hT=new Set(["false","0"]);function ZR(n,e){const t=dT.has(n)||hT.has(n),r=dT.has(e)||hT.has(e);return(i,a)=>{let u="*"==n||n==i,g="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?dT.has(n):hT.has(n)),!g&&r&&"boolean"==typeof a&&(g=a?dT.has(e):hT.has(e)),u&&g}}const RU=new RegExp("s*:selfs*,?","g");function gM(n,e,t,r){return new OU(n).build(e,t,r)}class OU{constructor(e){this._driver=e}build(e,t,r){const i=new LU(t);return this._resetContextStyleTimingState(i),Vo(this,E0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function B2(){return new f.vHH(3006,!1)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,b=v.name;b.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,a.push(this.visitState(v,t))}),v.name=b}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,i+=v.depCount,u.push(v)}else t.errors.push(function j2(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(g=>{g instanceof Map&&g.forEach(v=>{WR(v).forEach(b=>{u.hasOwnProperty(b)||a.add(b)})})}),a.size&&(aT(a.values()),t.errors.push(function H2(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Vo(this,E0(e.animation),t);return{type:1,matchers:xU(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Nm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Vo(this,r,t)),options:Nm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const g=Vo(this,u,t);return i=Math.max(i,t.currentTime),g});return t.currentTime=i,{type:3,steps:a,options:Nm(e.options)}}visitAnimate(e,t){const r=function UU(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return mM(oT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=mM(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=oT(t,e);return mM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:_0({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,g=!1;if(!u){g=!0;const b={};r.easing&&(b.easing=r.easing),u=_0(b)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(u,t);v.isEmptyStep=g,i=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let g of i)"string"==typeof g?g===Wd?r.push(g):t.errors.push(new f.vHH(3002,!1)):r.push($R(g));let a=!1,u=null;return r.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(u=g.get("easing"),g.delete("easing")),!a))for(let v of g.values())if(v.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((g,v)=>{const b=t.collectedStyles.get(t.currentQuerySelector),S=b.get(v);let P=!0;S&&(a!=i&&a>=S.startTime&&i<=S.endTime&&(t.errors.push(function G2(n,e,t,r,i){return new f.vHH(3010,!1)}()),P=!1),a=S.startTime),P&&b.set(v,{startTime:a,endTime:i}),t.options&&function IU(n,e,t){const r=e.params||{},i=WR(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function F2(n){return new f.vHH(3001,!1)}())})}(g,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function z2(){return new f.vHH(3011,!1)}()),r;let a=0;const u=[];let g=!1,v=!1,b=0;const S=e.steps.map(Ue=>{const Ze=this._makeStyleAst(Ue,t);let Qe=null!=Ze.offset?Ze.offset:function VU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ze.styles),it=0;return null!=Qe&&(a++,it=Ze.offset=Qe),v=v||it<0||it>1,g=g||it<b,b=it,u.push(it),Ze});v&&t.errors.push(function q2(){return new f.vHH(3012,!1)}()),g&&t.errors.push(function W2(){return new f.vHH(3200,!1)}());const P=e.steps.length;let L=0;a>0&&a<P?t.errors.push(function K2(){return new f.vHH(3202,!1)}()):0==a&&(L=1/(P-1));const $=P-1,Y=t.currentTime,ue=t.currentAnimateTimings,ge=ue.duration;return S.forEach((Ue,Ze)=>{const Qe=L>0?Ze==$?1:L*Ze:u[Ze],it=Qe*ge;t.currentTime=Y+ue.delay+it,ue.duration=it,this._validateStyleAst(Ue,t),Ue.offset=Qe,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:Vo(this,E0(e.animation),t),options:Nm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Nm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Nm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function kU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(RU,"")),n=n.replace(/@\*/g,sT).replace(/@\w+/g,t=>sT+"-"+t.slice(1)).replace(/:animating/g,dM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Lo(t.collectedStyles,t.currentQuerySelector,new Map);const g=Vo(this,E0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:g,originalSelector:e.selector,options:Nm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Z2(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:oT(e.timings,t.errors,!0);return{type:12,animation:Vo(this,E0(e.animation),t),timings:r,options:null}}}class LU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Nm(n){return n?(n=w0(n)).params&&(n.params=function FU(n){return n?w0(n):null}(n.params)):n={},n}function mM(n,e,t){return{duration:n,delay:e,easing:t}}function yM(n,e,t,r,i,a,u=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:g}}class fT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const HU=new RegExp(":enter","g"),GU=new RegExp(":leave","g");function _M(n,e,t,r,i,a=new Map,u=new Map,g,v,b=[]){return(new zU).buildKeyframes(n,e,t,r,i,a,u,g,v,b)}class zU{buildKeyframes(e,t,r,i,a,u,g,v,b,S=[]){b=b||new fT;const P=new vM(e,t,b,i,a,S,[]);P.options=v;const L=v.delay?Kd(v.delay):0;P.currentTimeline.delayNextStep(L),P.currentTimeline.setStyles([u],null,P.errors,v),Vo(this,r,P);const $=P.timelines.filter(Y=>Y.containsAnimation());if($.length&&g.size){let Y;for(let ue=$.length-1;ue>=0;ue--){const ge=$[ue];if(ge.element===t){Y=ge;break}}Y&&!Y.allowOnlyTimelineStyles()&&Y.setStyles([g],null,P.errors,v)}return $.length?$.map(Y=>Y.buildKeyframes()):[yM(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const u="number"==typeof a?a:Kd(I0(a,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Kd(r.duration):null,g=null!=r.delay?Kd(r.delay):null;return 0!==u&&e.forEach(v=>{const b=t.appendInstructionToTimeline(v,u,g);a=Math.max(a,b.duration+b.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Vo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pT);const u=Kd(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Vo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Kd(e.options.delay):0;e.steps.forEach(u=>{const g=t.createSubContext(e.options);a&&g.delayNextStep(a),Vo(this,u,g),i=Math.max(i,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return oT(t.params?I0(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*a),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Kd(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pT);let u=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((b,S)=>{t.currentQueryIndex=S;const P=t.createSubContext(e.options,b);a&&P.delayNextStep(a),b===t.element&&(v=P.currentTimeline),Vo(this,e.animation,P),P.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,P.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),g=u*(t.currentQueryTotal-1);let v=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const P=S.currentTime;Vo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-P+(i.startTime-r.currentTimeline.startTime)}}const pT={};class vM{constructor(e,t,r,i,a,u,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new gT(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Kd(r.duration)),null!=r.delay&&(i.delay=Kd(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(g=>{(!t||!u.hasOwnProperty(g))&&(u[g]=I0(a[g],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new vM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=pT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new qU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let g=[];if(i&&g.push(this.element),e.length>0){e=(e=e.replace(HU,"."+this._enterClassName)).replace(GU,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),g.push(...b)}return!a&&0==g.length&&u.push(function Y2(n){return new f.vHH(3014,!1)}()),g}}class gT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Wd),this._currentKeyframe.set(t,Wd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},u=function WU(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,Wd)}else lp(i,t)}),t}(e,this._globalTimelineStyles);for(let[g,v]of u){const b=I0(v,a,r);this._pendingStyles.set(g,b),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??Wd),this._updateStyle(g,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((g,v)=>{const b=lp(g,new Map,this._backFill);b.forEach((S,P)=>{"!"===S?e.add(P):S===Wd&&t.add(P)}),r||b.set("offset",v/this.duration),i.push(b)});const a=e.size?aT(e.values()):[],u=t.size?aT(t.values()):[];if(r){const g=i[0],v=new Map(g);g.set("offset",0),v.set("offset",1),i=[g,v]}return yM(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class qU extends gT{constructor(e,t,r,i,a,u,g=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=g,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,g=t/u,v=lp(e[0]);v.set("offset",0),a.push(v);const b=lp(e[0]);b.set("offset",JR(g)),a.push(b);const S=e.length-1;for(let P=1;P<=S;P++){let L=lp(e[P]);const $=L.get("offset");L.set("offset",JR((t+$*r)/u)),a.push(L)}r=u,t=0,i="",e=a}return yM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function JR(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wM{}const KU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ZU extends wM{normalizePropertyName(e,t){return pM(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(KU.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&i.push(function U2(n,e){return new f.vHH(3005,!1)}())}return u+a}}function XR(n,e,t,r,i,a,u,g,v,b,S,P,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:g,queriedElements:v,preStyleProps:b,postStyleProps:S,totalTime:P,errors:L}}const EM={};class eO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function YU(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,u,g,v,b,S){const P=[],L=this.ast.options&&this.ast.options.params||EM,Y=this.buildStyles(r,g&&g.params||EM,P),ue=v&&v.params||EM,ge=this.buildStyles(i,ue,P),Ue=new Set,Ze=new Map,Qe=new Map,it="void"===i,Ft={params:QU(ue,L),delay:this.ast.options?.delay},Lt=S?[]:_M(e,t,this.ast.animation,a,u,Y,ge,Ft,b,P);let vn=0;if(Lt.forEach(La=>{vn=Math.max(La.duration+La.delay,vn)}),P.length)return XR(t,this._triggerName,r,i,it,Y,ge,[],[],Ze,Qe,vn,P);Lt.forEach(La=>{const Zd=La.element,gO=Lo(Ze,Zd,new Set);La.preStyleProps.forEach(Rm=>gO.add(Rm));const C0=Lo(Qe,Zd,new Set);La.postStyleProps.forEach(Rm=>C0.add(Rm)),Zd!==t&&Ue.add(Zd)});const Wi=aT(Ue.values());return XR(t,this._triggerName,r,i,it,Y,ge,Lt,Wi,Ze,Qe,vn)}}function QU(n,e){const t=w0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class JU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=w0(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!==u&&(i[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,g)=>{u&&(u=I0(u,i,t));const v=this.normalizer.normalizePropertyName(g,t);u=this.normalizer.normalizeStyleValue(g,v,u,t),r.set(v,u)})}),r}}class eB{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new JU(i.style,i.options&&i.options.params||{},r))}),tO(this.states,"true","1"),tO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new eO(e,i,this.states))}),this.fallbackTransition=function tB(n,e,t){return new eO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function tO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const nB=new fT;class rB{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=gM(this._driver,t,r,[]);if(r.length)throw function rU(n){return new f.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=RR(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let u;const g=new Map;if(a?(u=_M(this._driver,t,a,cM,rT,new Map,new Map,r,nB,i),u.forEach(S=>{const P=Lo(g,S.element,new Map);S.postStyleProps.forEach(L=>P.set(L,null))})):(i.push(function iU(){return new f.vHH(3300,!1)}()),u=[]),i.length)throw function sU(n){return new f.vHH(3504,!1)}();g.forEach((S,P)=>{S.forEach((L,$)=>{S.set($,this._driver.computeStyle(P,$,Wd))})});const b=ap(u.map(S=>{const P=g.get(S.element);return this._buildPlayer(S,new Map,P)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function oU(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=oM(t,"","","");return iM(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const nO="ng-animate-queued",IM="ng-animate-disabled",lB=[],rO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},uB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ka="__ng_removed";class bM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function fB(n){return n??null}(r?e.value:e),r){const a=w0(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const b0="void",CM=new bM(b0);class cB{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Fa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function aU(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function lU(n){return new f.vHH(3303,!1)}();if(!function pB(n){return"start"==n||"done"==n}(r))throw function uU(n,e){return new f.vHH(3400,!1)}();const a=Lo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const g=Lo(this._engine.statesByElement,e,new Map);return g.has(t)||(Fa(e,iT),Fa(e,iT+"-"+t),g.set(t,CM)),()=>{this._engine.afterFlush(()=>{const v=a.indexOf(u);v>=0&&a.splice(v,1),this._triggers.has(t)||g.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function cU(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new TM(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(Fa(e,iT),Fa(e,iT+"-"+t),this._engine.statesByElement.set(e,g=new Map));let v=g.get(t);const b=new bM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&b.absorbOptions(v.options),g.set(t,b),v||(v=CM),b.value!==b0&&v.value===b.value){if(!function yB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(v.params,b.params)){const ue=[],ge=a.matchStyles(v.value,v.params,ue),Ue=a.matchStyles(b.value,b.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Pm(e,ge),fc(e,Ue)})}return}const L=Lo(this._engine.playersByElement,e,[]);L.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let $=a.matchTransition(v.value,b.value,e,b.params),Y=!1;if(!$){if(!i)return;$=a.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:$,fromState:v,toState:b,player:u,isFallbackTransition:Y}),Y||(Fa(e,nO),u.onStart(()=>{nv(e,nO)})),u.onDone(()=>{let ue=this.players.indexOf(u);ue>=0&&this.players.splice(ue,1);const ge=this._engine.playersByElement.get(e);if(ge){let Ue=ge.indexOf(u);Ue>=0&&ge.splice(Ue,1)}}),this.players.push(u),L.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,sT,!0);r.forEach(i=>{if(i[ka])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const g=[];if(a.forEach((v,b)=>{if(u.set(b,v.value),this._triggers.has(b)){const S=this.trigger(e,b,b0,i);S&&g.push(S)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&ap(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const v=this._triggers.get(u).fallbackTransition,b=r.get(u)||CM,S=new bM(b0),P=new TM(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:v,fromState:b,toState:S,player:P,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[ka];(!a||a===rO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Fa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(g=>{if(g.name==r.triggerName){const v=oM(a,r.triggerName,r.fromState.value,r.toState.value);v._data=e,iM(r.player,g.phase,v,g.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class dB{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new cB(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,g=this.driver.getParentElement(t);for(;g;){const v=i.get(g);if(v){const b=r.indexOf(v);r.splice(b+1,0,e),u=!0;break}g=this.driver.getParentElement(g)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(mT(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mT(t))return;const a=t[ka];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Fa(e,IM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),nv(e,IM))}removeNode(e,t,r,i){if(mT(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[ka]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return mT(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,sT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,dM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ap(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ka];if(t&&t.setForRemoval){if(e[ka]=rO,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Fa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ap(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function dU(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new fT,i=[],a=new Map,u=[],g=new Map,v=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(dt=>{S.add(dt);const Tt=this.driver.query(dt,".ng-animate-queued",!0);for(let Pt=0;Pt<Tt.length;Pt++)S.add(Tt[Pt])});const P=this.bodyNode,L=Array.from(this.statesByElement.keys()),$=oO(L,this.collectedEnterElements),Y=new Map;let ue=0;$.forEach((dt,Tt)=>{const Pt=cM+ue++;Y.set(Tt,Pt),dt.forEach(_n=>Fa(_n,Pt))});const ge=[],Ue=new Set,Ze=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const Tt=this.collectedLeaveElements[dt],Pt=Tt[ka];Pt&&Pt.setForRemoval&&(ge.push(Tt),Ue.add(Tt),Pt.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(_n=>Ue.add(_n)):Ze.add(Tt))}const Qe=new Map,it=oO(L,Array.from(Ue));it.forEach((dt,Tt)=>{const Pt=rT+ue++;Qe.set(Tt,Pt),dt.forEach(_n=>Fa(_n,Pt))}),e.push(()=>{$.forEach((dt,Tt)=>{const Pt=Y.get(Tt);dt.forEach(_n=>nv(_n,Pt))}),it.forEach((dt,Tt)=>{const Pt=Qe.get(Tt);dt.forEach(_n=>nv(_n,Pt))}),ge.forEach(dt=>{this.processLeaveNode(dt)})});const Ft=[],Lt=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Pt=>{const _n=Pt.player,Pi=Pt.element;if(Ft.push(_n),this.collectedEnterElements.length){const fs=Pi[ka];if(fs&&fs.setForMove){if(fs.previousTriggersValues&&fs.previousTriggersValues.has(Pt.triggerName)){const Om=fs.previousTriggersValues.get(Pt.triggerName),Va=this.statesByElement.get(Pt.element);if(Va&&Va.has(Pt.triggerName)){const vT=Va.get(Pt.triggerName);vT.value=Om,Va.set(Pt.triggerName,vT)}}return void _n.destroy()}}const pc=!P||!this.driver.containsElement(P,Pi),Uo=Qe.get(Pi),up=Y.get(Pi),_r=this._buildInstruction(Pt,r,up,Uo,pc);if(_r.errors&&_r.errors.length)return void Lt.push(_r);if(pc)return _n.onStart(()=>Pm(Pi,_r.fromStyles)),_n.onDestroy(()=>fc(Pi,_r.toStyles)),void i.push(_n);if(Pt.isFallbackTransition)return _n.onStart(()=>Pm(Pi,_r.fromStyles)),_n.onDestroy(()=>fc(Pi,_r.toStyles)),void i.push(_n);const _O=[];_r.timelines.forEach(fs=>{fs.stretchStartingKeyframe=!0,this.disabledNodes.has(fs.element)||_O.push(fs)}),_r.timelines=_O,r.append(Pi,_r.timelines),u.push({instruction:_r,player:_n,element:Pi}),_r.queriedElements.forEach(fs=>Lo(g,fs,[]).push(_n)),_r.preStyleProps.forEach((fs,Om)=>{if(fs.size){let Va=v.get(Om);Va||v.set(Om,Va=new Set),fs.forEach((vT,AM)=>Va.add(AM))}}),_r.postStyleProps.forEach((fs,Om)=>{let Va=b.get(Om);Va||b.set(Om,Va=new Set),fs.forEach((vT,AM)=>Va.add(AM))})});if(Lt.length){const dt=[];Lt.forEach(Tt=>{dt.push(function hU(n,e){return new f.vHH(3505,!1)}())}),Ft.forEach(Tt=>Tt.destroy()),this.reportError(dt)}const vn=new Map,Wi=new Map;u.forEach(dt=>{const Tt=dt.element;r.has(Tt)&&(Wi.set(Tt,Tt),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,vn))}),i.forEach(dt=>{const Tt=dt.element;this._getPreviousPlayers(Tt,!1,dt.namespaceId,dt.triggerName,null).forEach(_n=>{Lo(vn,Tt,[]).push(_n),_n.destroy()})});const La=ge.filter(dt=>lO(dt,v,b)),Zd=new Map;sO(Zd,this.driver,Ze,b,Wd).forEach(dt=>{lO(dt,v,b)&&La.push(dt)});const C0=new Map;$.forEach((dt,Tt)=>{sO(C0,this.driver,new Set(dt),v,"!")}),La.forEach(dt=>{const Tt=Zd.get(dt),Pt=C0.get(dt);Zd.set(dt,new Map([...Array.from(Tt?.entries()??[]),...Array.from(Pt?.entries()??[])]))});const Rm=[],mO=[],yO={};u.forEach(dt=>{const{element:Tt,player:Pt,instruction:_n}=dt;if(r.has(Tt)){if(S.has(Tt))return Pt.onDestroy(()=>fc(Tt,_n.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(_n.totalTime),void i.push(Pt);let Pi=yO;if(Wi.size>1){let Uo=Tt;const up=[];for(;Uo=Uo.parentNode;){const _r=Wi.get(Uo);if(_r){Pi=_r;break}up.push(Uo)}up.forEach(_r=>Wi.set(_r,Pi))}const pc=this._buildAnimation(Pt.namespaceId,_n,vn,a,C0,Zd);if(Pt.setRealPlayer(pc),Pi===yO)Rm.push(Pt);else{const Uo=this.playersByElement.get(Pi);Uo&&Uo.length&&(Pt.parentPlayer=ap(Uo)),i.push(Pt)}}else Pm(Tt,_n.fromStyles),Pt.onDestroy(()=>fc(Tt,_n.toStyles)),mO.push(Pt),S.has(Tt)&&i.push(Pt)}),mO.forEach(dt=>{const Tt=a.get(dt.element);if(Tt&&Tt.length){const Pt=ap(Tt);dt.setRealPlayer(Pt)}}),i.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<ge.length;dt++){const Tt=ge[dt],Pt=Tt[ka];if(nv(Tt,rT),Pt&&Pt.hasAnimation)continue;let _n=[];if(g.size){let pc=g.get(Tt);pc&&pc.length&&_n.push(...pc);let Uo=this.driver.query(Tt,dM,!0);for(let up=0;up<Uo.length;up++){let _r=g.get(Uo[up]);_r&&_r.length&&_n.push(..._r)}}const Pi=_n.filter(pc=>!pc.destroyed);Pi.length?gB(this,Tt,Pi):this.processLeaveNode(Tt)}return ge.length=0,Rm.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const Tt=this.players.indexOf(dt);this.players.splice(Tt,1)}),dt.play()}),Rm}elementContainsData(e,t){let r=!1;const i=t[ka];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(u=g)}else{const g=this.playersByElement.get(e);if(g){const v=!a||a==b0;g.forEach(b=>{b.queued||!v&&b.triggerName!=i||u.push(b)})}}return(r||i)&&(u=u.filter(g=>!(r&&r!=g.namespaceId||i&&i!=g.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const b=v.element,S=b!==a,P=Lo(r,b,[]);this._getPreviousPlayers(b,S,u,g,t.toState).forEach($=>{const Y=$.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),$.destroy(),P.push($)})}Pm(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const g=t.triggerName,v=t.element,b=[],S=new Set,P=new Set,L=t.timelines.map(Y=>{const ue=Y.element;S.add(ue);const ge=ue[ka];if(ge&&ge.removedBeforeQueried)return new v0(Y.duration,Y.delay);const Ue=ue!==v,Ze=function mB(n){const e=[];return aO(n,e),e}((r.get(ue)||lB).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ue),Qe=a.get(ue),it=u.get(ue),Ft=RR(0,this._normalizer,0,Y.keyframes,Qe,it),Lt=this._buildPlayer(Y,Ft,Ze);if(Y.subTimeline&&i&&P.add(ue),Ue){const vn=new TM(e,g,ue);vn.setRealPlayer(Lt),b.push(vn)}return Lt});b.forEach(Y=>{Lo(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function hB(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Y.element,Y))}),S.forEach(Y=>Fa(Y,HR));const $=ap(L);return $.onDestroy(()=>{S.forEach(Y=>nv(Y,HR)),fc(v,t.toStyles)}),P.forEach(Y=>{Lo(i,Y,[]).push($)}),$}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new v0(e.duration,e.delay)}}class TM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new v0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>iM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Lo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mT(n){return n&&1===n.nodeType}function iO(n,e){const t=n.style.display;return n.style.display=e??"none",t}function sO(n,e,t,r,i){const a=[];t.forEach(v=>a.push(iO(v)));const u=[];r.forEach((v,b)=>{const S=new Map;v.forEach(P=>{const L=e.computeStyle(b,P,i);S.set(P,L),(!L||0==L.length)&&(b[ka]=uB,u.push(b))}),n.set(b,S)});let g=0;return t.forEach(v=>iO(v,a[g++])),u}function oO(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(g){if(!g)return 1;let v=a.get(g);if(v)return v;const b=g.parentNode;return v=t.has(b)?b:i.has(b)?1:u(b),a.set(g,v),v}return e.forEach(g=>{const v=u(g);1!==v&&t.get(v).push(g)}),t}function Fa(n,e){n.classList?.add(e)}function nv(n,e){n.classList?.remove(e)}function gB(n,e,t){ap(t).onDone(()=>n.processLeaveNode(e))}function aO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof MR?aO(r.players,e):e.push(r)}}function lO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class yT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new dB(e,t,r),this._timelineEngine=new rB(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let g=this._triggerCache[u];if(!g){const v=[],S=gM(this._driver,a,v,[]);if(v.length)throw function tU(n,e){return new f.vHH(3404,!1)}();g=function XU(n,e,t){return new eB(n,e,t)}(i,S,this._normalizer),this._triggerCache[u]=g}this._transitionEngine.registerTrigger(t,i,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=OR(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,g]=OR(r);return this._timelineEngine.listen(u,t,g,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let vB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&fc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fc(this._element,this._initialStyles),this._endStyles&&(fc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pm(this._element,this._endStyles),this._endStyles=null),fc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function DM(n){let e=null;return n.forEach((t,r)=>{(function wB(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:KR(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EB{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return VR(e,t)}getParentElement(e){return lM(e)}query(e,t,r){return UR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const v={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(v.easing=a);const b=new Map,S=u.filter($=>$ instanceof uO);(function TU(n,e){return 0===n||0===e})(r,i)&&S.forEach($=>{$.currentSnapshot.forEach((Y,ue)=>b.set(ue,Y))});let P=function EU(n){return n.length?n[0]instanceof Map?n:n.map(e=>$R(e)):[]}(t).map($=>lp($));P=function DU(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,u)=>{r.has(u)||i.push(u),r.set(u,a)}),i.length)for(let a=1;a<e.length;a++){let u=e[a];i.forEach(g=>u.set(g,KR(n,g)))}}return e}(e,P,b);const L=function _B(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=DM(e[0]),e.length>1&&(r=DM(e[e.length-1]))):e instanceof Map&&(t=DM(e)),t||r?new vB(n,t,r):null}(e,P);return new uO(e,P,v,L)}}let IB=(()=>{class n extends CR{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?SR(t):t;return cO(this._renderer,null,r,"register",[i]),new bB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class bB extends class QV{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new CB(this._id,e,t||{},this._renderer)}}class CB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const dO="@.disabled";let TB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const g=u?.parentNode(a);g&&u.removeChild(g,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(a);return S||(S=new hO("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,S)),S}const u=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(u,g,t,S.name,S)};return r.data.animation.forEach(v),new DB(this,g,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,g]=a;u(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(yT),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class hO{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==dO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class DB extends hO{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function SB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function AB(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let MB=(()=>{class n extends yT{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye),f.LFG(uM),f.LFG(wM),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fO=[{provide:CR,useClass:IB},{provide:wM,useFactory:function xB(){return new ZU}},{provide:yT,useClass:MB},{provide:f.FYo,useFactory:function PB(n,e,t){return new TB(n,e,t)},deps:[mo,yT,f.R0b]}],SM=[{provide:uM,useFactory:()=>new EB},{provide:f.QbO,useValue:"BrowserAnimations"},...fO],pO=[{provide:uM,useClass:BR},{provide:f.QbO,useValue:"NoopAnimations"},...fO];let NB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?pO:SM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:SM,imports:[bh]}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[p2]}),n.\u0275inj=f.cJS({providers:[ca,ql],imports:[bh,NB,kV,YV,br.hO.initializeApp(PR_firebase),j1,Z1,jV,HV,f2,S2,R2,NL.forRoot({prefix:"my-app",storageType:"localStorage"})]}),n})();(0,f.G48)(),Eh().bootstrapModule(RB).catch(n=>console.error(n))},1879:(at,Te,V)=>{V.d(Te,{Dh:()=>le,GT:()=>K,cc:()=>Ee,hO:()=>ie,on:()=>F,pX:()=>oe,xv:()=>te});var f=V(2560),X=V(1181),k=V(8189);at=V.hmd(at);const re=["ngOnDestroy"],oe=(we,Ke,ke,ze={})=>new Proxy(we,{get:(Et,Nt)=>ke.runOutsideAngular(()=>{var fn;if(we[Nt])return!(null===(fn=ze?.spy)||void 0===fn)&&fn.get&&ze.spy.get(Nt,we[Nt]),we[Nt];if(re.indexOf(Nt)>-1)return()=>{};const wt=Ke.toPromise().then(Kt=>{const lt=Kt&&Kt[Nt];return"function"==typeof lt?lt.bind(Kt):lt&&lt.then?lt.then(Ut=>ke.run(()=>Ut)):ke.run(()=>lt)});return new Proxy(()=>{},{get:(Kt,lt)=>wt[lt],apply:(Kt,lt,Ut)=>wt.then(bt=>{var qt;const tt=bt&&bt(...Ut);return!(null===(qt=ze?.spy)||void 0===qt)&&qt.apply&&ze.spy.apply(Nt,Ut,tt),tt})})})}),K=(we,Ke)=>{Ke.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(ze=>{Object.defineProperty(we.prototype,ze,Object.getOwnPropertyDescriptor(ke.prototype||ke,ze))})})};class ye{constructor(Ke){return Ke}}const le=new f.OlP("angularfire2.app.options"),te=new f.OlP("angularfire2.app.name");function F(we,Ke,ke){const Et="object"==typeof ke&&ke||{};Et.name=Et.name||"string"==typeof ke&&ke||"[DEFAULT]";const fn=X.Z.apps.filter(wt=>wt&&wt.name===Et.name)[0]||Ke.runOutsideAngular(()=>X.Z.initializeApp(we,Et));try{JSON.stringify(we)!==JSON.stringify(fn.options)&&j("error",`${fn.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(fn)}const j=(we,...Ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...Ke)},B={provide:ye,useFactory:F,deps:[le,f.R0b,[new f.FiY,te]]};let ie=(()=>{class we{constructor(ke){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,ke.toString())}static initializeApp(ke,ze){return{ngModule:we,providers:[{provide:le,useValue:ke},{provide:te,useValue:ze}]}}}return we.\u0275fac=function(ke){return new(ke||we)(f.LFG(f.Lbi))},we.\u0275mod=f.oAB({type:we}),we.\u0275inj=f.cJS({providers:[B]}),we})();function Ee(we,Ke,ke,ze,Et){const[,Nt,fn]=globalThis.\u0275AngularfireInstanceCache.find(wt=>wt[0]===we)||[];if(Nt)return function Ae(we,Ke){try{return we.toString()===Ke.toString()}catch{return we===Ke}}(Et,fn)||(fe("error",`${Ke} was already initialized on the ${ke} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Et,was:fn})),Nt;{const wt=ze();return globalThis.\u0275AngularfireInstanceCache.push([we,wt,Et]),wt}}const xe=!!at.hot,fe=(we,...Ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8189:(at,Te,V)=>{V.d(Te,{q4:()=>ml,iC:()=>Bc,HU:()=>kh,vb:()=>zt,JM:()=>wo});var f=V(2560),X=V(2779),k=V(1670),re=V(5402),oe=V(7748),K=V(4692),ye=V(8118);let te,F;const ie=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,xe=new WeakMap,fe=new WeakMap;let ke={get(E,C,x){if(E instanceof IDBTransaction){if("done"===C)return Ee.get(E);if("objectStoreNames"===C)return E.objectStoreNames||Ae.get(E);if("store"===C)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return fn(E[C])},set:(E,C,x)=>(E[C]=x,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function Nt(E){return"function"==typeof E?function Et(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function B(){return F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(wt(this),C),fn(ie.get(this))}:function(...C){return fn(E.apply(wt(this),C))}:function(C,...x){const R=E.call(wt(this),C,...x);return Ae.set(R,C.sort?C.sort():[C]),fn(R)}}(E):(E instanceof IDBTransaction&&function Ke(E){if(Ee.has(E))return;const C=new Promise((x,R)=>{const z=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",he),E.removeEventListener("abort",he)},Q=()=>{x(),z()},he=()=>{R(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",Q),E.addEventListener("error",he),E.addEventListener("abort",he)});Ee.set(E,C)}(E),((E,C)=>C.some(x=>E instanceof x))(E,function j(){return te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ke):E)}function fn(E){if(E instanceof IDBRequest)return function we(E){const C=new Promise((x,R)=>{const z=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",he)},Q=()=>{x(fn(E.result)),z()},he=()=>{R(E.error),z()};E.addEventListener("success",Q),E.addEventListener("error",he)});return C.then(x=>{x instanceof IDBCursor&&ie.set(x,E)}).catch(()=>{}),fe.set(C,E),C}(E);if(xe.has(E))return xe.get(E);const C=Nt(E);return C!==E&&(xe.set(E,C),fe.set(C,E)),C}const wt=E=>fe.get(E),Ut=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],qt=new Map;function tt(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(qt.get(C))return qt.get(C);const x=C.replace(/FromIndex$/,""),R=C!==x,z=bt.includes(x);if(!(x in(R?IDBIndex:IDBObjectStore).prototype)||!z&&!Ut.includes(x))return;const Q=function(){var he=(0,k.Z)(function*(Re,...Ve){const We=this.transaction(Re,z?"readwrite":"readonly");let It=We.store;return R&&(It=It.index(Ve.shift())),(yield Promise.all([It[x](...Ve),z&&We.done]))[0]});return function(Ve){return he.apply(this,arguments)}}();return qt.set(C,Q),Q}!function ze(E){ke=E(ke)}(E=>({...E,get:(C,x,R)=>tt(C,x)||E.get(C,x,R),has:(C,x)=>!!tt(C,x)||E.has(C,x)}));const Bo="@firebase/installations",Ba="w:0.6.4",Jn="FIS_v2",xr=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Tn(E){return E instanceof oe.ZR&&E.code.includes("request-failed")}function mi({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function mc(E){return{token:E.token,requestStatus:2,expiresIn:Wl(E.expiresIn),creationTime:Date.now()}}function Pr(E,C){return ja.apply(this,arguments)}function ja(){return(ja=(0,k.Z)(function*(E,C){const R=(yield C.json()).error;return xr.create("request-failed",{requestName:E,serverCode:R.code,serverMessage:R.message,serverStatus:R.status})})).apply(this,arguments)}function jo({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Ho(E,{refreshToken:C}){const x=jo(E);return x.append("Authorization",function so(E){return`${Jn} ${E}`}(C)),x}function Ki(E){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,k.Z)(function*(E){const C=yield E();return C.status>=500&&C.status<600?E():C})).apply(this,arguments)}function Wl(E){return Number(E.replace("s","000"))}function Xe(E,C){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:C},{fid:x}){const R=mi(E),z=jo(E),Q=C.getImmediate({optional:!0});if(Q){const We=yield Q.getHeartbeatsHeader();We&&z.append("x-firebase-client",We)}const Re={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:Jn,appId:E.appId,sdkVersion:Ba})},Ve=yield Ki(()=>fetch(R,Re));if(Ve.ok){const We=yield Ve.json();return{fid:We.fid||x,registrationStatus:2,refreshToken:We.refreshToken,authToken:mc(We.authToken)}}throw yield Pr("Create Installation",Ve)})).apply(this,arguments)}function Dn(E){return new Promise(C=>{setTimeout(C,E)})}const oo=/^[cdef][\w-]{21}$/;function Xn(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function Ie(E){return function Jt(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return oo.test(x)?x:""}catch{return""}}function Ot(E){return`${E.appName}!${E.appId}`}const qe=new Map;function st(E,C){const x=Ot(E);yi(x,C),function Or(E,C){const x=function er(){return!ft&&"BroadcastChannel"in self&&(ft=new BroadcastChannel("[Firebase] FID Change"),ft.onmessage=E=>{yi(E.data.key,E.data.fid)}),ft}();x&&x.postMessage({key:E,fid:C}),function gn(){0===qe.size&&ft&&(ft.close(),ft=null)}()}(x,C)}function yi(E,C){const x=qe.get(E);if(x)for(const R of x)R(C)}let ft=null;const kt="firebase-installations-store";let jt=null;function ps(){return jt||(jt=function Kt(E,C,{blocked:x,upgrade:R,blocking:z,terminated:Q}={}){const he=indexedDB.open(E,C),Re=fn(he);return R&&he.addEventListener("upgradeneeded",Ve=>{R(fn(he.result),Ve.oldVersion,Ve.newVersion,fn(he.transaction))}),x&&he.addEventListener("blocked",()=>x()),Re.then(Ve=>{Q&&Ve.addEventListener("close",()=>Q()),z&&Ve.addEventListener("versionchange",()=>z())}).catch(()=>{}),Re}("firebase-installations-database",1,{upgrade:(E,C)=>{0===C&&E.createObjectStore(kt)}})),jt}function vr(E,C){return _i.apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(E,C){const x=Ot(E),z=(yield ps()).transaction(kt,"readwrite"),Q=z.objectStore(kt),he=yield Q.get(x);return yield Q.put(C,x),yield z.done,(!he||he.fid!==C.fid)&&st(E,C.fid),C})).apply(this,arguments)}function cr(E){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,k.Z)(function*(E){const C=Ot(E),R=(yield ps()).transaction(kt,"readwrite");yield R.objectStore(kt).delete(C),yield R.done})).apply(this,arguments)}function kr(E,C){return gs.apply(this,arguments)}function gs(){return(gs=(0,k.Z)(function*(E,C){const x=Ot(E),z=(yield ps()).transaction(kt,"readwrite"),Q=z.objectStore(kt),he=yield Q.get(x),Re=C(he);return void 0===Re?yield Q.delete(x):yield Q.put(Re,x),yield z.done,Re&&(!he||he.fid!==Re.fid)&&st(E,Re.fid),Re})).apply(this,arguments)}function G(E){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(E){let C;const x=yield kr(E.appConfig,R=>{const z=Z(R),Q=de(E,z);return C=Q.registrationPromise,Q.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Z(E){return Oe(E||{fid:Xn(),registrationStatus:0})}function de(E,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(xr.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},R=function J(E,C){return Be.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:R}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:_t(E)}:{installationEntry:C}}function Be(){return(Be=(0,k.Z)(function*(E,C){try{const x=yield Xe(E,C);return vr(E.appConfig,x)}catch(x){throw Tn(x)&&409===x.customData.serverCode?yield cr(E.appConfig):yield vr(E.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function _t(E){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,k.Z)(function*(E){let C=yield mn(E.appConfig);for(;1===C.registrationStatus;)yield Dn(100),C=yield mn(E.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:R}=yield G(E);return R||x}return C})).apply(this,arguments)}function mn(E){return kr(E,C=>{if(!C)throw xr.create("installation-not-found");return Oe(C)})}function Oe(E){return function nt(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function rt(E,C){return tn.apply(this,arguments)}function tn(){return(tn=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:C},x){const R=wr(E,x),z=Ho(E,x),Q=C.getImmediate({optional:!0});if(Q){const We=yield Q.getHeartbeatsHeader();We&&z.append("x-firebase-client",We)}const Re={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Ba,appId:E.appId}})},Ve=yield Ki(()=>fetch(R,Re));if(Ve.ok)return mc(yield Ve.json());throw yield Pr("Generate Auth Token",Ve)})).apply(this,arguments)}function wr(E,{fid:C}){return`${mi(E)}/${C}/authTokens:generate`}function Gt(E){return ii.apply(this,arguments)}function ii(){return(ii=(0,k.Z)(function*(E,C=!1){let x;const R=yield kr(E.appConfig,Q=>{if(!xt(Q))throw xr.create("not-registered");const he=Q.authToken;if(!C&&Zt(he))return Q;if(1===he.requestStatus)return x=ae(E,C),Q;{if(!navigator.onLine)throw xr.create("app-offline");const Re=Bt(Q);return x=Me(E,Re),Re}});return x?yield x:R.authToken})).apply(this,arguments)}function ae(E,C){return ne.apply(this,arguments)}function ne(){return(ne=(0,k.Z)(function*(E,C){let x=yield Se(E.appConfig);for(;1===x.authToken.requestStatus;)yield Dn(100),x=yield Se(E.appConfig);const R=x.authToken;return 0===R.requestStatus?Gt(E,C):R})).apply(this,arguments)}function Se(E){return kr(E,C=>{if(!xt(C))throw xr.create("not-registered");return function zr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Me(E,C){return gt.apply(this,arguments)}function gt(){return(gt=(0,k.Z)(function*(E,C){try{const x=yield rt(E,C),R=Object.assign(Object.assign({},C),{authToken:x});return yield vr(E.appConfig,R),x}catch(x){if(!Tn(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const R=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield vr(E.appConfig,R)}else yield cr(E.appConfig);throw x}})).apply(this,arguments)}function xt(E){return void 0!==E&&2===E.registrationStatus}function Zt(E){return 2===E.requestStatus&&!function Rn(E){const C=Date.now();return C<E.creationTime||E.creationTime+E.expiresIn<C+36e5}(E)}function Bt(E){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:C})}function dr(){return(dr=(0,k.Z)(function*(E){const C=E,{installationEntry:x,registrationPromise:R}=yield G(C);return R?R.catch(console.error):Gt(C).catch(console.error),x.fid})).apply(this,arguments)}function Yi(){return(Yi=(0,k.Z)(function*(E,C=!1){const x=E;return yield an(x),(yield Gt(x,C)).token})).apply(this,arguments)}function an(E){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,k.Z)(function*(E){const{registrationPromise:C}=yield G(E);C&&(yield C)})).apply(this,arguments)}function tr(E){return xr.create("missing-app-config-values",{valueName:E})}const nr="installations",Ha=E=>{const C=E.getProvider("app").getImmediate(),x=function Qd(E){if(!E||!E.options)throw tr("App Configuration");if(!E.name)throw tr("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!E.options[x])throw tr(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ys=E=>{const C=E.getProvider("app").getImmediate(),x=(0,re._getProvider)(C,nr).getImmediate();return{getId:()=>function si(E){return dr.apply(this,arguments)}(x),getToken:z=>function vi(E){return Yi.apply(this,arguments)}(x,z)}};(function Qi(){(0,re._registerComponent)(new K.wA(nr,Ha,"PUBLIC")),(0,re._registerComponent)(new K.wA("installations-internal",ys,"PRIVATE"))})(),(0,re.registerVersion)(Bo,"0.6.4"),(0,re.registerVersion)(Bo,"0.6.4","esm2017");const Kl="@firebase/remote-config",Mn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ic{constructor(C,x,R,z){this.client=C,this.storage=x,this.storageCache=R,this.logger=z}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const R=Date.now()-x,z=R<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${R}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${z}.`),z}fetch(C){var x=this;return(0,k.Z)(function*(){const[R,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(C.cacheMaxAgeMillis,R))return z;C.eTag=z&&z.eTag;const Q=yield x.client.fetch(C),he=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&he.push(x.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(he),Q})()}}function sh(E=navigator){return E.languages&&E.languages[0]||E.language}class Zl{constructor(C,x,R,z,Q,he){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=R,this.projectId=z,this.apiKey=Q,this.appId=he}fetch(C){var x=this;return(0,k.Z)(function*(){const[R,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Re={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ve={sdk_version:x.sdkVersion,app_instance_id:R,app_instance_id_token:z,app_id:x.appId,language_code:sh()},We={method:"POST",headers:Re,body:JSON.stringify(Ve)},It=fetch(he,We),ut=new Promise((Br,Ti)=>{C.signal.addEventListener(()=>{const ar=new Error("The operation was aborted.");ar.name="AbortError",Ti(ar)})});let or;try{yield Promise.race([It,ut]),or=yield It}catch(Br){let Ti="fetch-client-network";throw"AbortError"===Br?.name&&(Ti="fetch-timeout"),Mn.create(Ti,{originalErrorMessage:Br?.message})}let Yn=or.status;const vl=or.headers.get("ETag")||void 0;let An,Gs;if(200===or.status){let Br;try{Br=yield or.json()}catch(Ti){throw Mn.create("fetch-client-parse",{originalErrorMessage:Ti?.message})}An=Br.entries,Gs=Br.state}if("INSTANCE_STATE_UNSPECIFIED"===Gs?Yn=500:"NO_CHANGE"===Gs?Yn=304:("NO_TEMPLATE"===Gs||"EMPTY_CONFIG"===Gs)&&(An={}),304!==Yn&&200!==Yn)throw Mn.create("fetch-status",{httpStatus:Yn});return{status:Yn,eTag:vl,config:An}})()}}class ah{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,k.Z)(function*(){const R=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,R)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:R}){var z=this;return(0,k.Z)(function*(){yield function Yl(E,C){return new Promise((x,R)=>{const z=Math.max(C-Date.now(),0),Q=setTimeout(x,z);E.addEventListener(()=>{clearTimeout(Q),R(Mn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const Q=yield z.client.fetch(C);return yield z.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function oh(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Q))throw Q;const he={throttleEndTimeMillis:Date.now()+(0,oe.$s)(R),backoffCount:R+1};return yield z.storage.setThrottleMetadata(he),z.attemptFetch(C,he)}})()}}class lh{constructor(C,x,R,z,Q){this.app=C,this._client=x,this._storageCache=R,this._storage=z,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hr(E,C){const x=E.target.error||void 0;return Mn.create(C,{originalErrorMessage:x&&x?.message})}const Ji="app_namespace_store";class gp{constructor(C,x,R,z=function ch(){return new Promise((E,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=R=>{C(hr(R,"storage-open"))},x.onsuccess=R=>{E(R.target.result)},x.onupgradeneeded=R=>{0===R.oldVersion&&R.target.result.createObjectStore(Ji,{keyPath:"compositeKey"})}}catch(x){C(Mn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=R,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,k.Z)(function*(){const R=yield x.openDbPromise;return new Promise((z,Q)=>{const Re=R.transaction([Ji],"readonly").objectStore(Ji),Ve=x.createCompositeKey(C);try{const We=Re.get(Ve);We.onerror=It=>{Q(hr(It,"storage-get"))},We.onsuccess=It=>{const ut=It.target.result;z(ut?ut.value:void 0)}}catch(We){Q(Mn.create("storage-get",{originalErrorMessage:We?.message}))}})})()}set(C,x){var R=this;return(0,k.Z)(function*(){const z=yield R.openDbPromise;return new Promise((Q,he)=>{const Ve=z.transaction([Ji],"readwrite").objectStore(Ji),We=R.createCompositeKey(C);try{const It=Ve.put({compositeKey:We,value:x});It.onerror=ut=>{he(hr(ut,"storage-set"))},It.onsuccess=()=>{Q()}}catch(It){he(Mn.create("storage-set",{originalErrorMessage:It?.message}))}})})()}delete(C){var x=this;return(0,k.Z)(function*(){const R=yield x.openDbPromise;return new Promise((z,Q)=>{const Re=R.transaction([Ji],"readwrite").objectStore(Ji),Ve=x.createCompositeKey(C);try{const We=Re.delete(Ve);We.onerror=It=>{Q(hr(It,"storage-delete"))},We.onsuccess=()=>{z()}}catch(We){Q(Mn.create("storage-delete",{originalErrorMessage:We?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Ln{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const x=C.storage.getLastFetchStatus(),R=C.storage.getLastSuccessfulFetchTimestampMillis(),z=C.storage.getActiveConfig(),Q=yield x;Q&&(C.lastFetchStatus=Q);const he=yield R;he&&(C.lastSuccessfulFetchTimestampMillis=he);const Re=yield z;Re&&(C.activeConfig=Re)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Lr(){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,k.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}let ks,rr;!function Jl(){(0,re._registerComponent)(new K.wA("remote-config",function E(C,{instanceIdentifier:x}){const R=C.getProvider("app").getImmediate(),z=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mn.create("registration-window");if(!(0,oe.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:Q,apiKey:he,appId:Re}=R.options;if(!Q)throw Mn.create("registration-project-id");if(!he)throw Mn.create("registration-api-key");if(!Re)throw Mn.create("registration-app-id");const Ve=new gp(Re,R.name,x=x||"firebase"),We=new Ln(Ve),It=new ye.Yd(Kl);It.logLevel=ye.in.ERROR;const ut=new Zl(z,re.SDK_VERSION,x,Q,he,Re),or=new ah(ut,Ve),Yn=new Ic(or,Ve,We,It),vl=new lh(R,Yn,We,Ve,It);return function Fm(E){const C=(0,oe.m9)(E);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(vl),vl},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Kl,"0.4.4"),(0,re.registerVersion)(Kl,"0.4.4","esm2017")}();const dh=new WeakMap,Ei=new WeakMap,qo=new WeakMap,uo=new WeakMap,pt=new WeakMap;let fh={get(E,C,x){if(E instanceof IDBTransaction){if("done"===C)return Ei.get(E);if("objectStoreNames"===C)return E.objectStoreNames||qo.get(E);if("store"===C)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ws(E[C])},set:(E,C,x)=>(E[C]=x,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function eu(E){return"function"==typeof E?function yp(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function zo(){return rr||(rr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(tu(this),C),ws(dh.get(this))}:function(...C){return ws(E.apply(tu(this),C))}:function(C,...x){const R=E.call(tu(this),C,...x);return qo.set(R,C.sort?C.sort():[C]),ws(R)}}(E):(E instanceof IDBTransaction&&function hh(E){if(Ei.has(E))return;const C=new Promise((x,R)=>{const z=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",he),E.removeEventListener("abort",he)},Q=()=>{x(),z()},he=()=>{R(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",Q),E.addEventListener("error",he),E.addEventListener("abort",he)});Ei.set(E,C)}(E),((E,C)=>C.some(x=>E instanceof x))(E,function Vm(){return ks||(ks=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,fh):E)}function ws(E){if(E instanceof IDBRequest)return function Xi(E){const C=new Promise((x,R)=>{const z=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",he)},Q=()=>{x(ws(E.result)),z()},he=()=>{R(E.error),z()};E.addEventListener("success",Q),E.addEventListener("error",he)});return C.then(x=>{x instanceof IDBCursor&&dh.set(x,E)}).catch(()=>{}),pt.set(C,E),C}(E);if(uo.has(E))return uo.get(E);const C=eu(E);return C!==E&&(uo.set(E,C),pt.set(C,E)),C}const tu=E=>pt.get(E);function Ce(E,C,{blocked:x,upgrade:R,blocking:z,terminated:Q}={}){const he=indexedDB.open(E,C),Re=ws(he);return R&&he.addEventListener("upgradeneeded",Ve=>{R(ws(he.result),Ve.oldVersion,Ve.newVersion,ws(he.transaction))}),x&&he.addEventListener("blocked",()=>x()),Re.then(Ve=>{Q&&Ve.addEventListener("close",()=>Q()),z&&Ve.addEventListener("versionchange",()=>z())}).catch(()=>{}),Re}function Vt(E,{blocked:C}={}){const x=indexedDB.deleteDatabase(E);return C&&x.addEventListener("blocked",()=>C()),ws(x).then(()=>{})}const ph=["get","getKey","getAll","getAllKeys","count"],gh=["put","add","delete","clear"],On=new Map;function Es(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(On.get(C))return On.get(C);const x=C.replace(/FromIndex$/,""),R=C!==x,z=gh.includes(x);if(!(x in(R?IDBIndex:IDBObjectStore).prototype)||!z&&!ph.includes(x))return;const Q=function(){var he=(0,k.Z)(function*(Re,...Ve){const We=this.transaction(Re,z?"readwrite":"readonly");let It=We.store;return R&&(It=It.index(Ve.shift())),(yield Promise.all([It[x](...Ve),z&&We.done]))[0]});return function(Ve){return he.apply(this,arguments)}}();return On.set(C,Q),Q}!function es(E){fh=E(fh)}(E=>({...E,get:(C,x,R)=>Es(C,x)||E.get(C,x,R),has:(C,x)=>!!Es(C,x)||E.has(C,x)}));const Ga="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",Fs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bc="google.c.a.c_id",ln="google.c.a.c_l",nu="google.c.a.ts",Wo="google.c.a.e";var Wr=(()=>{return(E=Wr||(Wr={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",Wr;var E})();function ns(E){const C=new Uint8Array(E);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function za(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),R=atob(x),z=new Uint8Array(R.length);for(let Q=0;Q<R.length;++Q)z[Q]=R.charCodeAt(Q);return z}const Er="fcm_token_details_db",qa="fcm_token_object_Store";function vp(E){return co.apply(this,arguments)}function co(){return co=(0,k.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Er))return null;let C=null;return(yield Ce(Er,5,{upgrade:(R=(0,k.Z)(function*(z,Q,he,Re){var Ve;if(Q<2||!z.objectStoreNames.contains(qa))return;const We=Re.objectStore(qa),It=yield We.index("fcmSenderId").get(E);if(yield We.clear(),It)if(2===Q){const ut=It;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;C={token:ut.fcmToken,createTime:null!==(Ve=ut.createTime)&&void 0!==Ve?Ve:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:ns(ut.vapidKey)}}}else if(3===Q){const ut=It;C={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:ns(ut.auth),p256dh:ns(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:ns(ut.vapidKey)}}}else if(4===Q){const ut=It;C={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:ns(ut.auth),p256dh:ns(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:ns(ut.vapidKey)}}}}),function(Q,he,Re,Ve){return R.apply(this,arguments)})})).close(),yield Vt(Er),yield Vt("fcm_vapid_details_db"),yield Vt("undefined"),Wa(C)?C:null;var R}),co.apply(this,arguments)}function Wa(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:C}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const oi="firebase-messaging-store";let ru=null;function Ko(){return ru||(ru=Ce("firebase-messaging-database",1,{upgrade:(E,C)=>{0===C&&E.createObjectStore(oi)}})),ru}function Zo(E){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,k.Z)(function*(E){const C=Ya(E),R=yield(yield Ko()).transaction(oi).objectStore(oi).get(C);if(R)return R;{const z=yield vp(E.appConfig.senderId);if(z)return yield Cc(E,z),z}})).apply(this,arguments)}function Cc(E,C){return Za.apply(this,arguments)}function Za(){return(Za=(0,k.Z)(function*(E,C){const x=Ya(E),z=(yield Ko()).transaction(oi,"readwrite");return yield z.objectStore(oi).put(C,x),yield z.done,C})).apply(this,arguments)}function iu(E){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,k.Z)(function*(E){const C=Ya(E),R=(yield Ko()).transaction(oi,"readwrite");yield R.objectStore(oi).delete(C),yield R.done})).apply(this,arguments)}function Ya({appConfig:E}){return E.appId}const en=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Is(E,C){return wn.apply(this,arguments)}function wn(){return(wn=(0,k.Z)(function*(E,C){const x=yield ou(E),R=Ja(C),z={method:"POST",headers:x,body:JSON.stringify(R)};let Q;try{Q=yield(yield fetch(su(E.appConfig),z)).json()}catch(he){throw en.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(Q.error)throw en.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw en.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function yh(E,C){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,k.Z)(function*(E,C){const x=yield ou(E),R=Ja(C.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(R)};let Q;try{Q=yield(yield fetch(`${su(E.appConfig)}/${C.token}`,z)).json()}catch(he){throw en.create("token-update-failed",{errorInfo:he?.toString()})}if(Q.error)throw en.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw en.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Tc(E,C){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,k.Z)(function*(E,C){const R={method:"DELETE",headers:yield ou(E)};try{const Q=yield(yield fetch(`${su(E.appConfig)}/${C}`,R)).json();if(Q.error)throw en.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(z){throw en.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function su({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function ou(E){return ho.apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*({appConfig:E,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ja({p256dh:E,auth:C,endpoint:x,vapidKey:R}){const z={web:{endpoint:x,auth:C,p256dh:E}};return R!==Fs&&(z.web.applicationPubKey=R),z}const Qo=6048e5;function _h(E){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,k.Z)(function*(E){const C=yield vh(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:C.endpoint,auth:ns(C.getKey("auth")),p256dh:ns(C.getKey("p256dh"))},R=yield Zo(E.firebaseDependencies);if(R){if(Ep(R.subscriptionOptions,x))return Date.now()>=R.createTime+Qo?Jo(E,{token:R.token,createTime:Date.now(),subscriptionOptions:x}):R.token;try{yield Tc(E.firebaseDependencies,R.token)}catch(z){console.warn(z)}return wp(E.firebaseDependencies,x)}return wp(E.firebaseDependencies,x)})).apply(this,arguments)}function el(E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,k.Z)(function*(E){const C=yield Zo(E.firebaseDependencies);C&&(yield Tc(E.firebaseDependencies,C.token),yield iu(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Jo(E,C){return fo.apply(this,arguments)}function fo(){return(fo=(0,k.Z)(function*(E,C){try{const x=yield yh(E.firebaseDependencies,C),R=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Cc(E.firebaseDependencies,R),x}catch(x){throw yield el(E),x}})).apply(this,arguments)}function wp(E,C){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,k.Z)(function*(E,C){const R={token:yield Is(E,C),createTime:Date.now(),subscriptionOptions:C};return yield Cc(E,R),R.token})).apply(this,arguments)}function vh(E,C){return au.apply(this,arguments)}function au(){return(au=(0,k.Z)(function*(E,C){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:za(C)})})).apply(this,arguments)}function Ep(E,C){return C.vapidKey===E.vapidKey&&C.endpoint===E.endpoint&&C.auth===E.auth&&C.p256dh===E.p256dh}function tl(E){const C={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function nl(E,C){if(!C.notification)return;E.notification={};const x=C.notification.title;x&&(E.notification.title=x);const R=C.notification.body;R&&(E.notification.body=R);const z=C.notification.image;z&&(E.notification.image=z);const Q=C.notification.icon;Q&&(E.notification.icon=Q)}(C,E),function Xo(E,C){!C.data||(E.data=C.data)}(C,E),function rl(E,C){var x,R,z,Q,he;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;E.fcmOptions={};const Re=null!==(z=null===(R=C.fcmOptions)||void 0===R?void 0:R.link)&&void 0!==z?z:null===(Q=C.notification)||void 0===Q?void 0:Q.click_action;Re&&(E.fcmOptions.link=Re);const Ve=null===(he=C.fcmOptions)||void 0===he?void 0:he.analytics_label;Ve&&(E.fcmOptions.analyticsLabel=Ve)}(C,E),C}function lu(E){return"object"==typeof E&&!!E&&bc in E}function ea(E,C){const x=[];for(let R=0;R<E.length;R++)x.push(E.charAt(R)),R<C.length&&x.push(C.charAt(R));return x.join("")}function cu(E){return en.create("missing-app-config-values",{valueName:E})}ea("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ea("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ta{constructor(C,x,R){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function uu(E){if(!E||!E.options)throw cu("App Configuration Object");if(!E.name)throw cu("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const R of C)if(!x[R])throw cu(R);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:z,installations:x,analyticsProvider:R}}_delete(){return Promise.resolve()}}function du(E){return Li.apply(this,arguments)}function Li(){return(Li=(0,k.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Ga,{scope:ts}),E.swRegistration.update().catch(()=>{})}catch(C){throw en.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function na(E,C){return bs.apply(this,arguments)}function bs(){return(bs=(0,k.Z)(function*(E,C){if(!C&&!E.swRegistration&&(yield du(E)),C||!E.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw en.create("invalid-sw-registration");E.swRegistration=C}})).apply(this,arguments)}function Ip(E,C){return rs.apply(this,arguments)}function rs(){return(rs=(0,k.Z)(function*(E,C){C?E.vapidKey=C:E.vapidKey||(E.vapidKey=Fs)})).apply(this,arguments)}function po(){return(po=(0,k.Z)(function*(E,C){if(!navigator)throw en.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw en.create("permission-blocked");return yield Ip(E,C?.vapidKey),yield na(E,C?.serviceWorkerRegistration),_h(E)})).apply(this,arguments)}function Ii(E,C,x){return ra.apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(E,C,x){const R=ia(C);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(R,{message_id:x[bc],message_name:x[ln],message_time:x[nu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ia(E){switch(E){case Wr.NOTIFICATION_CLICKED:return"notification_open";case Wr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sl(){return(sl=(0,k.Z)(function*(E,C){const x=C.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===Wr.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(tl(x)):E.onMessageHandler.next(tl(x)));const R=x.data;lu(R)&&"1"===R[Wo]&&(yield Ii(E,x.messageType,R))})).apply(this,arguments)}const go="@firebase/messaging",sa=E=>{const C=new ta(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function il(E,C){return sl.apply(this,arguments)}(C,x)),C},Sc=E=>{const C=E.getProvider("messaging").getImmediate();return{getToken:R=>function hu(E,C){return po.apply(this,arguments)}(C,R)}};function mo(){return Us.apply(this,arguments)}function Us(){return(Us=(0,k.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bp(){(0,re._registerComponent)(new K.wA("messaging",sa,"PUBLIC")),(0,re._registerComponent)(new K.wA("messaging-internal",Sc,"PRIVATE")),(0,re.registerVersion)(go,"0.12.4"),(0,re.registerVersion)(go,"0.12.4","esm2017")}();const pu="analytics",wh="firebase_id",Sp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bs="https://www.googletagmanager.com/gtag/js",Vn=new ye.Yd("@firebase/analytics"),Vr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ll(E){if(!E.startsWith(Bs)){const C=Vr.create("invalid-gtag-resource",{gtagURL:E});return Vn.warn(C.message),""}return E}function Zr(E){return Promise.all(E.map(C=>C.catch(x=>x)))}function Ih(E,C){const x=function Eh(E,C){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(E,C)),x}("firebase-js-sdk-policy",{createScriptURL:ll}),R=document.createElement("script"),z=`${Bs}?l=${E}&id=${C}`;R.src=x?x?.createScriptURL(z):z,R.async=!0,document.head.appendChild(R)}function Ap(E,C,x,R,z,Q){return bh.apply(this,arguments)}function bh(){return(bh=(0,k.Z)(function*(E,C,x,R,z,Q){const he=R[z];try{if(he)yield C[he];else{const Ve=(yield Zr(x)).find(We=>We.measurementId===z);Ve&&(yield C[Ve.appId])}}catch(Re){Vn.error(Re)}E("config",z,Q)})).apply(this,arguments)}function sv(E,C,x,R,z){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,k.Z)(function*(E,C,x,R,z){try{let Q=[];if(z&&z.send_to){let he=z.send_to;Array.isArray(he)||(he=[he]);const Re=yield Zr(x);for(const Ve of he){const We=Re.find(ut=>ut.measurementId===Ve),It=We&&C[We.appId];if(!It){Q=[];break}Q.push(It)}}0===Q.length&&(Q=Object.values(C)),yield Promise.all(Q),E("event",R,z||{})}catch(Q){Vn.error(Q)}})).apply(this,arguments)}function xp(E){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Bs)&&x.src.includes(E))return x;return null}const Zn=new class ov{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function gu(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Vi(E){return ul.apply(this,arguments)}function ul(){return(ul=(0,k.Z)(function*(E){var C;const{appId:x,apiKey:R}=E,z={method:"GET",headers:gu(R)},Q=Sp.replace("{app-id}",x),he=yield fetch(Q,z);if(200!==he.status&&304!==he.status){let Re="";try{const Ve=yield he.json();null!==(C=Ve.error)&&void 0!==C&&C.message&&(Re=Ve.error.message)}catch{}throw Vr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:Re})}return he.json()})).apply(this,arguments)}function Hm(E){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,k.Z)(function*(E,C=Zn,x){const{appId:R,apiKey:z,measurementId:Q}=E.options;if(!R)throw Vr.create("no-app-id");if(!z){if(Q)return{measurementId:Q,appId:R};throw Vr.create("no-api-key")}const he=C.getThrottleMetadata(R)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Re=new Un;return setTimeout((0,k.Z)(function*(){Re.abort()}),void 0!==x?x:6e4),Ui({appId:R,apiKey:z,measurementId:Q},he,Re,C)})).apply(this,arguments)}function Ui(E,C,x){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(E,{throttleEndTimeMillis:C,backoffCount:x},R,z=Zn){var Q;const{appId:he,measurementId:Re}=E;try{yield _o(R,C)}catch(Ve){if(Re)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Re} provided in the "measurementId" field in the local Firebase config. [${Ve?.message}]`),{appId:he,measurementId:Re};throw Ve}try{const Ve=yield Vi(E);return z.deleteThrottleMetadata(he),Ve}catch(Ve){const We=Ve;if(!mu(We)){if(z.deleteThrottleMetadata(he),Re)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Re} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:he,measurementId:Re};throw Ve}const It=503===Number(null===(Q=We?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,oe.$s)(x,z.intervalMillis,30):(0,oe.$s)(x,z.intervalMillis),ut={throttleEndTimeMillis:Date.now()+It,backoffCount:x+1};return z.setThrottleMetadata(he,ut),Vn.debug(`Calling attemptFetch again in ${It} millis`),Ui(E,ut,R,z)}})).apply(this,arguments)}function _o(E,C){return new Promise((x,R)=>{const z=Math.max(C-Date.now(),0),Q=setTimeout(x,z);E.addEventListener(()=>{clearTimeout(Q),R(Vr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function mu(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Un{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Dh,_u;function Np(){return(Np=(0,k.Z)(function*(E,C,x,R,z){if(z&&z.global)E("event",x,R);else{const Q=yield C;E("event",x,Object.assign(Object.assign({},R),{send_to:Q}))}})).apply(this,arguments)}function Nc(E){_u=E}function Rc(E){Dh=E}function Yr(){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(){if(!(0,oe.hl)())return Vn.warn(Vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(E){return Vn.warn(Vr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function la(){return(la=(0,k.Z)(function*(E,C,x,R,z,Q,he){var Re;const Ve=Hm(E);Ve.then(Yn=>{x[Yn.measurementId]=Yn.appId,E.options.measurementId&&Yn.measurementId!==E.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yn=>Vn.error(Yn)),C.push(Ve);const We=Yr().then(Yn=>{if(Yn)return R.getId()}),[It,ut]=yield Promise.all([Ve,We]);xp(Q)||Ih(Q,It.measurementId),_u&&(z("consent","default",_u),Nc(void 0)),z("js",new Date);const or=null!==(Re=he?.config)&&void 0!==Re?Re:{};return or.origin="firebase",or.update=!0,null!=ut&&(or[wh]=ut),z("config",It.measurementId,or),Dh&&(z("set",Dh),Rc(void 0)),It.measurementId})).apply(this,arguments)}class xh{constructor(C){this.app=C}_delete(){return delete yn[this.app.options.appId],Promise.resolve()}}let yn={},ua=[];const Op={};let hl,Ir,ca="dataLayer",fl=!1;function Rh(E,C,x){!function Nh(){const E=[];if((0,oe.ru)()&&E.push("This is a browser extension environment."),(0,oe.zI)()||E.push("Cookies are not available."),E.length>0){const C=E.map((R,z)=>`(${z+1}) ${R}`).join(" "),x=Vr.create("invalid-analytics-context",{errorInfo:C});Vn.warn(x.message)}}();const R=E.options.appId;if(!R)throw Vr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Vr.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=yn[R])throw Vr.create("already-exists",{id:R});if(!fl){!function cn(E){let C=[];Array.isArray(window[E])?C=window[E]:window[E]=C}(ca);const{wrappedGtag:Q,gtagCore:he}=function Th(E,C,x,R,z){let Q=function(...he){window[R].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Q=window[z]),window[z]=function Mp(E,C,x,R){function Q(){return(Q=(0,k.Z)(function*(he,...Re){try{if("event"===he){const[Ve,We]=Re;yield sv(E,C,x,Ve,We)}else if("config"===he){const[Ve,We]=Re;yield Ap(E,C,x,R,Ve,We)}else if("consent"===he){const[Ve]=Re;E("consent","update",Ve)}else if("get"===he){const[Ve,We,It]=Re;E("get",Ve,We,It)}else if("set"===he){const[Ve]=Re;E("set",Ve)}else E(he,...Re)}catch(Ve){Vn.error(Ve)}})).apply(this,arguments)}return function z(he){return Q.apply(this,arguments)}}(Q,E,C,x),{gtagCore:Q,wrappedGtag:window[z]}}(yn,ua,Op,ca,"gtag");Ir=Q,hl=he,fl=!0}return yn[R]=function $m(E,C,x,R,z,Q,he){return la.apply(this,arguments)}(E,ua,Op,C,hl,ca,x),new xh(E)}function kp(){return li.apply(this,arguments)}function li(){return(li=(0,k.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const gl="@firebase/analytics";!function Fp(){(0,re._registerComponent)(new K.wA(pu,(C,{options:x})=>Rh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,re._registerComponent)(new K.wA("analytics-internal",function E(C){try{const x=C.getProvider(pu).getImmediate();return{logEvent:(R,z,Q)=>function Hs(E,C,x,R){E=(0,oe.m9)(E),function Sh(E,C,x,R,z){return Np.apply(this,arguments)}(Ir,yn[E.app.options.appId],C,x,R).catch(z=>Vn.error(z))}(x,R,z,Q)}}catch(x){throw Vr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,re.registerVersion)(gl,"0.10.0"),(0,re.registerVersion)(gl,"0.10.0","esm2017")}();var mt=V(7122),Ci=V(328),kc=V(2692),Gm=V(3132),bu=V(6516);const ml=new f.GfV("7.6.1"),$s="__angularfire_symbol__analyticsIsSupportedValue",Ur="__angularfire_symbol__analyticsIsSupported",Fc="__angularfire_symbol__remoteConfigIsSupportedValue",Lc="__angularfire_symbol__remoteConfigIsSupported",br="__angularfire_symbol__messagingIsSupportedValue",yl="__angularfire_symbol__messagingIsSupported";function wo(E,C,x){if(C){if(1===C.length)return C[0];const Q=C.filter(he=>he.app===x);if(1===Q.length)return Q[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[Ur]||(globalThis[Ur]=kp().then(E=>globalThis[$s]=E).catch(()=>globalThis[$s]=!1)),globalThis[yl]||(globalThis[yl]=mo().then(E=>globalThis[br]=E).catch(()=>globalThis[br]=!1)),globalThis[Lc]||(globalThis[Lc]=Lr().then(E=>globalThis[Fc]=E).catch(()=>globalThis[Fc]=!1));const zt=(E,C)=>{const x=C?[C]:(0,X.C6)(),R=[];return x.forEach(z=>{z.container.getProvider(E).instances.forEach(he=>{R.includes(he)||R.push(he)})}),R};function ha(){}class Cr{constructor(C,x=mt.N){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,R){const z=this.zone;return this.delegate.schedule(function(he){z.runGuarded(()=>{C.apply(this,[he])})},x,R)}}class He{constructor(C){this.zone=C,this.task=null}call(C,x){const R=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ha,{},ha,ha)),x.pipe((0,kc.b)({next:R,complete:R,error:R})).subscribe(C).add(R)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kh=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Cr(Zone.current)),this.insideAngular=x.run(()=>new Cr(Zone.current,Ci.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function ot(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Bc(E){return ot(),function Vp(E){return function(x){return(x=x.lift(new He(E.ngZone))).pipe((0,Gm.R)(E.outsideAngular),(0,bu.QV)(E.insideAngular))}}(ot())(E)}},7748:(at,Te,V)=>{V.d(Te,{$s:()=>cr,BH:()=>Nt,G6:()=>Ba,L:()=>te,LL:()=>pn,Pz:()=>Et,Sg:()=>fn,UG:()=>lt,US:()=>K,ZB:()=>B,ZR:()=>gi,aH:()=>ze,b$:()=>qt,eu:()=>$t,hl:()=>Jn,jU:()=>Ut,m9:()=>gs,ne:()=>Ot,pd:()=>Xn,r3:()=>Zi,ru:()=>bt,tV:()=>F,uI:()=>Kt,vZ:()=>Nr,w1:()=>Bo,xO:()=>oo,xb:()=>so,z$:()=>wt,zI:()=>gc,zd:()=>Rr});const re=function(G){const H=[];let Z=0;for(let de=0;de<G.length;de++){let J=G.charCodeAt(de);J<128?H[Z++]=J:J<2048?(H[Z++]=J>>6|192,H[Z++]=63&J|128):55296==(64512&J)&&de+1<G.length&&56320==(64512&G.charCodeAt(de+1))?(J=65536+((1023&J)<<10)+(1023&G.charCodeAt(++de)),H[Z++]=J>>18|240,H[Z++]=J>>12&63|128,H[Z++]=J>>6&63|128,H[Z++]=63&J|128):(H[Z++]=J>>12|224,H[Z++]=J>>6&63|128,H[Z++]=63&J|128)}return H},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let J=0;J<G.length;J+=3){const Be=G[J],_t=J+1<G.length,Mt=_t?G[J+1]:0,mn=J+2<G.length,Oe=mn?G[J+2]:0;let tn=(15&Mt)<<2|Oe>>6,wr=63&Oe;mn||(wr=64,_t||(tn=64)),de.push(Z[Be>>2],Z[(3&Be)<<4|Mt>>4],Z[tn],Z[wr])}return de.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(re(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let Z=0,de=0;for(;Z<G.length;){const J=G[Z++];if(J<128)H[de++]=String.fromCharCode(J);else if(J>191&&J<224){const Be=G[Z++];H[de++]=String.fromCharCode((31&J)<<6|63&Be)}else if(J>239&&J<365){const mn=((7&J)<<18|(63&G[Z++])<<12|(63&G[Z++])<<6|63&G[Z++])-65536;H[de++]=String.fromCharCode(55296+(mn>>10)),H[de++]=String.fromCharCode(56320+(1023&mn))}else{const Be=G[Z++],_t=G[Z++];H[de++]=String.fromCharCode((15&J)<<12|(63&Be)<<6|63&_t)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const Z=H?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let J=0;J<G.length;){const Be=Z[G.charAt(J++)],Mt=J<G.length?Z[G.charAt(J)]:0;++J;const Oe=J<G.length?Z[G.charAt(J)]:64;++J;const rt=J<G.length?Z[G.charAt(J)]:64;if(++J,null==Be||null==Mt||null==Oe||null==rt)throw new ye;de.push(Be<<2|Mt>>4),64!==Oe&&(de.push(Mt<<4&240|Oe>>2),64!==rt&&de.push(Oe<<6&192|rt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const te=function(G){return function(G){const H=re(G);return K.encodeByteArray(H,!0)}(G).replace(/\./g,"")},F=function(G){try{return K.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function B(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const Z in H)!H.hasOwnProperty(Z)||!ie(Z)||(G[Z]=B(G[Z],H[Z]));return G}function ie(G){return"__proto__"!==G}const we=()=>{try{return function Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=G&&F(G[1]);return H&&JSON.parse(H)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},ze=()=>{var G;return null===(G=we())||void 0===G?void 0:G.config},Et=G=>{var H;return null===(H=we())||void 0===H?void 0:H[`_${G}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Z)=>{this.resolve=H,this.reject=Z})}wrapCallback(H){return(Z,de)=>{Z?this.reject(Z):this.resolve(de),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Z):H(Z,de))}}}function fn(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=H||"demo-project",J=G.iat||0,Be=G.sub||G.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:J,exp:J+3600,auth_time:J,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},G);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(_t)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Kt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function lt(){var G;const H=null===(G=we())||void 0===G?void 0:G.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ut(){return"object"==typeof self&&self.self===self}function bt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bo(){const G=wt();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Ba(){return!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jn(){try{return"object"==typeof indexedDB}catch{return!1}}function $t(){return new Promise((G,H)=>{try{let Z=!0;const de="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(de);J.onsuccess=()=>{J.result.close(),Z||self.indexedDB.deleteDatabase(de),G(!0)},J.onupgradeneeded=()=>{Z=!1},J.onerror=()=>{var Be;H((null===(Be=J.error)||void 0===Be?void 0:Be.message)||"")}}catch(Z){H(Z)}})}function gc(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gi extends Error{constructor(H,Z,de){super(Z),this.code=H,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pn.prototype.create)}}class pn{constructor(H,Z,de){this.service=H,this.serviceName=Z,this.errors=de}create(H,...Z){const de=Z[0]||{},J=`${this.service}/${H}`,Be=this.errors[H],_t=Be?function xr(G,H){return G.replace(Tn,(Z,de)=>{const J=H[de];return null!=J?String(J):`<${de}?>`})}(Be,de):"Error";return new gi(J,`${this.serviceName}: ${_t} (${J}).`,de)}}const Tn=/\{\$([^}]+)}/g;function Zi(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function so(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Nr(G,H){if(G===H)return!0;const Z=Object.keys(G),de=Object.keys(H);for(const J of Z){if(!de.includes(J))return!1;const Be=G[J],_t=H[J];if(Dn(Be)&&Dn(_t)){if(!Nr(Be,_t))return!1}else if(Be!==_t)return!1}for(const J of de)if(!Z.includes(J))return!1;return!0}function Dn(G){return null!==G&&"object"==typeof G}function oo(G){const H=[];for(const[Z,de]of Object.entries(G))Array.isArray(de)?de.forEach(J=>{H.push(encodeURIComponent(Z)+"="+encodeURIComponent(J))}):H.push(encodeURIComponent(Z)+"="+encodeURIComponent(de));return H.length?"&"+H.join("&"):""}function Rr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[J,Be]=de.split("=");H[decodeURIComponent(J)]=decodeURIComponent(Be)}}),H}function Xn(G){const H=G.indexOf("?");if(!H)return"";const Z=G.indexOf("#",H);return G.substring(H,Z>0?Z:void 0)}function Ot(G,H){const Z=new qe(G,H);return Z.subscribe.bind(Z)}class qe{constructor(H,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{H(this)}).catch(de=>{this.error(de)})}next(H){this.forEachObserver(Z=>{Z.next(H)})}error(H){this.forEachObserver(Z=>{Z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Z,de){let J;if(void 0===H&&void 0===Z&&void 0===de)throw new Error("Missing Observer.");J=function on(G,H){if("object"!=typeof G||null===G)return!1;for(const Z of H)if(Z in G&&"function"==typeof G[Z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Z,complete:de},void 0===J.next&&(J.next=Ri),void 0===J.error&&(J.error=Ri),void 0===J.complete&&(J.complete=Ri);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Be}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,H)}sendOne(H,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Z(this.observers[H])}catch(de){typeof console<"u"&&console.error&&console.error(de)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ri(){}function cr(G,H=1e3,Z=2){const de=H*Math.pow(Z,G),J=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+J)}function gs(G){return G&&G._delegate?G._delegate:G}},7473:(at,Te,V)=>{V.d(Te,{y:()=>te});var f=V(14),k=V(1482),re=V(9957),K=V(6831),ye=V(6800),le=V(146);let te=(()=>{class j{constructor(ie){this._isScalar=!1,ie&&(this._subscribe=ie)}lift(ie){const Ee=new j;return Ee.source=this,Ee.operator=ie,Ee}subscribe(ie,Ee,Ae){const{operator:xe}=this,fe=function oe(j,B,ie){if(j){if(j instanceof f.L)return j;if(j[k.b])return j[k.b]()}return j||B||ie?new f.L(j,B,ie):new f.L(re.c)}(ie,Ee,Ae);if(fe.add(xe?xe.call(fe,this.source):this.source||le.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),le.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(ie){try{return this._subscribe(ie)}catch(Ee){le.v.useDeprecatedSynchronousErrorHandling&&(ie.syncErrorThrown=!0,ie.syncErrorValue=Ee),function X(j){for(;j;){const{closed:B,destination:ie,isStopped:Ee}=j;if(B||Ee)return!1;j=ie&&ie instanceof f.L?ie:null}return!0}(ie)?ie.error(Ee):console.warn(Ee)}}forEach(ie,Ee){return new(Ee=F(Ee))((Ae,xe)=>{let fe;fe=this.subscribe(we=>{try{ie(we)}catch(Ke){xe(Ke),fe&&fe.unsubscribe()}},xe,Ae)})}_subscribe(ie){const{source:Ee}=this;return Ee&&Ee.subscribe(ie)}[K.L](){return this}pipe(...ie){return 0===ie.length?this:(0,ye.U)(ie)(this)}toPromise(ie){return new(ie=F(ie))((Ee,Ae)=>{let xe;this.subscribe(fe=>xe=fe,fe=>Ae(fe),()=>Ee(xe))})}}return j.create=B=>new j(B),j})();function F(j){if(j||(j=le.v.Promise||Promise),!j)throw new Error("no Promise impl found");return j}},9957:(at,Te,V)=>{V.d(Te,{c:()=>k});var f=V(146),X=V(8897);const k={closed:!0,next(re){},error(re){if(f.v.useDeprecatedSynchronousErrorHandling)throw re;(0,X.z)(re)},complete(){}}},2218:(at,Te,V)=>{V.d(Te,{Yc:()=>ye,xQ:()=>le});var f=V(7473),X=V(14),k=V(6957),re=V(9086),oe=V(1722),K=V(1482);class ye extends X.L{constructor(j){super(j),this.destination=j}}let le=(()=>{class F extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[K.b](){return new ye(this)}lift(B){const ie=new te(this,this);return ie.operator=B,ie}next(B){if(this.closed)throw new re.N;if(!this.isStopped){const{observers:ie}=this,Ee=ie.length,Ae=ie.slice();for(let xe=0;xe<Ee;xe++)Ae[xe].next(B)}}error(B){if(this.closed)throw new re.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:ie}=this,Ee=ie.length,Ae=ie.slice();for(let xe=0;xe<Ee;xe++)Ae[xe].error(B);this.observers.length=0}complete(){if(this.closed)throw new re.N;this.isStopped=!0;const{observers:B}=this,ie=B.length,Ee=B.slice();for(let Ae=0;Ae<ie;Ae++)Ee[Ae].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new re.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new re.N;return this.hasError?(B.error(this.thrownError),k.w.EMPTY):this.isStopped?(B.complete(),k.w.EMPTY):(this.observers.push(B),new oe.W(this,B))}asObservable(){const B=new f.y;return B.source=this,B}}return F.create=(j,B)=>new te(j,B),F})();class te extends le{constructor(j,B){super(),this.destination=j,this.source=B}next(j){const{destination:B}=this;B&&B.next&&B.next(j)}error(j){const{destination:B}=this;B&&B.error&&this.destination.error(j)}complete(){const{destination:j}=this;j&&j.complete&&this.destination.complete()}_subscribe(j){const{source:B}=this;return B?this.source.subscribe(j):k.w.EMPTY}}},1722:(at,Te,V)=>{V.d(Te,{W:()=>X});var f=V(6957);class X extends f.w{constructor(re,oe){super(),this.subject=re,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const re=this.subject,oe=re.observers;if(this.subject=null,!oe||0===oe.length||re.isStopped||re.closed)return;const K=oe.indexOf(this.subscriber);-1!==K&&oe.splice(K,1)}}},14:(at,Te,V)=>{V.d(Te,{L:()=>ye});var f=V(1900),X=V(9957),k=V(6957),re=V(1482),oe=V(146),K=V(8897);class ye extends k.w{constructor(F,j,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!F){this.destination=X.c;break}if("object"==typeof F){F instanceof ye?(this.syncErrorThrowable=F.syncErrorThrowable,this.destination=F,F.add(this)):(this.syncErrorThrowable=!0,this.destination=new le(this,F));break}default:this.syncErrorThrowable=!0,this.destination=new le(this,F,j,B)}}[re.b](){return this}static create(F,j,B){const ie=new ye(F,j,B);return ie.syncErrorThrowable=!1,ie}next(F){this.isStopped||this._next(F)}error(F){this.isStopped||(this.isStopped=!0,this._error(F))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(F){this.destination.next(F)}_error(F){this.destination.error(F),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:F}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=F,this}}class le extends ye{constructor(F,j,B,ie){super(),this._parentSubscriber=F;let Ee,Ae=this;(0,f.m)(j)?Ee=j:j&&(Ee=j.next,B=j.error,ie=j.complete,j!==X.c&&(Ae=Object.create(j),(0,f.m)(Ae.unsubscribe)&&this.add(Ae.unsubscribe.bind(Ae)),Ae.unsubscribe=this.unsubscribe.bind(this))),this._context=Ae,this._next=Ee,this._error=B,this._complete=ie}next(F){if(!this.isStopped&&this._next){const{_parentSubscriber:j}=this;oe.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?this.__tryOrSetError(j,this._next,F)&&this.unsubscribe():this.__tryOrUnsub(this._next,F)}}error(F){if(!this.isStopped){const{_parentSubscriber:j}=this,{useDeprecatedSynchronousErrorHandling:B}=oe.v;if(this._error)B&&j.syncErrorThrowable?(this.__tryOrSetError(j,this._error,F),this.unsubscribe()):(this.__tryOrUnsub(this._error,F),this.unsubscribe());else if(j.syncErrorThrowable)B?(j.syncErrorValue=F,j.syncErrorThrown=!0):(0,K.z)(F),this.unsubscribe();else{if(this.unsubscribe(),B)throw F;(0,K.z)(F)}}}complete(){if(!this.isStopped){const{_parentSubscriber:F}=this;if(this._complete){const j=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable?(this.__tryOrSetError(F,j),this.unsubscribe()):(this.__tryOrUnsub(j),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(F,j){try{F.call(this._context,j)}catch(B){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw B;(0,K.z)(B)}}__tryOrSetError(F,j,B){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{j.call(this._context,B)}catch(ie){return oe.v.useDeprecatedSynchronousErrorHandling?(F.syncErrorValue=ie,F.syncErrorThrown=!0,!0):((0,K.z)(ie),!0)}return!1}_unsubscribe(){const{_parentSubscriber:F}=this;this._context=null,this._parentSubscriber=null,F.unsubscribe()}}},6957:(at,Te,V)=>{V.d(Te,{w:()=>K});var f=V(4327),X=V(6549),k=V(1900);const oe=(()=>{function le(te){return Error.call(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((F,j)=>`${j+1}) ${F.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te,this}return le.prototype=Object.create(Error.prototype),le})();class K{constructor(te){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,te&&(this._ctorUnsubscribe=!0,this._unsubscribe=te)}unsubscribe(){let te;if(this.closed)return;let{_parentOrParents:F,_ctorUnsubscribe:j,_unsubscribe:B,_subscriptions:ie}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,F instanceof K)F.remove(this);else if(null!==F)for(let Ee=0;Ee<F.length;++Ee)F[Ee].remove(this);if((0,k.m)(B)){j&&(this._unsubscribe=void 0);try{B.call(this)}catch(Ee){te=Ee instanceof oe?ye(Ee.errors):[Ee]}}if((0,f.k)(ie)){let Ee=-1,Ae=ie.length;for(;++Ee<Ae;){const xe=ie[Ee];if((0,X.K)(xe))try{xe.unsubscribe()}catch(fe){te=te||[],fe instanceof oe?te=te.concat(ye(fe.errors)):te.push(fe)}}}if(te)throw new oe(te)}add(te){let F=te;if(!te)return K.EMPTY;switch(typeof te){case"function":F=new K(te);case"object":if(F===this||F.closed||"function"!=typeof F.unsubscribe)return F;if(this.closed)return F.unsubscribe(),F;if(!(F instanceof K)){const ie=F;F=new K,F._subscriptions=[ie]}break;default:throw new Error("unrecognized teardown "+te+" added to Subscription.")}let{_parentOrParents:j}=F;if(null===j)F._parentOrParents=this;else if(j instanceof K){if(j===this)return F;F._parentOrParents=[j,this]}else{if(-1!==j.indexOf(this))return F;j.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[F]:B.push(F),F}remove(te){const F=this._subscriptions;if(F){const j=F.indexOf(te);-1!==j&&F.splice(j,1)}}}var le;function ye(le){return le.reduce((te,F)=>te.concat(F instanceof oe?F.errors:F),[])}K.EMPTY=((le=new K).closed=!0,le)},146:(at,Te,V)=>{V.d(Te,{v:()=>X});let f=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const re=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+re.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=k},get useDeprecatedSynchronousErrorHandling(){return f}}},2831:(at,Te,V)=>{V.d(Te,{Ds:()=>K,IY:()=>re,ft:()=>le});var f=V(14),X=V(7473),k=V(3956);class re extends f.L{constructor(F){super(),this.parent=F}_next(F){this.parent.notifyNext(F)}_error(F){this.parent.notifyError(F),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class K extends f.L{notifyNext(F){this.destination.next(F)}notifyError(F){this.destination.error(F)}notifyComplete(){this.destination.complete()}}function le(te,F){if(F.closed)return;if(te instanceof X.y)return te.subscribe(F);let j;try{j=(0,k.s)(te)(F)}catch(B){F.error(B)}return j}},4483:(at,Te,V)=>{V.d(Te,{N:()=>K,c:()=>oe});var f=V(2218),X=V(7473),k=V(6957),re=V(8331);class oe extends X.y{constructor(j,B){super(),this.source=j,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let j=this._connection;return j||(this._isComplete=!1,j=this._connection=new k.w,j.add(this.source.subscribe(new ye(this.getSubject(),this))),j.closed&&(this._connection=null,j=k.w.EMPTY)),j}refCount(){return(0,re.x)()(this)}}const K=(()=>{const F=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:F._subscribe},_isComplete:{value:F._isComplete,writable:!0},getSubject:{value:F.getSubject},connect:{value:F.connect},refCount:{value:F.refCount}}})();class ye extends f.Yc{constructor(j,B){super(j),this.connectable=B}_error(j){this._unsubscribe(),super._error(j)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const j=this.connectable;if(j){this.connectable=null;const B=j._connection;j._refCount=0,j._subject=null,j._connection=null,B&&B.unsubscribe()}}}},6439:(at,Te,V)=>{V.d(Te,{E:()=>X,c:()=>k});var f=V(7473);const X=new f.y(oe=>oe.complete());function k(oe){return oe?function re(oe){return new f.y(K=>oe.schedule(()=>K.complete()))}(oe):X}},4858:(at,Te,V)=>{V.d(Te,{D:()=>Ae});var f=V(7473),X=V(3956),k=V(6957),re=V(6831),ye=V(8403),le=V(2803),j=V(5192),B=V(5122);function Ae(xe,fe){return fe?function Ee(xe,fe){if(null!=xe){if(function F(xe){return xe&&"function"==typeof xe[re.L]}(xe))return function oe(xe,fe){return new f.y(we=>{const Ke=new k.w;return Ke.add(fe.schedule(()=>{const ke=xe[re.L]();Ke.add(ke.subscribe({next(ze){Ke.add(fe.schedule(()=>we.next(ze)))},error(ze){Ke.add(fe.schedule(()=>we.error(ze)))},complete(){Ke.add(fe.schedule(()=>we.complete()))}}))})),Ke})}(xe,fe);if((0,j.t)(xe))return function K(xe,fe){return new f.y(we=>{const Ke=new k.w;return Ke.add(fe.schedule(()=>xe.then(ke=>{Ke.add(fe.schedule(()=>{we.next(ke),Ke.add(fe.schedule(()=>we.complete()))}))},ke=>{Ke.add(fe.schedule(()=>we.error(ke)))}))),Ke})}(xe,fe);if((0,B.z)(xe))return(0,ye.r)(xe,fe);if(function ie(xe){return xe&&"function"==typeof xe[le.hZ]}(xe)||"string"==typeof xe)return function te(xe,fe){if(!xe)throw new Error("Iterable cannot be null");return new f.y(we=>{const Ke=new k.w;let ke;return Ke.add(()=>{ke&&"function"==typeof ke.return&&ke.return()}),Ke.add(fe.schedule(()=>{ke=xe[le.hZ](),Ke.add(fe.schedule(function(){if(we.closed)return;let ze,Et;try{const Nt=ke.next();ze=Nt.value,Et=Nt.done}catch(Nt){return void we.error(Nt)}Et?we.complete():(we.next(ze),this.schedule())}))})),Ke})}(xe,fe)}throw new TypeError((null!==xe&&typeof xe||xe)+" is not observable")}(xe,fe):xe instanceof f.y?xe:new f.y((0,X.s)(xe))}},8005:(at,Te,V)=>{V.d(Te,{n:()=>re});var f=V(7473),X=V(5414),k=V(8403);function re(oe,K){return K?(0,k.r)(oe,K):new f.y((0,X.V)(oe))}},8623:(at,Te,V)=>{V.d(Te,{T:()=>oe});var f=V(7473),X=V(7507),k=V(6675),re=V(8005);function oe(...K){let ye=Number.POSITIVE_INFINITY,le=null,te=K[K.length-1];return(0,X.K)(te)?(le=K.pop(),K.length>1&&"number"==typeof K[K.length-1]&&(ye=K.pop())):"number"==typeof te&&(ye=K.pop()),null===le&&1===K.length&&K[0]instanceof f.y?K[0]:(0,k.J)(ye)((0,re.n)(K,le))}},4139:(at,Te,V)=>{V.d(Te,{of:()=>re});var f=V(7507),X=V(8005),k=V(8403);function re(...oe){let K=oe[oe.length-1];return(0,f.K)(K)?(oe.pop(),(0,k.r)(oe,K)):(0,X.n)(oe)}},6587:(at,Te,V)=>{V.d(Te,{_:()=>X});var f=V(7473);function X(re,oe){return new f.y(oe?K=>oe.schedule(k,0,{error:re,subscriber:K}):K=>K.error(re))}function k({error:re,subscriber:oe}){oe.error(re)}},6942:(at,Te,V)=>{V.d(Te,{U:()=>X});var f=V(14);function X(oe,K){return function(le){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return le.lift(new k(oe,K))}}class k{constructor(K,ye){this.project=K,this.thisArg=ye}call(K,ye){return ye.subscribe(new re(K,this.project,this.thisArg))}}class re extends f.L{constructor(K,ye,le){super(K),this.project=ye,this.count=0,this.thisArg=le||this}_next(K){let ye;try{ye=this.project.call(this.thisArg,K,this.count++)}catch(le){return void this.destination.error(le)}this.destination.next(ye)}}},6675:(at,Te,V)=>{V.d(Te,{J:()=>k});var f=V(522),X=V(1356);function k(re=Number.POSITIVE_INFINITY){return(0,f.zg)(X.y,re)}},522:(at,Te,V)=>{V.d(Te,{zg:()=>re});var f=V(6942),X=V(4858),k=V(2831);function re(le,te,F=Number.POSITIVE_INFINITY){return"function"==typeof te?j=>j.pipe(re((B,ie)=>(0,X.D)(le(B,ie)).pipe((0,f.U)((Ee,Ae)=>te(B,Ee,ie,Ae))),F)):("number"==typeof te&&(F=te),j=>j.lift(new oe(le,F)))}class oe{constructor(te,F=Number.POSITIVE_INFINITY){this.project=te,this.concurrent=F}call(te,F){return F.subscribe(new K(te,this.project,this.concurrent))}}class K extends k.Ds{constructor(te,F,j=Number.POSITIVE_INFINITY){super(te),this.project=F,this.concurrent=j,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(te){this.active<this.concurrent?this._tryNext(te):this.buffer.push(te)}_tryNext(te){let F;const j=this.index++;try{F=this.project(te,j)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(F)}_innerSub(te){const F=new k.IY(this),j=this.destination;j.add(F);const B=(0,k.ft)(te,F);B!==F&&j.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(te){this.destination.next(te)}notifyComplete(){const te=this.buffer;this.active--,te.length>0?this._next(te.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6516:(at,Te,V)=>{V.d(Te,{ht:()=>te,QV:()=>ye});var f=V(14),X=V(6439),k=V(4139),re=V(6587);class K{constructor(B,ie,Ee){this.kind=B,this.value=ie,this.error=Ee,this.hasValue="N"===B}observe(B){switch(this.kind){case"N":return B.next&&B.next(this.value);case"E":return B.error&&B.error(this.error);case"C":return B.complete&&B.complete()}}do(B,ie,Ee){switch(this.kind){case"N":return B&&B(this.value);case"E":return ie&&ie(this.error);case"C":return Ee&&Ee()}}accept(B,ie,Ee){return B&&"function"==typeof B.next?this.observe(B):this.do(B,ie,Ee)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return(0,re._)(this.error);case"C":return(0,X.c)()}throw new Error("unexpected notification kind value")}static createNext(B){return typeof B<"u"?new K("N",B):K.undefinedValueNotification}static createError(B){return new K("E",void 0,B)}static createComplete(){return K.completeNotification}}function ye(j,B=0){return function(Ee){return Ee.lift(new le(j,B))}}K.completeNotification=new K("C"),K.undefinedValueNotification=new K("N",void 0);class le{constructor(B,ie=0){this.scheduler=B,this.delay=ie}call(B,ie){return ie.subscribe(new te(B,this.scheduler,this.delay))}}class te extends f.L{constructor(B,ie,Ee=0){super(B),this.scheduler=ie,this.delay=Ee}static dispatch(B){const{notification:ie,destination:Ee}=B;ie.observe(Ee),this.unsubscribe()}scheduleMessage(B){this.destination.add(this.scheduler.schedule(te.dispatch,this.delay,new F(B,this.destination)))}_next(B){this.scheduleMessage(K.createNext(B))}_error(B){this.scheduleMessage(K.createError(B)),this.unsubscribe()}_complete(){this.scheduleMessage(K.createComplete()),this.unsubscribe()}}class F{constructor(B,ie){this.notification=B,this.destination=ie}}},8331:(at,Te,V)=>{V.d(Te,{x:()=>X});var f=V(14);function X(){return function(K){return K.lift(new k(K))}}class k{constructor(K){this.connectable=K}call(K,ye){const{connectable:le}=this;le._refCount++;const te=new re(K,le),F=ye.subscribe(te);return te.closed||(te.connection=le.connect()),F}}class re extends f.L{constructor(K,ye){super(K),this.connectable=ye}_unsubscribe(){const{connectable:K}=this;if(!K)return void(this.connection=null);this.connectable=null;const ye=K._refCount;if(ye<=0)return void(this.connection=null);if(K._refCount=ye-1,ye>1)return void(this.connection=null);const{connection:le}=this,te=K._connection;this.connection=null,te&&(!le||te===le)&&te.unsubscribe()}}},4043:(at,Te,V)=>{V.d(Te,{B:()=>ye});var f=V(4483);class k{constructor(te,F){this.subjectFactory=te,this.selector=F}call(te,F){const{selector:j}=this,B=this.subjectFactory(),ie=j(B).subscribe(te);return ie.add(F.subscribe(B)),ie}}var re=V(8331),oe=V(2218);function K(){return new oe.xQ}function ye(){return le=>(0,re.x)()(function X(le,te){return function(j){let B;if(B="function"==typeof le?le:function(){return le},"function"==typeof te)return j.lift(new k(B,te));const ie=Object.create(j,f.N);return ie.source=j,ie.subjectFactory=B,ie}}(K)(le))}},3132:(at,Te,V)=>{V.d(Te,{R:()=>fe});var f=V(7473);let X=1;const k=Promise.resolve(),re={};function oe(Ke){return Ke in re&&(delete re[Ke],!0)}const K={setImmediate(Ke){const ke=X++;return re[ke]=!0,k.then(()=>oe(ke)&&Ke()),ke},clearImmediate(Ke){oe(Ke)}};var le=V(8881),F=V(9054);const ie=new class j extends F.v{flush(ke){this.active=!0,this.scheduled=void 0;const{actions:ze}=this;let Et,Nt=-1,fn=ze.length;ke=ke||ze.shift();do{if(Et=ke.execute(ke.state,ke.delay))break}while(++Nt<fn&&(ke=ze.shift()));if(this.active=!1,Et){for(;++Nt<fn&&(ke=ze.shift());)ke.unsubscribe();throw Et}}}(class te extends le.o{constructor(ke,ze){super(ke,ze),this.scheduler=ke,this.work=ze}requestAsyncId(ke,ze,Et=0){return null!==Et&&Et>0?super.requestAsyncId(ke,ze,Et):(ke.actions.push(this),ke.scheduled||(ke.scheduled=K.setImmediate(ke.flush.bind(ke,null))))}recycleAsyncId(ke,ze,Et=0){if(null!==Et&&Et>0||null===Et&&this.delay>0)return super.recycleAsyncId(ke,ze,Et);0===ke.actions.length&&(K.clearImmediate(ze),ke.scheduled=void 0)}});var Ee=V(4327);class xe extends f.y{constructor(ke,ze=0,Et=ie){super(),this.source=ke,this.delayTime=ze,this.scheduler=Et,(!function Ae(Ke){return!(0,Ee.k)(Ke)&&Ke-parseFloat(Ke)+1>=0}(ze)||ze<0)&&(this.delayTime=0),(!Et||"function"!=typeof Et.schedule)&&(this.scheduler=ie)}static create(ke,ze=0,Et=ie){return new xe(ke,ze,Et)}static dispatch(ke){const{source:ze,subscriber:Et}=ke;return this.add(ze.subscribe(Et))}_subscribe(ke){return this.scheduler.schedule(xe.dispatch,this.delayTime,{source:this.source,subscriber:ke})}}function fe(Ke,ke=0){return function(Et){return Et.lift(new we(Ke,ke))}}class we{constructor(ke,ze){this.scheduler=ke,this.delay=ze}call(ke,ze){return new xe(ze,this.delay,this.scheduler).subscribe(ke)}}},2692:(at,Te,V)=>{V.d(Te,{b:()=>re});var f=V(14);function X(){}var k=V(1900);function re(ye,le,te){return function(j){return j.lift(new oe(ye,le,te))}}class oe{constructor(le,te,F){this.nextOrObserver=le,this.error=te,this.complete=F}call(le,te){return te.subscribe(new K(le,this.nextOrObserver,this.error,this.complete))}}class K extends f.L{constructor(le,te,F,j){super(le),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=F||X,this._tapComplete=j||X,(0,k.m)(te)?(this._context=this,this._tapNext=te):te&&(this._context=te,this._tapNext=te.next||X,this._tapError=te.error||X,this._tapComplete=te.complete||X)}_next(le){try{this._tapNext.call(this._context,le)}catch(te){return void this.destination.error(te)}this.destination.next(le)}_error(le){try{this._tapError.call(this._context,le)}catch(te){return void this.destination.error(te)}this.destination.error(le)}_complete(){try{this._tapComplete.call(this._context)}catch(le){return void this.destination.error(le)}return this.destination.complete()}}},8403:(at,Te,V)=>{V.d(Te,{r:()=>k});var f=V(7473),X=V(6957);function k(re,oe){return new f.y(K=>{const ye=new X.w;let le=0;return ye.add(oe.schedule(function(){le!==re.length?(K.next(re[le++]),K.closed||ye.add(this.schedule())):K.complete()})),ye})}},8881:(at,Te,V)=>{V.d(Te,{o:()=>k});var f=V(6957);class X extends f.w{constructor(oe,K){super()}schedule(oe,K=0){return this}}class k extends X{constructor(oe,K){super(oe,K),this.scheduler=oe,this.work=K,this.pending=!1}schedule(oe,K=0){if(this.closed)return this;this.state=oe;const ye=this.id,le=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(le,ye,K)),this.pending=!0,this.delay=K,this.id=this.id||this.requestAsyncId(le,this.id,K),this}requestAsyncId(oe,K,ye=0){return setInterval(oe.flush.bind(oe,this),ye)}recycleAsyncId(oe,K,ye=0){if(null!==ye&&this.delay===ye&&!1===this.pending)return K;clearInterval(K)}execute(oe,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(oe,K);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,K){let le,ye=!1;try{this.work(oe)}catch(te){ye=!0,le=!!te&&te||new Error(te)}if(ye)return this.unsubscribe(),le}_unsubscribe(){const oe=this.id,K=this.scheduler,ye=K.actions,le=ye.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==le&&ye.splice(le,1),null!=oe&&(this.id=this.recycleAsyncId(K,oe,null)),this.delay=null}}},9054:(at,Te,V)=>{V.d(Te,{v:()=>X});let f=(()=>{class k{constructor(oe,K=k.now){this.SchedulerAction=oe,this.now=K}schedule(oe,K=0,ye){return new this.SchedulerAction(this,oe).schedule(ye,K)}}return k.now=()=>Date.now(),k})();class X extends f{constructor(re,oe=f.now){super(re,()=>X.delegate&&X.delegate!==this?X.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(re,oe=0,K){return X.delegate&&X.delegate!==this?X.delegate.schedule(re,oe,K):super.schedule(re,oe,K)}flush(re){const{actions:oe}=this;if(this.active)return void oe.push(re);let K;this.active=!0;do{if(K=re.execute(re.state,re.delay))break}while(re=oe.shift());if(this.active=!1,K){for(;re=oe.shift();)re.unsubscribe();throw K}}}},328:(at,Te,V)=>{V.d(Te,{z:()=>k});var f=V(8881);const k=new(V(9054).v)(f.o)},7122:(at,Te,V)=>{V.d(Te,{c:()=>K,N:()=>oe});var f=V(8881),k=V(9054);const oe=new class re extends k.v{}(class X extends f.o{constructor(le,te){super(le,te),this.scheduler=le,this.work=te}schedule(le,te=0){return te>0?super.schedule(le,te):(this.delay=te,this.state=le,this.scheduler.flush(this),this)}execute(le,te){return te>0||this.closed?super.execute(le,te):this._execute(le,te)}requestAsyncId(le,te,F=0){return null!==F&&F>0||null===F&&this.delay>0?super.requestAsyncId(le,te,F):le.flush(this)}}),K=oe},2803:(at,Te,V)=>{V.d(Te,{hZ:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},6831:(at,Te,V)=>{V.d(Te,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},1482:(at,Te,V)=>{V.d(Te,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},9086:(at,Te,V)=>{V.d(Te,{N:()=>X});const X=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},8897:(at,Te,V)=>{function f(X){setTimeout(()=>{throw X},0)}V.d(Te,{z:()=>f})},1356:(at,Te,V)=>{function f(X){return X}V.d(Te,{y:()=>f})},4327:(at,Te,V)=>{V.d(Te,{k:()=>f});const f=Array.isArray||(X=>X&&"number"==typeof X.length)},5122:(at,Te,V)=>{V.d(Te,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},1900:(at,Te,V)=>{function f(X){return"function"==typeof X}V.d(Te,{m:()=>f})},6549:(at,Te,V)=>{function f(X){return null!==X&&"object"==typeof X}V.d(Te,{K:()=>f})},5192:(at,Te,V)=>{function f(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}V.d(Te,{t:()=>f})},7507:(at,Te,V)=>{function f(X){return X&&"function"==typeof X.schedule}V.d(Te,{K:()=>f})},6800:(at,Te,V)=>{V.d(Te,{U:()=>k,z:()=>X});var f=V(1356);function X(...re){return k(re)}function k(re){return 0===re.length?f.y:1===re.length?re[0]:function(K){return re.reduce((ye,le)=>le(ye),K)}}},3956:(at,Te,V)=>{V.d(Te,{s:()=>j});var f=V(5414),X=V(8897),re=V(2803),K=V(6831),le=V(5122),te=V(5192),F=V(6549);const j=B=>{if(B&&"function"==typeof B[K.L])return(B=>ie=>{const Ee=B[K.L]();if("function"!=typeof Ee.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ee.subscribe(ie)})(B);if((0,le.z)(B))return(0,f.V)(B);if((0,te.t)(B))return(B=>ie=>(B.then(Ee=>{ie.closed||(ie.next(Ee),ie.complete())},Ee=>ie.error(Ee)).then(null,X.z),ie))(B);if(B&&"function"==typeof B[re.hZ])return(B=>ie=>{const Ee=B[re.hZ]();for(;;){let Ae;try{Ae=Ee.next()}catch(xe){return ie.error(xe),ie}if(Ae.done){ie.complete();break}if(ie.next(Ae.value),ie.closed)break}return"function"==typeof Ee.return&&ie.add(()=>{Ee.return&&Ee.return()}),ie})(B);{const Ee=`You provided ${(0,F.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ee)}}},5414:(at,Te,V)=>{V.d(Te,{V:()=>f});const f=X=>k=>{for(let re=0,oe=X.length;re<oe&&!k.closed;re++)k.next(X[re]);k.complete()}},2560:(at,Te,V)=>{V.d(Te,{$8M:()=>Sp,$Z:()=>Pv,AFp:()=>PE,AaK:()=>le,BQk:()=>Fl,CHM:()=>ph,CRH:()=>b_,CZH:()=>ic,CqO:()=>TI,D6c:()=>bS,EJc:()=>iS,EpF:()=>By,Ez6:()=>xr,F4k:()=>jy,FYo:()=>Hu,FiY:()=>En,G48:()=>ex,Gf:()=>I_,GfV:()=>Ev,GkF:()=>Cg,Gpc:()=>j,JOm:()=>R,KtG:()=>gh,LFG:()=>ir,LSH:()=>od,Lbi:()=>tS,Lck:()=>Kw,MMx:()=>Qg,NdJ:()=>rw,OlP:()=>cn,Oqu:()=>Ll,PXZ:()=>VE,Q6J:()=>xd,QGY:()=>Tg,QP$:()=>_t,QbO:()=>RE,Qsj:()=>N0,R0b:()=>xs,RDi:()=>Kh,Rgc:()=>em,SBq:()=>ju,Sil:()=>$b,Suo:()=>Na,TTD:()=>Ic,TgZ:()=>kl,Tol:()=>zy,VKq:()=>nE,X6Q:()=>Qf,XFs:()=>Xe,Xpm:()=>vr,Xts:()=>M,Y36:()=>qu,YKP:()=>Ww,YNc:()=>Ig,Yjl:()=>Z,Yz7:()=>pn,Z0I:()=>mc,ZZ4:()=>V_,_Bn:()=>Nf,_UZ:()=>Uy,_Vd:()=>cd,_c5:()=>ix,_uU:()=>Xu,aQg:()=>WE,c2e:()=>rS,cJS:()=>Tn,cg1:()=>Xy,dDg:()=>Zb,dqk:()=>on,eFA:()=>BE,ekj:()=>gw,eoX:()=>fm,f3M:()=>Rh,g9A:()=>NE,h0i:()=>tc,hGG:()=>IS,iGM:()=>xb,ifc:()=>st,ip1:()=>xE,jDz:()=>h_,kL8:()=>Lg,l5B:()=>g_,lG2:()=>H,lqb:()=>as,lri:()=>Kb,n5z:()=>pu,oAB:()=>kr,oxw:()=>Dg,q4F:()=>sg,qLn:()=>og,qOj:()=>ci,qZA:()=>to,rWj:()=>LE,sBO:()=>F_,sIi:()=>ti,s_b:()=>Uf,soG:()=>O_,tb:()=>cm,tp0:()=>wu,uIk:()=>Eg,vHH:()=>Ae,vpe:()=>Ro,wAp:()=>yt,xp6:()=>Tl,ynx:()=>bg,z2F:()=>mm,zSh:()=>tf,zs3:()=>jn});var f=V(2218),X=V(6957),k=V(7473),re=V(8623),oe=V(4043);function K(s){for(let o in s)if(s[o]===K)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function te(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const F=K({__forward_ref__:K});function j(s){return s.__forward_ref__=j,s.toString=function(){return le(this())},s}function B(s){return ie(s)?s():s}function ie(s){return"function"==typeof s&&s.hasOwnProperty(F)&&s.__forward_ref__===j}class Ae extends Error{constructor(o,l){super(function xe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function Et(s,o){throw new Ae(-201,!1)}function Jn(s,o){null==s&&function $t(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function pn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}const xr=pn;function Tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function mi(s){return Pr(s,Ki)||Pr(s,Wl)}function mc(s){return null!==mi(s)}function Pr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ho(s){return s&&(s.hasOwnProperty(Zi)||s.hasOwnProperty(so))?s[Zi]:null}const Ki=K({\u0275prov:K}),Zi=K({\u0275inj:K}),Wl=K({ngInjectableDef:K}),so=K({ngInjectorDef:K});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Nr;function Jt(s){const o=Nr;return Nr=s,o}function oo(s,o,l){const c=mi(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Xe.Optional?null:void 0!==o?o:void Et(le(s))}function Xn(s){return{toString:s}.toString()}var Ie=(()=>((Ie=Ie||{})[Ie.OnPush=0]="OnPush",Ie[Ie.Default=1]="Default",Ie))(),st=(()=>{return(s=st||(st={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",st;var s})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Or={},ft=[],er=K({\u0275cmp:K}),gn=K({\u0275dir:K}),$o=K({\u0275pipe:K}),Xt=K({\u0275mod:K}),kt=K({\u0275fac:K}),jt=K({__NG_ELEMENT_ID__:K});let ps=0;function vr(s){return Xn(()=>{const l=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Ie.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||st.Emulated,id:"c"+ps++,styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,w=s.features;return h.inputs=G(s.inputs,c),h.outputs=G(s.outputs),w&&w.forEach(I=>I(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(cr).filter(Oi):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(Be).filter(Oi):null,h})}function cr(s){return de(s)||J(s)}function Oi(s){return null!==s}function kr(s){return Xn(()=>({type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function G(s,o){if(null==s)return Or;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=c,o&&(o[h]=m)}return l}const H=vr;function Z(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function de(s){return s[er]||null}function J(s){return s[gn]||null}function Be(s){return s[$o]||null}function _t(s){const o=de(s)||J(s)||Be(s);return null!==o&&o.standalone}function Mt(s,o){const l=s[Xt]||null;if(!l&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return l}function tr(s){return Array.isArray(s)&&"object"==typeof s[1]}function nr(s){return Array.isArray(s)&&!0===s[1]}function Go(s){return 0!=(8&s.flags)}function Ha(s){return 2==(2&s.flags)}function ys(s){return 1==(1&s.flags)}function Qi(s){return null!==s.template}function Kl(s){return 0!=(256&s[2])}function un(s,o){return s.hasOwnProperty(kt)?s[kt]:null}class ih{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ic(){return sh}function sh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Yl),Zl}function Zl(){const s=ah(this),o=s?.current;if(o){const l=s.previous;if(l===Or)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Yl(s,o,l,c){const h=ah(s)||function Os(s,o){return s[oh]=o}(s,{previous:Or,current:null}),m=h.current||(h.current={}),w=h.previous,I=this.declaredInputs[l],T=w[I];m[I]=new ih(T&&T.currentValue,o,w===Or),s[c]=o}Ic.ngInherit=!0;const oh="__ngSimpleChanges__";function ah(s){return s[oh]||null}function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function lo(s,o){return Ln(o[s])}function Lr(s,o){return Ln(o[s.index])}function $a(s,o){return s.data[o]}function rr(s,o){const l=o[s];return tr(l)?l:l[0]}function zo(s){return 64==(64&s[2])}function Ei(s,o){return null==o?null:s[o]}function qo(s){s[18]=0}function uo(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const pt={lFrame:Cc(null),bindingsEnabled:!0};function eu(){return pt.bindingsEnabled}function Ce(){return pt.lFrame.lView}function Vt(){return pt.lFrame.tView}function ph(s){return pt.lFrame.contextLView=s,s[8]}function gh(s){return pt.lFrame.contextLView=null,s}function On(){let s=Es();for(;null!==s&&64===s.type;)s=s.parent;return s}function Es(){return pt.lFrame.currentTNode}function ts(s,o){const l=pt.lFrame;l.currentTNode=s,l.isParent=o}function Fs(){return pt.lFrame.isParent}function _p(){pt.lFrame.isParent=!1}function qr(){const s=pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function za(){return pt.lFrame.bindingIndex++}function Er(s){const o=pt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function vp(s,o){const l=pt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Wa(o)}function Wa(s){pt.lFrame.currentDirectiveIndex=s}function Ka(){return pt.lFrame.currentQueryIndex}function oi(s){pt.lFrame.currentQueryIndex=s}function ru(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ko(s,o,l){if(l&Xe.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&Xe.Host||(h=ru(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=pt.lFrame=Yo();return c.currentTNode=o,c.lView=s,!0}function Zo(s){const o=Yo(),l=s[1];pt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Yo(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Cc(s):o}function Cc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Za(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const iu=Za;function Ls(){const s=Za();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function en(){return pt.lFrame.selectedIndex}function Is(s){pt.lFrame.selectedIndex=s}function wn(){const s=pt.lFrame;return $a(s.tView,s.selectedIndex)}function ho(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:N}=m;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),T&&(s.viewHooks||(s.viewHooks=[])).push(-l,T),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function Ja(s,o,l){Xa(s,o,3,l)}function Qo(s,o,l,c){(3&s[2])===l&&Xa(s,o,l,c)}function _h(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Xa(s,o,l,c){const m=c??-1,w=o.length-1;let I=0;for(let T=void 0!==c?65535&s[18]:0;T<w;T++)if("number"==typeof o[T+1]){if(I=o[T],null!=c&&I>=c)break}else o[T]<0&&(s[18]+=65536),(I<m||-1==m)&&(el(s,l,o,T),s[18]=(4294901760&s[18])+T+2),T++}function el(s,o,l,c){const h=l[c]<0,m=l[c+1],I=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class Jo{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Xo(s,o,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const m=l[c++],w=l[c++],I=l[c++];s.setAttribute(o,w,I,m)}else{const m=h,w=l[++c];lu(m)?s.setProperty(o,m,w):s.setAttribute(o,m,w),c++}}return c}function rl(s){return 3===s||4===s||6===s}function lu(s){return 64===s.charCodeAt(0)}function ea(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||uu(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function uu(s,o,l,c,h){let m=0,w=s.length;if(-1===o)w=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===o){w=-1;break}if(I>o){w=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==w&&(s.splice(w,0,o),m=w+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function cu(s){return-1!==s}function ta(s){return 32767&s}function Li(s,o){let l=function du(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let na=!0;function bs(s){const o=na;return na=s,o}let po=0;const Ii={};function ia(s,o){const l=sl(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,il(c.data,s),il(o,null),il(c.blueprint,null));const h=go(s,o),m=s.injectorIndex;if(cu(h)){const w=ta(h),I=Li(h,o),T=I[1].data;for(let A=0;A<8;A++)o[m+A]=I[w+A]|T[w+A]}return o[m+8]=h,m}function il(s,o){s.push(0,0,0,0,0,0,0,0,o)}function sl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function go(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){if(c=Dp(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function ol(s,o,l){!function ra(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(jt)&&(c=l[jt]),null==c&&(c=l[jt]=po++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Sc(s,o,l){if(l&Xe.Optional||void 0!==s)return s;Et()}function bp(s,o,l,c){if(l&Xe.Optional&&void 0===c&&(c=null),0==(l&(Xe.Self|Xe.Host))){const h=s[9],m=Jt(void 0);try{return h?h.get(o,c,l&Xe.Optional):oo(o,c,l&Xe.Optional)}finally{Jt(m)}}return Sc(c,0,l)}function mo(s,o,l,c=Xe.Default,h){if(null!==s){if(1024&o[2]){const w=function Ac(s,o,l,c,h){let m=s,w=o;for(;null!==m&&null!==w&&1024&w[2]&&!(256&w[2]);){const I=Us(m,w,l,c|Xe.Self,Ii);if(I!==Ii)return I;let T=m.parent;if(!T){const A=w[21];if(A){const N=A.get(l,Ii,c);if(N!==Ii)return N}T=Dp(w),w=w[15]}m=T}return h}(s,o,l,c,Ii);if(w!==Ii)return w}const m=Us(s,o,l,c,Ii);if(m!==Ii)return m}return bp(o,l,c,h)}function Us(s,o,l,c,h){const m=function Bm(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(jt)?s[jt]:void 0;return"number"==typeof o?o>=0?255&o:jm:o}(l);if("function"==typeof m){if(!Ko(o,s,c))return c&Xe.Host?Sc(h,0,c):bp(o,l,c,h);try{const w=m(c);if(null!=w||c&Xe.Optional)return w;Et()}finally{iu()}}else if("number"==typeof m){let w=null,I=sl(s,o),T=-1,A=c&Xe.Host?o[16][6]:null;for((-1===I||c&Xe.SkipSelf)&&(T=-1===I?go(s,o):o[I+8],-1!==T&&fu(c,!1)?(w=o[1],I=ta(T),o=Li(T,o)):I=-1);-1!==I;){const N=o[1];if(Tp(m,I,N.data)){const O=Cp(I,o,l,w,c,A);if(O!==Ii)return O}T=o[I+8],-1!==T&&fu(c,o[1].data[I+8]===A)&&Tp(m,I,o)?(w=N,I=ta(T),o=Li(T,o)):I=-1}}return h}function Cp(s,o,l,c,h,m){const w=o[1],I=w.data[s+8],N=bi(I,w,l,null==c?Ha(I)&&na:c!=w&&0!=(3&I.type),h&Xe.Host&&m===I);return null!==N?yo(o,w,N,I):Ii}function bi(s,o,l,c,h){const m=s.providerIndexes,w=o.data,I=1048575&m,T=s.directiveStart,N=m>>20,q=h?I+N:s.directiveEnd;for(let ee=c?I:I+N;ee<q;ee++){const _e=w[ee];if(ee<T&&l===_e||ee>=T&&_e.type===l)return ee}if(h){const ee=w[T];if(ee&&Qi(ee)&&ee.type===l)return T}return null}function yo(s,o,l,c){let h=s[l];const m=o.data;if(function fo(s){return s instanceof Jo}(h)){const w=h;w.resolving&&function Ke(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${s}${l}`)}(function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}(m[l]));const I=bs(w.canSeeViewProviders);w.resolving=!0;const T=w.injectImpl?Jt(w.injectImpl):null;Ko(s,c,Xe.Default);try{h=s[l]=w.factory(void 0,m,s,c),o.firstCreatePass&&l>=c.directiveStart&&function ou(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const w=sh(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==T&&Jt(T),bs(I),w.resolving=!1,iu()}}return h}function Tp(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function fu(s,o){return!(s&Xe.Self||s&Xe.Host&&o)}class oa{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return mo(this._tNode,this._lView,o,c,l)}}function jm(){return new oa(On(),Ce())}function pu(s){return Xn(()=>{const o=s.prototype.constructor,l=o[kt]||wh(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[kt]||wh(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function wh(s){return ie(s)?()=>{const o=wh(B(s));return o&&o()}:un(s)}function Dp(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Sp(s){return function sa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const m=l[h];if(rl(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(On(),s)}const Vn="__parameters__";function Zr(s,o,l){return Xn(()=>{const c=function ll(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const w=new h(...m);return I.annotation=w,I;function I(T,A,N){const O=T.hasOwnProperty(Vn)?T[Vn]:Object.defineProperty(T,Vn,{value:[]})[Vn];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(w),T}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class cn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=pn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Sn(c,o)):o!==s&&o.push(c)}return o}function Ui(s,o){s.forEach(l=>Array.isArray(l)?Ui(l,o):o(l))}function Mc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function _o(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ai(s,o,l){let c=dl(s,o);return c>=0?s[1|c]=l:(c=~c,function Sh(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function cl(s,o){const l=dl(s,o);if(l>=0)return s[1|l]}function dl(s,o){return function Ah(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const m=c+(h-c>>1),w=s[m<<l];if(o===w)return m<<l;w>o?h=m:c=m+1}return~(h<<l)}(s,o,1)}const la={},xh="__NG_DI_FLAG__",yn="ngTempTokenPath",Op=/\n/gm,Ph="__source";let hl;function Ir(s){const o=hl;return hl=s,o}function fl(s,o=Xe.Default){if(void 0===hl)throw new Ae(-203,!1);return null===hl?oo(s,void 0,o):hl.get(s,o&Xe.Optional?null:void 0,o)}function ir(s,o=Xe.Default){return(function Dn(){return Nr}()||fl)(B(s),o)}function Rh(s,o=Xe.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ir(s,o)}function Oc(s){const o=[];for(let l=0;l<s.length;l++){const c=B(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Ae(900,!1);let h,m=Xe.Default;for(let w=0;w<c.length;w++){const I=c[w],T=kp(I);"number"==typeof T?-1===T?h=I.token:m|=T:h=I}o.push(ir(h,m))}else o.push(ir(c))}return o}function vu(s,o){return s[xh]=o,s.prototype[xh]=o,s}function kp(s){return s[xh]}const En=vu(Zr("Optional"),8),wu=vu(Zr("SkipSelf"),4);var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();const Ve=new Map;let We=0;const Ti="__ngContext__";function ar(s,o){tr(o)?(s[Ti]=o[20],function ut(s){Ve.set(s[20],s)}(o)):s[Ti]=o}function jp(s,o){return undefined(s,o)}function Mu(s){const o=s[3];return nr(o)?o[3]:o}function xu(s){return Uh(s[13])}function wl(s){return Uh(s[4])}function Uh(s){for(;null!==s&&!nr(s);)s=s[4];return s}function fa(s,o,l,c,h){if(null!=c){let m,w=!1;nr(c)?m=c:tr(c)&&(w=!0,c=c[0]);const I=Ln(c);0===s&&null!==l?null==h?qp(o,l,I):zs(o,l,I,h||null,!0):1===s&&null!==l?zs(o,l,I,h||null,!0):2===s?function Ru(s,o,l){const c=pa(s,o);c&&function Xm(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}(o,I,w):3===s&&o.destroyNode(I),null!=m&&function ga(s,o,l,c,h){const m=l[7];m!==Ln(l)&&fa(o,s,c,m,h);for(let I=10;I<l.length;I++){const T=l[I];Ws(T[1],T,s,o,c,m)}}(o,s,m,l,h)}}function jh(s,o,l){return s.createElement(o,l)}function Hh(s,o){const l=s[9],c=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,uo(h,-1)),l.splice(c,1)}function $n(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&Hh(h,c),o>0&&(s[l-1][4]=c[4]);const m=_o(s,10+o);!function Ym(s,o){Ws(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const w=m[19];null!==w&&w.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Tr(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Ws(s,o,l,3,null,null),function uv(s){let o=s[13];if(!o)return El(s[1],s);for(;o;){let l=null;if(tr(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)tr(o)&&El(o[1],o),o=o[3];null===o&&(o=s),tr(o)&&El(o[1],o),l=o&&o[4]}o=l}}(o)}}function El(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function zp(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Jo)){const m=l[c+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const I=h[m[w]],T=m[w+1];try{T.call(I)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function Gp(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const w=l[m+1],I="function"==typeof w?w(o):Ln(o[w]),T=c[h=l[m+2]],A=l[m+3];"boolean"==typeof A?I.removeEventListener(l[m],T,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),m+=2}else{const w=c[h=l[m+1]];l[m].call(w)}if(null!==c){for(let m=h+1;m<c.length;m++)(0,c[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&nr(o[3])){l!==o[3]&&Hh(l,o);const c=o[19];null!==c&&c.detachView(s)}!function Yn(s){Ve.delete(s[20])}(o)}}function Jm(s,o,l){return function cv(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===st.None||h===st.Emulated)return null}return Lr(c,l)}(s,o.parent,l)}function zs(s,o,l,c,h){s.insertBefore(o,l,c,h)}function qp(s,o,l){s.appendChild(o,l)}function Wc(s,o,l,c,h){null!==c?zs(s,o,l,c,h):qp(s,o,l)}function pa(s,o){return s.parentNode(o)}let Il,Zc=function ey(s,o,l){return 40&s.type?Lr(s,l):null};function Gh(s,o,l,c){const h=Jm(s,c,o),m=o[11],I=function Kp(s,o,l){return Zc(s,o,l)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let T=0;T<l.length;T++)Wc(m,h,l[T],I,!1);else Wc(m,h,l,I,!1)}function qs(s,o){if(null!==o){const l=o.type;if(3&l)return Lr(o,s);if(4&l)return zh(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return qs(s,c);{const h=s[o.index];return nr(h)?zh(-1,h):Ln(h)}}if(32&l)return jp(o,s)()||Ln(s[o.index]);{const c=Nu(s,o);return null!==c?Array.isArray(c)?c[0]:qs(Mu(s[16]),c):qs(s,o.next)}}return null}function Nu(s,o){return null!==o?s[16][6].projection[o.projection]:null}function zh(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return qs(c,h)}return o[7]}function qh(s,o,l,c,h,m,w){for(;null!=l;){const I=c[l.index],T=l.type;if(w&&0===o&&(I&&ar(Ln(I),c),l.flags|=4),64!=(64&l.flags))if(8&T)qh(s,o,l.child,c,h,m,!1),fa(o,s,h,I,m);else if(32&T){const A=jp(l,c);let N;for(;N=A();)fa(o,s,h,N,m);fa(o,s,h,I,m)}else 16&T?ty(s,o,c,l,h,m):fa(o,s,h,I,m);l=w?l.projectionNext:l.next}}function Ws(s,o,l,c,h,m){qh(l,c,s.firstChild,o,h,m,!1)}function ty(s,o,l,c,h,m){const w=l[16],T=w[6].projection[c.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)fa(o,s,h,T[A],m);else qh(s,o,T,w[3],h,m,!0)}function ny(s,o,l){s.setAttribute(o,"style",l)}function Cs(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Kh(s){Il=s}class Qh{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ks(s){return s instanceof Qh?s.changingThisBreaksApplicationSecurity:s}const Jp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function od(s){const o=function D(){const s=Ce();return s&&s[12]}();return o?o.sanitize(Gn.URL,s)||"":function ss(s,o){const l=function Qp(s){return s instanceof Qh&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Ks(s):function td(s){return(s=String(s)).match(Jp)?s:"unsafe:"+s}(fe(s))}const M=new cn("ENVIRONMENT_INITIALIZER"),U=new cn("INJECTOR",-1),W=new cn("INJECTOR_DEF_TYPES");class ve{get(o,l=la){if(l===la){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return l}}function pe(...s){return{\u0275providers:Ne(0,s)}}function Ne(s,...o){const l=[],c=new Set;let h;return Ui(o,m=>{const w=m;St(w,l,[],c)&&(h||(h=[]),h.push(w))}),void 0!==h&&Le(h,l),l}function Le(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];Ui(h,m=>{o.push(m)})}}function St(s,o,l,c){if(!(s=B(s)))return!1;let h=null,m=Ho(s);const w=!m&&de(s);if(m||w){if(w&&!w.standalone)return!1;h=s}else{const T=s.ngModule;if(m=Ho(T),!m)return!1;h=T}const I=c.has(h);if(w){if(I)return!1;if(c.add(h),w.dependencies){const T="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const A of T)St(A,o,l,c)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let A;c.add(h);try{Ui(m.imports,N=>{St(N,o,l,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&Le(A,o)}if(!I){const A=un(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:ft},{provide:W,useValue:h,multi:!0},{provide:M,useValue:()=>ir(h),multi:!0})}const T=m.providers;null==T||I||Ui(T,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const jr=K({provide:String,useValue:K});function Hr(s){return null!==s&&"object"==typeof s&&jr in s}function bo(s){return"function"==typeof s}const tf=new cn("Set Injector scope."),ad={},nf={};let ld;function ud(){return void 0===ld&&(ld=new ve),ld}class as{}class rg extends as{constructor(o,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hy(o,w=>this.processProvider(w)),this.records.set(U,Bu(void 0,this)),h.has("environment")&&this.records.set(as,Bu(void 0,this));const m=this.records.get(tf);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(W.multi,ft,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Ir(this),c=Jt(void 0);try{return o()}finally{Ir(l),Jt(c)}}get(o,l=la,c=Xe.Default){this.assertNotDestroyed();const h=Ir(this),m=Jt(void 0);try{if(!(c&Xe.SkipSelf)){let I=this.records.get(o);if(void 0===I){const T=function vv(s){return"function"==typeof s||"object"==typeof s&&s instanceof cn}(o)&&mi(o);I=T&&this.injectableDefInScope(T)?Bu(Qs(o),ad):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Xe.Self?ud():this.parent).get(o,l=c&Xe.Optional&&l===la?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[yn]=w[yn]||[]).unshift(le(o)),h)throw w;return function li(s,o,l,c){const h=s[yn];throw o[Ph]&&h.unshift(o[Ph]),s.message=function xn(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let m=[];for(let w in o)if(o.hasOwnProperty(w)){let I=o[w];m.push(w+":"+("string"==typeof I?JSON.stringify(I):le(I)))}h=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(Op,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[yn]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{Jt(m),Ir(h)}}resolveInjectorInitializers(){const o=Ir(this),l=Jt(void 0);try{const c=this.get(M.multi,ft,Xe.Self);for(const h of c)h()}finally{Ir(o),Jt(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(o){let l=bo(o=B(o))?o:B(o&&o.provide);const c=function wT(s){return Hr(s)?Bu(void 0,s.useValue):Bu(_v(s),ad)}(o);if(bo(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Bu(void 0,ad,!0),h.factory=()=>Oc(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===ad&&(l.value=nf,l.value=l.factory()),"object"==typeof l.value&&l.value&&function S0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=B(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Qs(s){const o=mi(s),l=null!==o?o.factory:un(s);if(null!==l)return l;if(s instanceof cn)throw new Ae(204,!1);if(s instanceof Function)return function D0(s){const o=s.length;if(o>0)throw function mu(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new Ae(204,!1);const l=function ja(s){const o=s&&(s[Ki]||s[Wl]);if(o){const l=function jo(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ae(204,!1)}function _v(s,o,l){let c;if(bo(s)){const h=B(s);return un(h)||Qs(h)}if(Hr(s))c=()=>B(s.useValue);else if(function dn(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Oc(s.deps||[]));else if(function os(s){return!(!s||!s.useExisting)}(s))c=()=>ir(B(s.useExisting));else{const h=B(s&&(s.useClass||s.provide));if(!function ig(s){return!!s.deps}(s))return un(h)||Qs(h);c=()=>new h(...Oc(s.deps))}return c}function Bu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function dy(s){return!!s.\u0275providers}function hy(s,o){for(const l of s)Array.isArray(l)?hy(l,o):dy(l)?hy(l.\u0275providers,o):o(l)}class A0{}class x0{resolveComponentFactory(o){throw function M0(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let cd=(()=>{class s{}return s.NULL=new x0,s})();function wv(){return dd(On(),Ce())}function dd(s,o){return new ju(Lr(s,o))}let ju=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=wv,s})();function P0(s){return s instanceof ju?s.nativeElement:s}class Hu{}let N0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function R0(){const s=Ce(),l=rr(On().index,s);return(tr(l)?l:s)[11]}(),s})(),O0=(()=>{class s{}return s.\u0275prov=pn({token:s,providedIn:"root",factory:()=>null}),s})();class Ev{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sg=new Ev("14.3.0"),Bi={};function $u(s){return s.ngOriginalError}class og{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&$u(o);for(;l&&$u(l);)l=$u(l);return l||null}}function ls(s){return s instanceof Function?s():s}function ag(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}l=h+1}}const lg="ng-template";function V0(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==ag(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function hd(s){return 4===s.type&&s.value!==lg}function CT(s,o,l){return o===(4!==s.type||l?s.value:lg)}function TT(s,o,l){let c=4;const h=s.attrs||[],m=function ST(s){for(let o=0;o<s.length;o++)if(rl(s[o]))return o;return s.length}(h);let w=!1;for(let I=0;I<o.length;I++){const T=o[I];if("number"!=typeof T){if(!w)if(4&c){if(c=2|1&c,""!==T&&!CT(s,T,l)||""===T&&1===o.length){if(Ts(c))return!1;w=!0}}else{const A=8&c?T:o[++I];if(8&c&&null!==s.attrs){if(!V0(s.attrs,A,l)){if(Ts(c))return!1;w=!0}continue}const O=DT(8&c?"class":T,h,hd(s),l);if(-1===O){if(Ts(c))return!1;w=!0;continue}if(""!==A){let q;q=O>m?"":h[O+1].toLowerCase();const ee=8&c?q:null;if(ee&&-1!==ag(ee,A,0)||2&c&&A!==q){if(Ts(c))return!1;w=!0}}}}else{if(!w&&!Ts(c)&&!Ts(T))return!1;if(w&&Ts(T))continue;w=!1,c=T|1&c}}return Ts(c)||w}function Ts(s){return 0==(1&s)}function DT(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let m=!1;for(;h<o.length;){const w=o[h];if(w===s)return h;if(3===w||6===w)m=!0;else{if(1===w||2===w){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=m?1:2}return-1}return function my(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function U0(s,o,l=!1){for(let c=0;c<o.length;c++)if(TT(s,o[c],l))return!0;return!1}function j0(s,o){return s?":not("+o.trim()+")":o}function sf(s){let o=s[0],l=1,c=2,h="",m=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&c){const I=s[++l];h+="["+w+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+w:4&c&&(h+=" "+w);else""!==h&&!Ts(w)&&(o+=j0(m,h),h=""),c=w,m=m||!Ts(c);l++}return""!==h&&(o+=j0(m,h)),o}const At={};function Tl(s){yy(Vt(),Ce(),en()+s,!1)}function yy(s,o,l,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ja(o,m,l)}else{const m=s.preOrderHooks;null!==m&&Qo(o,m,0,l)}Is(l)}function ce(s,o=null,l=null,c){const h=be(s,o,l,c);return h.resolveInjectorInitializers(),h}function be(s,o=null,l=null,c,h=new Set){const m=[l||ft,pe(s)];return c=c||("object"==typeof s?void 0:le(s)),new rg(m,o||ud(),c||null,h)}let jn=(()=>{class s{static create(l,c){if(Array.isArray(l))return ce({name:""},c,l,"");{const h=l.name??"";return ce({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=la,s.NULL=new ve,s.\u0275prov=pn({token:s,providedIn:"any",factory:()=>ir(U)}),s.__NG_ELEMENT_ID__=-1,s})();function qu(s,o=Xe.Default){const l=Ce();return null===l?ir(s,o):mo(On(),l,B(s),o)}function Pv(){throw new Error("invalid")}function Do(s,o){return s<<17|o<<2}function Ss(s){return s>>17&32767}function As(s){return 2|s}function Dl(s){return(131068&s)>>2}function pd(s,o){return-131069&s|o<<2}function Rv(s){return 1|s}function Xr(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],m=l[c+1];if(-1!==m){const w=s.data[m];oi(h),w.contentQueries(2,o[m],m)}}}function Ml(s,o,l,c,h,m,w,I,T,A,N){const O=o.blueprint.slice();return O[0]=h,O[2]=76|c,(null!==N||s&&1024&s[2])&&(O[2]|=1024),qo(O),O[3]=O[15]=s,O[8]=l,O[10]=w||s&&s[10],O[11]=I||s&&s[11],O[12]=T||s&&s[12]||null,O[9]=A||s&&s[9]||null,O[6]=m,O[20]=function It(){return We++}(),O[21]=N,O[16]=2==o.type?s[16]:O,O}function $r(s,o,l,c,h){let m=s.data[o];if(null===m)m=function Sy(s,o,l,c,h){const m=Es(),w=Fs(),T=s.data[o]=function Ku(s,o,l,c,h,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=T),null!==m&&(w?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(s,o,l,c,h),function Um(){return pt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=h;const w=function Ga(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return ts(m,!0),m}function cf(s,o,l,c){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function pr(s,o,l){Zo(o);try{const c=s.viewQuery;null!==c&&xy(1,c,l);const h=s.template;null!==h&&xl(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Xr(s,o),s.staticViewQueries&&xy(2,s.viewQuery,l);const m=s.components;null!==m&&function tI(s,o){for(let l=0;l<o.length;l++)zv(s,o[l])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ls()}}function Ay(s,o,l,c){const h=o[2];if(128!=(128&h)){Zo(o);try{qo(o),function ns(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&xl(s,o,l,2,c);const w=3==(3&h);if(w){const A=s.preOrderCheckHooks;null!==A&&Ja(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Qo(o,A,0,null),_h(o,0)}if(function Yt(s){for(let o=xu(s);null!==o;o=wl(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],m=h[3];0==(512&h[2])&&uo(m,1),h[2]|=512}}}(o),function dI(s){for(let o=xu(s);null!==o;o=wl(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];zo(c)&&Ay(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Xr(s,o),w){const A=s.contentCheckHooks;null!==A&&Ja(o,A)}else{const A=s.contentHooks;null!==A&&Qo(o,A,1),_h(o,1)}!function Dy(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Is(~h);else{const m=h,w=l[++c],I=l[++c];vp(w,m),I(2,o[m])}}}finally{Is(-1)}}(s,o);const I=s.components;null!==I&&function Hn(s,o){for(let l=0;l<o.length;l++)Cn(s,o[l])}(o,I);const T=s.viewQuery;if(null!==T&&xy(2,T,c),w){const A=s.viewCheckHooks;null!==A&&Ja(o,A)}else{const A=s.viewHooks;null!==A&&Qo(o,A,2),_h(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,uo(o[3],-1))}finally{Ls()}}}function xl(s,o,l,c,h){const m=en(),w=2&c;try{Is(-1),w&&o.length>22&&yy(s,o,22,!1),l(c,h)}finally{Is(m)}}function Qn(s,o,l){if(Go(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,l[m],m)}}}function So(s,o,l){!eu()||(function rI(s,o,l,c){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||ia(l,o),ar(c,o);const w=l.initialInputs;for(let I=h;I<m;I++){const T=s.data[I],A=Qi(T);A&&aI(o,l,T);const N=yo(o,s,I,l);ar(N,o),null!==w&&lI(0,I-h,N,T,0,w),A&&(rr(l.index,o)[8]=N)}}(s,o,l,Lr(l,o)),128==(128&l.flags)&&function My(s,o,l){const c=l.directiveStart,h=l.directiveEnd,m=l.index,w=function co(){return pt.lFrame.currentDirectiveIndex}();try{Is(m);for(let I=c;I<h;I++){const T=s.data[I],A=o[I];Wa(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&pf(T,A)}}finally{Is(-1),Wa(w)}}(s,o,l))}function df(s,o,l=Lr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const w=c[m+1],I=-1===w?l(o,s):s[w];s[h++]=I}}}function cg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=yd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function yd(s,o,l,c,h,m,w,I,T,A){const N=22+c,O=N+h,q=function VT(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:At);return l}(N,O),ee="function"==typeof A?A():A;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:I,declTNode:o,data:q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:T,consts:ee,incompleteFirstPass:!1}}function dg(s,o,l,c){const h=hI(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&fI(s).push(c,h.length-1))}function Ao(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function hf(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,w=[];let I=null,T=null;for(let A=o.directiveStart;A<c;A++){const N=h[A],O=N.inputs,q=null===m||hd(o)?null:uI(O,m);w.push(q),I=Ao(O,A,I),T=Ao(N.outputs,A,T)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=w,o.inputs=I,o.outputs=T}function vd(s,o){const l=rr(o,s);16&l[2]||(l[2]|=32)}function hg(s,o,l,c){let h=!1;if(eu()){const m=function iI(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];U0(l,w.selectors,!1)&&(h||(h=[]),ol(ia(l,o),s,w.type),Qi(w)?(sI(s,l),h.unshift(w)):h.push(w))}return h}(s,o,l),w=null===c?null:{"":-1};if(null!==m){h=!0,Gv(l,s.data.length,m.length);for(let N=0;N<m.length;N++){const O=m[N];O.providersResolver&&O.providersResolver(O)}let I=!1,T=!1,A=cf(s,o,m.length,null);for(let N=0;N<m.length;N++){const O=m[N];l.mergedAttrs=ea(l.mergedAttrs,O.hostAttrs),ei(s,l,o,A,O),oI(A,O,w),null!==O.contentQueries&&(l.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(l.flags|=128);const q=O.type.prototype;!I&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),I=!0),!T&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),T=!0),A++}hf(s,l)}w&&function UT(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Ae(-301,!1);c.push(o[h],m)}}}(l,c,w)}return l.mergedAttrs=ea(l.mergedAttrs,l.attrs),h}function ff(s,o,l,c,h,m){const w=m.hostBindings;if(w){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const T=~o.index;(function nI(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(I)!=T&&I.push(T),I.push(c,h,w)}}function pf(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function sI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function oI(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Qi(o)&&(l[""]=s)}}function Gv(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function ei(s,o,l,c,h){s.data[c]=h;const m=h.factory||(h.factory=un(h.type)),w=new Jo(m,Qi(h),qu);s.blueprint[c]=w,l[c]=w,ff(s,o,0,c,cf(s,l,h.hostVars,At),h)}function aI(s,o,l){const c=Lr(o,s),h=cg(l),m=s[10],w=pg(s,Ml(s,h,null,l.onPush?32:16,c,o,m,m.createRenderer(c,l),null,null,null));s[o.index]=w}function rn(s,o,l,c,h,m){const w=Lr(s,o);!function Ia(s,o,l,c,h,m,w){if(null==m)s.removeAttribute(o,h,l);else{const I=null==w?fe(m):w(m,c||"",h);s.setAttribute(o,h,I,l)}}(o[11],w,m,s.value,l,c,h)}function lI(s,o,l,c,h,m){const w=m[o];if(null!==w){const I=c.setInput;for(let T=0;T<w.length;){const A=w[T++],N=w[T++],O=w[T++];null!==I?c.setInput(l,O,A,N):l[N]=O}}}function uI(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function cI(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function Cn(s,o){const l=rr(o,s);if(zo(l)){const c=l[1];48&l[2]?Ay(c,l,c.template,l[8]):l[5]>0&&Yu(l)}}function Yu(s){for(let c=xu(s);null!==c;c=wl(c))for(let h=10;h<c.length;h++){const m=c[h];if(zo(m))if(512&m[2]){const w=m[1];Ay(w,m,w.template,m[8])}else m[5]>0&&Yu(m)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=rr(l[c],s);zo(h)&&h[5]>0&&Yu(h)}}function zv(s,o){const l=rr(o,s),c=l[1];(function qv(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),pr(c,l,l[8])}function pg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gg(s){for(;s;){s[2]|=32;const o=Mu(s);if(Kl(s)&&!o)return s;s=o}return null}function mg(s,o,l,c=!0){const h=o[10];h.begin&&h.begin();try{Ay(s,o,s.template,l)}catch(w){throw c&&pI(o,w),w}finally{h.end&&h.end()}}function xy(s,o,l){oi(0),o(s,l)}function hI(s){return s[7]||(s[7]=[])}function fI(s){return s.cleanup||(s.cleanup=[])}function pI(s,o){const l=s[9],c=l?l.get(og,null):null;c&&c.handleError(o)}function Py(s,o,l,c,h){for(let m=0;m<l.length;){const w=l[m++],I=l[m++],T=o[w],A=s.data[w];null!==A.setInput?A.setInput(T,h,c,I):T[I]=h}}function Ny(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let w=0;w<o.length;w++){const I=o[w];"number"==typeof I?m=I:1==m?h=te(h,I):2==m&&(c=te(c,I+": "+o[++w]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function Ry(s,o,l,c,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&c.push(Ln(m)),nr(m))for(let I=10;I<m.length;I++){const T=m[I],A=T[1].firstChild;null!==A&&Ry(T[1],T,A,c)}const w=l.type;if(8&w)Ry(s,o,l.child,c);else if(32&w){const I=jp(l,o);let T;for(;T=I();)c.push(T)}else if(16&w){const I=Nu(o,l);if(Array.isArray(I))c.push(...I);else{const T=Mu(o[16]);Ry(T[1],T,I,c,!0)}}l=h?l.projectionNext:l.next}return c}class Ed{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Ry(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(nr(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&($n(o,c),_o(l,c))}this._attachedToViewContainer=!1}Tr(this._lView[1],this._lView)}onDestroy(o){dg(this._lView[1],this._lView,null,o)}markForCheck(){gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qm(s,o){Ws(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=o}}class Id extends Ed{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;mg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class bd extends cd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=de(o);return new gf(l,this.ngModule)}}function yg(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class gI{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){const h=this.injector.get(o,Bi,c);return h!==Bi||l===Bi?h:this.parentInjector.get(o,l,c)}}class gf extends A0{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function H0(s){return s.map(sf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return yg(this.componentDef.inputs)}get outputs(){return yg(this.componentDef.outputs)}create(o,l,c,h){let m=(h=h||this.ngModule)instanceof as?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new gI(o,m):o,I=w.get(Hu,null);if(null===I)throw new Ae(407,!1);const T=w.get(O0,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",O=c?function Wu(s,o,l){return s.selectRootElement(o,l===st.ShadowDom)}(A,c,this.componentDef.encapsulation):jh(A,N,function Oy(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),q=this.componentDef.onPush?288:272,ee=yd(0,null,null,1,0,null,null,null,null,null),_e=Ml(null,ee,null,q,null,null,I,A,T,w,null);let Fe,je;Zo(_e);try{const Je=function Kv(s,o,l,c,h,m){const w=l[1];l[22]=s;const T=$r(w,22,2,"#host",null),A=T.mergedAttrs=o.hostAttrs;null!==A&&(Ny(T,A,!0),null!==s&&(Xo(h,s,A),null!==T.classes&&Cs(h,s,T.classes),null!==T.styles&&ny(h,s,T.styles)));const N=c.createRenderer(s,o),O=Ml(l,cg(o),null,o.onPush?32:16,l[22],T,c,N,m||null,null,null);return w.firstCreatePass&&(ol(ia(T,l),w,o.type),sI(w,T),Gv(T,l.length,1)),pg(l,O),l[22]=O}(O,this.componentDef,_e,I,A);if(O)if(c)Xo(A,O,["ng-version",sg.full]);else{const{attrs:vt,classes:De}=function Jr(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&l.push(m);else{if(!Ts(h))break;h=m}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);vt&&Xo(A,O,vt),De&&De.length>0&&Cs(A,O,De.join(" "))}if(je=$a(ee,22),void 0!==l){const vt=je.projection=[];for(let De=0;De<this.ngContentSelectors.length;De++){const Dt=l[De];vt.push(null!=Dt?Array.from(Dt):null)}}Fe=function ky(s,o,l,c){const h=l[1],m=function wd(s,o,l){const c=On();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),ei(s,c,o,cf(s,o,1,null),l),hf(s,c));const h=yo(o,s,c.directiveStart,c);ar(h,o);const m=Lr(c,o);return m&&ar(m,o),h}(h,l,o);if(s[8]=l[8]=m,null!==c)for(const I of c)I(m,o);if(o.contentQueries){const I=On();o.contentQueries(1,m,I.directiveStart)}const w=On();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Is(w.index),ff(l[1],w,0,w.directiveStart,w.directiveEnd,o),pf(o,m)),m}(Je,this.componentDef,_e,[Zv]),pr(ee,_e,null)}finally{Ls()}return new mf(this.componentType,Fe,dd(je,_e),_e,je)}}class mf extends class fy{}{constructor(o,l,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new Id(h),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const m=this._rootLView;Py(m[1],m,h,o,l),vd(m,this._tNode.index)}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Zv(){const s=On();ho(Ce()[1],s)}function ci(s){let o=function Qu(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(Qi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ae(903,!1);h=o.\u0275dir}if(h){if(l){c.push(h);const w=s;w.inputs=yf(s.inputs),w.declaredInputs=yf(s.declaredInputs),w.outputs=yf(s.outputs);const I=h.hostBindings;I&&Qv(s,I);const T=h.viewQuery,A=h.contentQueries;if(T&&_g(s,T),A&&mI(s,A),ye(s.inputs,h.inputs),ye(s.declaredInputs,h.declaredInputs),ye(s.outputs,h.outputs),Qi(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let w=0;w<m.length;w++){const I=m[w];I&&I.ngInherit&&I(s),I===ci&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Yv(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ea(h.hostAttrs,l=ea(l,h.hostAttrs))}}(c)}function yf(s){return s===Or?{}:s===ft?[]:s}function _g(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function mI(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,m)=>{o(c,h,m),l(c,h,m)}:o}function Qv(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Fy=null;function $i(){if(!Fy){const s=on.Symbol;if(s&&s.iterator)Fy=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Fy=c)}}}return Fy}function ti(s){return!!Ly(s)&&(Array.isArray(s)||!(s instanceof Map)&&$i()in s)}function Ly(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Mo(s,o,l){return s[o]=l}function Ai(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Cd(s,o,l,c){const h=Ai(s,o,l);return Ai(s,o+1,c)||h}function Eg(s,o,l,c){const h=Ce();return Ai(h,za(),o)&&(Vt(),rn(wn(),h,s,o,l,c)),Eg}function Ig(s,o,l,c,h,m,w,I){const T=Ce(),A=Vt(),N=s+22,O=A.firstCreatePass?function Vy(s,o,l,c,h,m,w,I,T){const A=o.consts,N=$r(o,s,4,w||null,Ei(A,I));hg(o,l,N,Ei(A,T)),ho(o,N);const O=N.tViews=yd(2,N,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),O.queries=o.queries.embeddedTView(N)),N}(N,A,T,o,l,c,h,m,w):A.data[N];ts(O,!1);const q=T[11].createComment("");Gh(A,T,q,O),ar(q,T),pg(T,T[N]=cI(q,T,q,O)),ys(O)&&So(A,T,O),null!=w&&df(T,O,I)}function xd(s,o,l){const c=Ce();return Ai(c,za(),o)&&function us(s,o,l,c,h,m,w,I){const T=Lr(o,l);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(Py(s,l,N,c,h),Ha(o)&&vd(l,o.index)):3&o.type&&(c=function Zu(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=w?w(h,o.value||"",c):h,m.setProperty(T,c,h))}(Vt(),wn(),c,s,o,c[11],l,!1),xd}function nw(s,o,l,c,h){const w=h?"class":"style";Py(s,l,o.inputs[w],w,c)}function kl(s,o,l,c){const h=Ce(),m=Vt(),w=22+s,I=h[11],T=h[w]=jh(I,o,function su(){return pt.lFrame.currentNamespace}()),A=m.firstCreatePass?function bI(s,o,l,c,h,m,w){const I=o.consts,A=$r(o,s,2,h,Ei(I,m));return hg(o,l,A,Ei(I,w)),null!==A.attrs&&Ny(A,A.attrs,!1),null!==A.mergedAttrs&&Ny(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(w,m,h,0,o,l,c):m.data[w];ts(A,!0);const N=A.mergedAttrs;null!==N&&Xo(I,T,N);const O=A.classes;null!==O&&Cs(I,T,O);const q=A.styles;return null!==q&&ny(I,T,q),64!=(64&A.flags)&&Gh(m,h,T,A),0===function fh(){return pt.lFrame.elementDepthCount}()&&ar(T,h),function es(){pt.lFrame.elementDepthCount++}(),ys(A)&&(So(m,h,A),Qn(m,A,h)),null!==c&&df(h,A),kl}function to(){let s=On();Fs()?_p():(s=s.parent,ts(s,!1));const o=s;!function yp(){pt.lFrame.elementDepthCount--}();const l=Vt();return l.firstCreatePass&&(ho(l,s),Go(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function au(s){return 0!=(16&s.flags)}(o)&&nw(l,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ep(s){return 0!=(32&s.flags)}(o)&&nw(l,o,Ce(),o.stylesWithoutHost,!1),to}function Uy(s,o,l,c){return kl(s,o,l,c),to(),Uy}function bg(s,o,l){const c=Ce(),h=Vt(),m=s+22,w=h.firstCreatePass?function CI(s,o,l,c,h){const m=o.consts,w=Ei(m,c),I=$r(o,s,8,"ng-container",w);return null!==w&&Ny(I,w,!0),hg(o,l,I,Ei(m,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(m,h,c,o,l):h.data[m];ts(w,!0);const I=c[m]=c[11].createComment("");return Gh(h,c,I,w),ar(I,c),ys(w)&&(So(h,c,w),Qn(h,w,c)),null!=l&&df(c,w),bg}function Fl(){let s=On();const o=Vt();return Fs()?_p():(s=s.parent,ts(s,!1)),o.firstCreatePass&&(ho(o,s),Go(s)&&o.queries.elementEnd(s)),Fl}function Cg(s,o,l){return bg(s,o,l),Fl(),Cg}function By(){return Ce()}function Tg(s){return!!s&&"function"==typeof s.then}function jy(s){return!!s&&"function"==typeof s.subscribe}const TI=jy;function rw(s,o,l,c){const h=Ce(),m=Vt(),w=On();return function iw(s,o,l,c,h,m,w,I){const T=ys(c),N=s.firstCreatePass&&fI(s),O=o[8],q=hI(o);let ee=!0;if(3&c.type||I){const je=Lr(c,o),Je=I?I(je):je,vt=q.length,De=I?hn=>I(Ln(hn[c.index])):c.index;let Dt=null;if(!I&&T&&(Dt=function sn(s,o,l,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const w=h[m];if(w===l&&h[m+1]===c){const I=o[7],T=h[m+2];return I.length>T?I[T]:null}"string"==typeof w&&(m+=2)}return null}(s,o,h,c.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=m,Dt.__ngLastListenerFn__=m,ee=!1;else{m=Hy(c,o,O,m,!1);const hn=l.listen(Je,h,m);q.push(m,hn),N&&N.push(h,De,vt,vt+1)}}else m=Hy(c,o,O,m,!1);const _e=c.outputs;let Fe;if(ee&&null!==_e&&(Fe=_e[h])){const je=Fe.length;if(je)for(let Je=0;Je<je;Je+=2){const Nn=o[Fe[Je]][Fe[Je+1]].subscribe(m),jd=q.length;q.push(m,Nn),N&&N.push(h,c.index,jd,-(jd+1))}}}(m,h,h[11],w,s,o,0,c),rw}function sw(s,o,l,c){try{return!1!==l(c)}catch(h){return pI(s,h),!1}}function Hy(s,o,l,c,h){return function m(w){if(w===Function)return c;gg(2&s.flags?rr(s.index,o):o);let T=sw(o,0,c,w),A=m.__ngNextListenerFn__;for(;A;)T=sw(o,0,A,w)&&T,A=A.__ngNextListenerFn__;return h&&!1===T&&(w.preventDefault(),w.returnValue=!1),T}}function Dg(s=1){return function Ya(s){return(pt.lFrame.contextLView=function mh(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function xI(s,o,l,c,h){const m=s[l+1],w=null===o;let I=c?Ss(m):Dl(m),T=!1;for(;0!==I&&(!1===T||w);){const N=s[I+1];WT(s[I],o)&&(T=!0,s[I+1]=c?Rv(N):As(N)),I=c?Ss(N):Dl(N)}T&&(s[l+1]=c?As(m):Rv(m))}function WT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&dl(s,o)>=0}const Gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $y(s){return s.substring(Gr.key,Gr.keyEnd)}function NI(s,o){const l=Gr.textEnd;return l===o?-1:(o=Gr.keyEnd=function Ta(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Gr.key=o,l),Ca(s,o,l))}function Ca(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function gw(s,o){return function no(s,o,l,c){const h=Ce(),m=Vt(),w=Er(2);m.firstUpdatePass&&RI(m,s,w,c),o!==At&&Ai(h,w,o)&&xa(m,m.data[en()],h,h[11],s,h[w+1]=function VI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(Ks(s)))),s}(o,l),c,w)}(s,o,null,!0),gw}function zy(s){!function Ms(s,o,l,c){const h=Vt(),m=Er(2);h.firstUpdatePass&&RI(h,null,m,c);const w=Ce();if(l!==At&&Ai(w,m,l)){const I=h.data[en()];if(Pg(I,c)&&!mw(h,m)){let T=c?I.classesWithoutHost:I.stylesWithoutHost;null!==T&&(l=te(T,l||"")),nw(h,I,w,l,c)}else!function LI(s,o,l,c,h,m,w,I){h===At&&(h=ft);let T=0,A=0,N=0<h.length?h[0]:null,O=0<m.length?m[0]:null;for(;null!==N||null!==O;){const q=T<h.length?h[T+1]:void 0,ee=A<m.length?m[A+1]:void 0;let Fe,_e=null;N===O?(T+=2,A+=2,q!==ee&&(_e=O,Fe=ee)):null===O||null!==N&&N<O?(T+=2,_e=N):(A+=2,_e=O,Fe=ee),null!==_e&&xa(s,o,l,c,_e,Fe,w,I),N=T<h.length?h[T]:null,O=A<m.length?m[A]:null}}(h,I,w,w[11],w[m+1],w[m+1]=function kI(s,o,l){if(null==l||""===l)return ft;const c=[],h=Ks(l);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(c,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(c,m,h[m]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,m)}}(ai,Sa,s,!0)}function Sa(s,o){for(let l=function PI(s){return function cw(s){Gr.key=0,Gr.keyEnd=0,Gr.value=0,Gr.valueEnd=0,Gr.textEnd=s.length}(s),NI(s,Ca(s,0,Gr.textEnd))}(o);l>=0;l=NI(o,l))ai(s,$y(o),!0)}function mw(s,o){return o>=s.expandoStartIndex}function RI(s,o,l,c){const h=s.data;if(null===h[l+1]){const m=h[en()],w=mw(s,l);Pg(m,c)&&null===o&&!w&&(o=!1),o=function OI(s,o,l,c){const h=function Kr(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Ma(l=Aa(null,s,o,l,c),o.attrs,c),m=null);else{const w=o.directiveStylingLast;if(-1===w||s[w]!==h)if(l=Aa(h,s,o,l,c),null===m){let T=function ZT(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Dl(c))return s[Ss(c)]}(s,o,c);void 0!==T&&Array.isArray(T)&&(T=Aa(null,s,o,T[1],c),T=Ma(T,o.attrs,c),function YT(s,o,l,c){s[Ss(l?o.classBindings:o.styleBindings)]=c}(s,o,c,T))}else m=function QT(s,o,l){let c;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)c=Ma(c,s[m].hostAttrs,l);return Ma(c,o.attrs,l)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,c),function MI(s,o,l,c,h,m){let w=m?o.classBindings:o.styleBindings,I=Ss(w),T=Dl(w);s[c]=l;let N,A=!1;if(Array.isArray(l)){const O=l;N=O[1],(null===N||dl(O,N)>0)&&(A=!0)}else N=l;if(h)if(0!==T){const q=Ss(s[I+1]);s[c+1]=Do(q,I),0!==q&&(s[q+1]=pd(s[q+1],c)),s[I+1]=function Iy(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Do(I,0),0!==I&&(s[I+1]=pd(s[I+1],c)),I=c;else s[c+1]=Do(T,0),0===I?I=c:s[T+1]=pd(s[T+1],c),T=c;A&&(s[c+1]=As(s[c+1])),xI(s,N,c,!0),xI(s,N,c,!1),function qT(s,o,l,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&dl(m,o)>=0&&(l[c+1]=Rv(l[c+1]))}(o,N,s,c,m),w=Do(I,T),m?o.classBindings=w:o.styleBindings=w}(h,m,o,l,w,c)}}function Aa(s,o,l,c,h){let m=null;const w=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<w&&(m=o[I],c=Ma(c,m.hostAttrs,h),m!==s);)I++;return null!==s&&(l.directiveStylingLast=I),c}function Ma(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const w=o[m];"number"==typeof w?h=w:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ai(s,w,!!l||o[++m]))}return void 0===s?null:s}function xa(s,o,l,c,h,m,w,I){if(!(3&o.type))return;const T=s.data,A=T[I+1];qy(function Sl(s){return 1==(1&s)}(A)?yw(T,o,l,h,Dl(A),w):void 0)||(qy(m)||function se(s){return 2==(2&s)}(A)&&(m=yw(T,null,l,h,I,w)),function hv(s,o,l,c,h){if(o)h?s.addClass(l,c):s.removeClass(l,c);else{let m=-1===c.indexOf("-")?void 0:R.DashCase;null==h?s.removeStyle(l,c,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=R.Important),s.setStyle(l,c,h,m))}}(c,w,lo(en(),l),h,m))}function yw(s,o,l,c,h,m){const w=null===o;let I;for(;h>0;){const T=s[h],A=Array.isArray(T),N=A?T[1]:T,O=null===N;let q=l[h+1];q===At&&(q=O?ft:void 0);let ee=O?cl(q,c):N===c?q:void 0;if(A&&!qy(ee)&&(ee=cl(T,c)),qy(ee)&&(I=ee,w))return I;const _e=s[h+1];h=w?Ss(_e):Dl(_e)}if(null!==o){let T=m?o.residualClasses:o.residualStyles;null!=T&&(I=cl(T,c))}return I}function qy(s){return void 0!==s}function Pg(s,o){return 0!=(s.flags&(o?16:32))}function Xu(s,o=""){const l=Ce(),c=Vt(),h=s+22,m=c.firstCreatePass?$r(c,h,1,o,null):c.data[h],w=l[h]=function Bh(s,o){return s.createText(o)}(l[11],o);Gh(c,l,w,m),ts(m,!1)}function Ll(s){return Vl("",s,""),Ll}function Vl(s,o,l){const c=Ce(),h=function Dd(s,o,l,c){return Ai(s,za(),l)?o+fe(l)+c:At}(c,s,o,l);return h!==At&&function Pl(s,o,l){const c=lo(o,s);!function Hp(s,o,l){s.setValue(o,l)}(s[11],c,l)}(c,en(),h),Vl}const Pa=void 0;var qI=["en",[["a","p"],["AM","PM"],Pa],[["AM","PM"],Pa,Pa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pa,"{1} 'at' {0}",Pa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Fg(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Rd={};function Xy(s){const o=function WI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Aw(o);if(l)return l;const c=o.split("-")[0];if(l=Aw(c),l)return l;if("en"===c)return qI;throw new Ae(701,!1)}function Lg(s){return Xy(s)[yt.PluralCase]}function Aw(s){return s in Rd||(Rd[s]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[s]),Rd[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Po="en-US";let ZI=Po;function Zg(s,o,l,c,h){if(s=B(s),Array.isArray(s))for(let m=0;m<s.length;m++)Zg(s[m],o,l,c,h);else{const m=Vt(),w=Ce();let I=bo(s)?s:B(s.provide),T=_v(s);const A=On(),N=1048575&A.providerIndexes,O=A.directiveStart,q=A.providerIndexes>>20;if(bo(s)||!s.multi){const ee=new Jo(T,h,qu),_e=Vd(I,o,h?N:N+q,O);-1===_e?(ol(ia(A,w),m,I),zw(m,s,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(ee),w.push(ee)):(l[_e]=ee,w[_e]=ee)}else{const ee=Vd(I,o,N+q,O),_e=Vd(I,o,N,N+q),Fe=ee>=0&&l[ee],je=_e>=0&&l[_e];if(h&&!je||!h&&!Fe){ol(ia(A,w),m,I);const Je=function c_(s,o,l,c,h){const m=new Jo(s,l,qu);return m.multi=[],m.index=o,m.componentProviders=0,yb(m,h,c&&!l),m}(h?Pf:qw,l.length,h,c,T);!h&&je&&(l[_e].providerFactory=Je),zw(m,s,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(Je),w.push(Je)}else zw(m,s,ee>-1?ee:_e,yb(l[h?_e:ee],T,!h&&c));!h&&c&&je&&l[_e].componentProviders++}}}function zw(s,o,l,c){const h=bo(o),m=function ng(s){return!!s.useClass}(o);if(h||m){const T=(m?B(o.useClass):o).prototype.ngOnDestroy;if(T){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=A.indexOf(l);-1===N?A.push(l,[c,T]):A[N+1].push(c,T)}else A.push(l,T)}}}function yb(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Vd(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function qw(s,o,l,c){return Yg(this.multi,[])}function Pf(s,o,l,c){const h=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,I=yo(l,l[1],this.providerFactory.index,c);m=I.slice(0,w),Yg(h,m);for(let T=w;T<I.length;T++)m.push(I[T])}else m=[],Yg(h,m);return m}function Yg(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Nf(s,o=[]){return l=>{l.providersResolver=(c,h)=>function ED(s,o,l){const c=Vt();if(c.firstCreatePass){const h=Qi(s);Zg(l,c.data,c.blueprint,h,!0),Zg(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class tc{}class Ww{}function Kw(s,o){return new Bl(s,o??null)}class Bl extends tc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bd(this);const c=Mt(o);this._bootstrapComponents=ls(c.bootstrap),this._r3Injector=be(o,l,[{provide:tc,useValue:this},{provide:cd,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class d_ extends Ww{constructor(o){super(),this.moduleType=o}create(o){return new Bl(this.moduleType,o)}}class ID extends tc{constructor(o,l,c){super(),this.componentFactoryResolver=new bd(this),this.instance=null;const h=new rg([...o,{provide:tc,useValue:this},{provide:cd,useValue:this.componentFactoryResolver}],l||ud(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Qg(s,o,l=null){return new ID(s,o,l).injector}let bD=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Ne(0,l.type),h=c.length>0?Qg([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=pn({token:s,providedIn:"environment",factory:()=>new s(ir(as))}),s})();function h_(s){s.getStandaloneInjector=o=>o.get(bD).getOrCreateStandaloneInjector(s)}function nE(s,o,l,c){return function Ud(s,o,l,c,h,m){const w=o+l;return Ai(s,w,h)?Mo(s,w+1,m?c.call(m,h):c(h)):Lf(s,w+1)}(Ce(),qr(),s,o,l,c)}function g_(s,o,l,c,h,m,w){return function m_(s,o,l,c,h,m,w,I,T){const A=o+l;return function Xs(s,o,l,c,h,m){const w=Cd(s,o,l,c);return Cd(s,o+2,h,m)||w}(s,A,h,m,w,I)?Mo(s,A+4,T?c.call(T,h,m,w,I):c(h,m,w,I)):Lf(s,A+4)}(Ce(),qr(),s,o,l,c,h,m,w)}function Lf(s,o){const l=s[o];return l===At?void 0:l}function __(s){return o=>{setTimeout(s,void 0,o)}}const Ro=class Cb extends f.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let h=o,m=l||(()=>null),w=c;if(o&&"object"==typeof o){const T=o;h=T.next?.bind(T),m=T.error?.bind(T),w=T.complete?.bind(T)}this.__isAsync&&(m=__(m),h&&(h=__(h)),w&&(w=__(w)));const I=super.subscribe({next:h,error:m,complete:w});return o instanceof X.w&&o.add(I),I}};function Tb(){return this._results[$i()]()}class cE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=$i(),c=cE.prototype;c[l]||(c[l]=Tb)}get changes(){return this._changes||(this._changes=new Ro)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Sn(o);(this._changesDetected=!function Hm(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let em=(()=>{class s{}return s.__NG_ELEMENT_ID__=dE,s})();const PD=em,ND=class extends PD{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,h=Ml(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(h[19]=w.createEmbeddedView(c)),pr(c,h,o),new Ed(h)}};function dE(){return Vf(On(),Ce())}function Vf(s,o){return 4&s.type?new ND(o,s,dd(s,o)):null}let Uf=(()=>{class s{}return s.__NG_ELEMENT_ID__=RD,s})();function RD(){return E_(On(),Ce())}const hE=Uf,Db=class extends hE{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const o=go(this._hostTNode,this._hostLView);if(cu(o)){const l=Li(o,this._hostLView),c=ta(o);return new oa(l[1].data[c+8],l)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=v_(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let h,m;"number"==typeof c?h=c:null!=c&&(h=c.index,m=c.injector);const w=o.createEmbeddedView(l||{},m);return this.insert(w,h),w}createComponent(o,l,c,h,m){const w=o&&!function Vi(s){return"function"==typeof s}(o);let I;if(w)I=l;else{const O=l||{};I=O.index,c=O.injector,h=O.projectableNodes,m=O.environmentInjector||O.ngModuleRef}const T=w?o:new gf(de(o)),A=c||this.parentInjector;if(!m&&null==T.ngModule){const q=(w?A:this.parentInjector).get(as,null);q&&(m=q)}const N=T.create(A,h,void 0,m);return this.insert(N.hostView,I),N}insert(o,l){const c=o._lView,h=c[1];if(function dh(s){return nr(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const O=c[3],q=new Db(O,O[6],O[3]);q.detach(q.indexOf(o))}}const m=this._adjustIndex(l),w=this._lContainer;!function zc(s,o,l,c){const h=10+c,m=l.length;c>0&&(l[h-1][4]=o),c<m-10?(o[4]=l[h],Mc(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const w=o[17];null!==w&&l!==w&&function qc(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(w,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,c,w,m);const I=zh(m,w),T=c[11],A=pa(T,w[7]);return null!==A&&function $p(s,o,l,c,h,m){c[0]=h,c[6]=o,Ws(s,c,l,1,h,m)}(h,w[6],T,c,A,I),o.attachToViewContainerRef(),Mc(w_(w),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=v_(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=$n(this._lContainer,l);c&&(_o(w_(this._lContainer),l),Tr(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=$n(this._lContainer,l);return c&&null!=_o(w_(this._lContainer),l)?new Ed(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function v_(s){return s[8]}function w_(s){return s[8]||(s[8]=[])}function E_(s,o){let l;const c=o[s.index];if(nr(c))l=c;else{let h;if(8&s.type)h=Ln(c);else{const m=o[11];h=m.createComment("");const w=Lr(s,o);zs(m,pa(m,w),h,function Wp(s,o){return s.nextSibling(o)}(m,w),!1)}o[s.index]=l=cI(c,o,h,s),pg(o,l)}return new Db(l,s,o)}class fE{constructor(o){this.queryList=o,this.matches=null}clone(){return new fE(this.queryList)}setDirty(){this.queryList.setDirty()}}class tm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<c;m++){const w=l.getByIndex(m);h.push(this.queries[w.indexInDeclarationView].clone())}return new tm(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==T_(o,l).matches&&this.queries[l].setDirty()}}class Mb{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class nm{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new nm(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pE{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new pE(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,l,gE(l,m)),this.matchTNodeWithReadOption(o,l,bi(l,o,m,!1,!1))}else c===em?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,bi(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===ju||h===Uf||h===em&&4&l.type)this.addMatch(l.index,-2);else{const m=bi(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function gE(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function yE(s,o,l,c){return-1===l?function mE(s,o){return 11&s.type?dd(s,o):4&s.type?Vf(s,o):null}(o,s):-2===l?function Bf(s,o,l){return l===ju?dd(o,s):l===em?Vf(o,s):l===Uf?E_(o,s):void 0}(s,o,c):yo(s,s[1],l,o)}function _E(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,w=l.matches,I=[];for(let T=0;T<w.length;T+=2){const A=w[T];I.push(A<0?null:yE(o,m[A],w[T+1],l.metadata.read))}h.matches=I}return h.matches}function rm(s,o,l,c){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const w=_E(s,o,h,l);for(let I=0;I<m.length;I+=2){const T=m[I];if(T>0)c.push(w[I/2]);else{const A=m[I+1],N=o[-T];for(let O=10;O<N.length;O++){const q=N[O];q[17]===q[3]&&rm(q[1],q,A,c)}if(null!==N[9]){const O=N[9];for(let q=0;q<O.length;q++){const ee=O[q];rm(ee[1],ee,A,c)}}}}}return c}function xb(s){const o=Ce(),l=Vt(),c=Ka();oi(c+1);const h=T_(l,c);if(s.dirty&&function Vm(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?rm(l,o,c,[]):_E(l,o,h,c);s.reset(m,P0),s.notifyOnChanges()}return!0}return!1}function I_(s,o,l){const c=Vt();c.firstCreatePass&&(Pb(c,new Mb(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),C_(c,Ce(),o)}function Na(s,o,l,c){const h=Vt();if(h.firstCreatePass){const m=On();Pb(h,new Mb(o,l,c),m.index),function FD(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}C_(h,Ce(),l)}function b_(){return function kD(s,o){return s[19].queries[o].queryList}(Ce(),Ka())}function C_(s,o,l){const c=new cE(4==(4&l));dg(s,o,c,c.destroy),null===o[19]&&(o[19]=new tm),o[19].queries.push(new fE(c))}function Pb(s,o,l){null===s.queries&&(s.queries=new nm),s.queries.track(new pE(o,l))}function T_(s,o){return s.queries.getByIndex(o)}function Ht(...s){}const xE=new cn("Application Initializer");let ic=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Ht,this.reject=Ht,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Tg(m))l.push(m);else if(TI(m)){const w=new Promise((I,T)=>{m.subscribe({complete:I,error:T})});l.push(w)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ir(xE,8))},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const PE=new cn("AppId",{providedIn:"root",factory:function Fn(){return`${ro()}${ro()}${ro()}`}});function ro(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NE=new cn("Platform Initializer"),tS=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cm=new cn("appBootstrapListener"),RE=new cn("AnimationModuleType");let rS=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const O_=new cn("LocaleId",{providedIn:"root",factory:()=>Rh(O_,Xe.Optional|Xe.SkipSelf)||function OE(){return typeof $localize<"u"&&$localize.locale||Po}()}),iS=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yr{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let $b=(()=>{class s{compileModuleSync(l){return new d_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=ls(Mt(l).declarations).reduce((w,I)=>{const T=de(I);return T&&w.push(new gf(T)),w},[]);return new yr(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const QM=(()=>Promise.resolve(0))();function kE(s){typeof Zone>"u"?QM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function oS(){let s=on.requestAnimationFrame,o=on.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function jl(s){const o=()=>{!function Ra(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(on,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Wb(s),s.isCheckStableRunning=!0,FE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Wb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,m,w,I)=>{try{return sc(s),l.invokeTask(h,m,w,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),hm(s)}},onInvoke:(l,c,h,m,w,I,T)=>{try{return sc(s),l.invoke(h,m,w,I,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),hm(s)}},onHasTask:(l,c,h,m)=>{l.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Wb(s),FE(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new Ae(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+h,o,dm,Ht,Ht);try{return m.runTask(w,l,c)}finally{m.cancelTask(w)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const dm={};function FE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Wb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sc(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hm(s){s._nesting--,FE(s)}class aS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}const Kb=new cn(""),LE=new cn("");let Hl,Zb=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hl||(function lS(s){Hl=s}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),kE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ir(xs),ir(fm),ir(LE))},s.\u0275prov=pn({token:s,factory:s.\u0275fac}),s})(),fm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Hl?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ko=null;const Gf=new cn("AllowMultipleToken"),k_=new cn("PlatformDestroyListeners");class VE{constructor(o,l){this.name=o,this.token=l}}function BE(s,o,l=[]){const c=`Platform: ${o}`,h=new cn(c);return(m=[])=>{let w=qf();if(!w||w.injector.get(Gf,!1)){const I=[...l,...m,{provide:h,useValue:!0}];s?s(I):function UE(s){if(ko&&!ko.get(Gf,!1))throw new Ae(400,!1);ko=s;const o=s.get(pm);(function oc(s){const o=s.get(NE,null);o&&o.forEach(l=>l())})(s)}(function zf(s=[],o){return jn.create({name:o,providers:[{provide:tf,useValue:"platform"},{provide:k_,useValue:new Set([()=>ko=null])},...s]})}(I,c))}return function jE(s){const o=qf();if(!o)throw new Ae(401,!1);return o}()}}function qf(){return ko?.get(pm)??null}let pm=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function Wf(s,o){let l;return l="noop"===s?new aS:("zone.js"===s?void 0:s)||new xs(o),l}(c?.ngZone,function HE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:xs,useValue:h}];return h.run(()=>{const w=jn.create({providers:m,parent:this.injector,name:l.moduleType.name}),I=l.create(w),T=I.injector.get(og,null);if(!T)throw new Ae(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{T.handleError(N)}});I.onDestroy(()=>{Kf(this._modules,I),A.unsubscribe()})}),function Qb(s,o,l){try{const c=l();return Tg(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(T,h,()=>{const A=I.injector.get(ic);return A.runInitializers(),A.donePromise.then(()=>(function Mw(s){Jn(s,"Expected localeId to be defined"),"string"==typeof s&&(ZI=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(O_,Po)||Po),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,c=[]){const h=gm({},c);return function uS(s,o,l){const c=new d_(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const c=l.injector.get(mm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ae(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(k_,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ir(jn))},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function gm(s,o){return Array.isArray(o)?o.reduce(gm,s):{...s,...o}}let mm=(()=>{class s{constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new k.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),kE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),A.unsubscribe()}});this.isStable=(0,re.T)(m,w.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const h=l instanceof A0;if(!this._injector.get(ic).done)throw!h&&_t(l),new Ae(405,false);let w;w=h?l:this._injector.get(cd).resolveComponentFactory(l),this.componentTypes.push(w.componentType);const I=function cS(s){return s.isBoundToModule}(w)?void 0:this._injector.get(tc),A=w.create(jn.NULL,[],c||w.selector,I),N=A.location.nativeElement,O=A.injector.get(Kb,null);return O?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Kf(this.components,A),O?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Kf(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(cm,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Kf(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ae(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(ir(xs),ir(as),ir(og))},s.\u0275prov=pn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Kf(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Yf=!0,Jb=!1;function Qf(){return Jb=!0,Yf}function ex(){if(Jb)throw new Error("Cannot enable prod mode after platform setup.");Yf=!1}let F_=(()=>{class s{}return s.__NG_ELEMENT_ID__=hS,s})();function hS(s){return function fS(s,o,l){if(Ha(s)&&!l){const c=rr(s.index,o);return new Ed(c,c)}return 47&s.type?new Ed(o[16],o):null}(On(),Ce(),16==(16&s))}class ep{constructor(){}supports(o){return ti(o)}create(o){return new mS(o)}}const cc=(s,o)=>o;class mS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||cc}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,m=null;for(;l||c;){const w=!c||l&&l.currentIndex<oC(c,h,m)?l:c,I=oC(w,h,m),T=w.currentIndex;if(w===c)h--,c=c._nextRemoved;else if(l=l._next,null==w.previousIndex)h++;else{m||(m=[]);const A=I-h,N=T-h;if(A!=N){for(let q=0;q<A;q++){const ee=q<m.length?m[q]:m[q]=0,_e=ee+q;N<=_e&&_e<A&&(m[q]=ee+1)}m[w.previousIndex]=N-A}}I!==T&&o(w,I,T)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!ti(o))throw new Ae(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,w,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)m=o[I],w=this._trackByFn(I,m),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,m,w,I)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,w,I),c=!0),l=l._next}else h=0,function wg(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[$i()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,I=>{w=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,I,w,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,w,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new sC(l,c),m,h),o}_verifyReinsertion(o,l,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new $l),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $l),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sC{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class $l{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new yS,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oC(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class aC{constructor(){}supports(o){return o instanceof Map||Ly(o)}create(){return new _S}}class _S{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Ly(o)))throw new Ae(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,w=h._next;return m&&(m._next=w),w&&(w._prev=m),h._next=null,h._prev=null,h}const c=new vS(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class vS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lC(){return new V_([new ep])}let V_=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||lC()),deps:[[s,new wu,new En]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Ae(901,!1)}}return s.\u0275prov=pn({token:s,providedIn:"root",factory:lC}),s})();function uC(){return new WE([new aC])}let WE=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||uC()),deps:[[s,new wu,new En]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Ae(901,!1)}}return s.\u0275prov=pn({token:s,providedIn:"root",factory:uC}),s})();const ix=BE(null,"core",[]);let IS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ir(mm))},s.\u0275mod=kr({type:s}),s.\u0275inj=Tn({}),s})();function bS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},5003:(at,Te,V)=>{V.d(Te,{Z:()=>Ae});var f=V(7748),X=V(4692),k=V(5402),re=V(8118);class oe{constructor(fe,we){this._delegate=fe,this.firebase=we,(0,k._addComponent)(fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,we=k._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(fe);return!ke.isInitialized()&&"EXPLICIT"===(null===(Ke=ke.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:we})}_removeServiceInstance(fe,we=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(we)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),F=function te(){const xe=function le(xe){const fe={},we={__esModule:!0,initializeApp:function ze(wt,Kt={}){const lt=k.initializeApp(wt,Kt);if((0,f.r3)(fe,lt.name))return fe[lt.name];const Ut=new xe(lt,we);return fe[lt.name]=Ut,Ut},app:ke,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Nt(wt){const Kt=wt.name,lt=Kt.replace("-compat","");if(k._registerComponent(wt)&&"PUBLIC"===wt.type){const Ut=(bt=ke())=>{if("function"!=typeof bt[lt])throw ye.create("invalid-app-argument",{appName:Kt});return bt[lt]()};void 0!==wt.serviceProps&&(0,f.ZB)(Ut,wt.serviceProps),we[lt]=Ut,xe.prototype[lt]=function(...bt){return this._getService.bind(this,Kt).apply(this,wt.multipleInstances?bt:[])}}return"PUBLIC"===wt.type?we[lt]:null},removeApp:function Ke(wt){delete fe[wt]},useAsService:function fn(wt,Kt){return"serverAuth"===Kt?null:Kt},modularAPIs:k}};function ke(wt){if(!(0,f.r3)(fe,wt=wt||k._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:wt});return fe[wt]}return we.default=we,Object.defineProperty(we,"apps",{get:function Et(){return Object.keys(fe).map(wt=>fe[wt])}}),ke.App=xe,we}(oe);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:te,extendNamespace:function fe(we){(0,f.ZB)(xe,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),xe}(),j=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=F;!function Ee(xe){(0,k.registerVersion)("@firebase/app-compat","0.2.13",xe)}()},5402:(at,Te,V)=>{V.r(Te),V.d(Te,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>$o,_DEFAULT_ENTRY_NAME:()=>Rr,_addComponent:()=>qe,_addOrOverwriteComponent:()=>st,_apps:()=>Ie,_clearComponents:()=>Or,_components:()=>Ot,_getProvider:()=>Ri,_registerComponent:()=>on,_removeServiceInstance:()=>yi,deleteApp:()=>ps,getApp:()=>kt,getApps:()=>jt,initializeApp:()=>Xt,onLog:()=>cr,registerVersion:()=>_i,setLogLevel:()=>Oi});var f=V(1670),X=V(4692),k=V(8118),re=V(7748);let K,ye;const F=new WeakMap,j=new WeakMap,B=new WeakMap,ie=new WeakMap,Ee=new WeakMap;let fe={get(ae,ne,Se){if(ae instanceof IDBTransaction){if("done"===ne)return j.get(ae);if("objectStoreNames"===ne)return ae.objectStoreNames||B.get(ae);if("store"===ne)return Se.objectStoreNames[1]?void 0:Se.objectStore(Se.objectStoreNames[0])}return ze(ae[ne])},set:(ae,ne,Se)=>(ae[ne]=Se,!0),has:(ae,ne)=>ae instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in ae};function ke(ae){return"function"==typeof ae?function Ke(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...ne){return ae.apply(Et(this),ne),ze(F.get(this))}:function(...ne){return ze(ae.apply(Et(this),ne))}:function(ne,...Se){const Me=ae.call(Et(this),ne,...Se);return B.set(Me,ne.sort?ne.sort():[ne]),ze(Me)}}(ae):(ae instanceof IDBTransaction&&function xe(ae){if(j.has(ae))return;const ne=new Promise((Se,Me)=>{const gt=()=>{ae.removeEventListener("complete",xt),ae.removeEventListener("error",Zt),ae.removeEventListener("abort",Zt)},xt=()=>{Se(),gt()},Zt=()=>{Me(ae.error||new DOMException("AbortError","AbortError")),gt()};ae.addEventListener("complete",xt),ae.addEventListener("error",Zt),ae.addEventListener("abort",Zt)});j.set(ae,ne)}(ae),((ae,ne)=>ne.some(Se=>ae instanceof Se))(ae,function le(){return K||(K=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,fe):ae)}function ze(ae){if(ae instanceof IDBRequest)return function Ae(ae){const ne=new Promise((Se,Me)=>{const gt=()=>{ae.removeEventListener("success",xt),ae.removeEventListener("error",Zt)},xt=()=>{Se(ze(ae.result)),gt()},Zt=()=>{Me(ae.error),gt()};ae.addEventListener("success",xt),ae.addEventListener("error",Zt)});return ne.then(Se=>{Se instanceof IDBCursor&&F.set(Se,ae)}).catch(()=>{}),Ee.set(ne,ae),ne}(ae);if(ie.has(ae))return ie.get(ae);const ne=ke(ae);return ne!==ae&&(ie.set(ae,ne),Ee.set(ne,ae)),ne}const Et=ae=>Ee.get(ae),wt=["get","getKey","getAll","getAllKeys","count"],Kt=["put","add","delete","clear"],lt=new Map;function Ut(ae,ne){if(!(ae instanceof IDBDatabase)||ne in ae||"string"!=typeof ne)return;if(lt.get(ne))return lt.get(ne);const Se=ne.replace(/FromIndex$/,""),Me=ne!==Se,gt=Kt.includes(Se);if(!(Se in(Me?IDBIndex:IDBObjectStore).prototype)||!gt&&!wt.includes(Se))return;const xt=function(){var Zt=(0,f.Z)(function*(Rn,...Bt){const zr=this.transaction(Rn,gt?"readwrite":"readonly");let si=zr.store;return Me&&(si=si.index(Bt.shift())),(yield Promise.all([si[Se](...Bt),gt&&zr.done]))[0]});return function(Bt){return Zt.apply(this,arguments)}}();return lt.set(ne,xt),xt}!function we(ae){fe=ae(fe)}(ae=>({...ae,get:(ne,Se,Me)=>Ut(ne,Se)||ae.get(ne,Se,Me),has:(ne,Se)=>!!Ut(ne,Se)||ae.has(ne,Se)}));class bt{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Se=>{if(function qt(ae){return"VERSION"===ae.getComponent()?.type}(Se)){const Me=Se.getImmediate();return`${Me.library}/${Me.version}`}return null}).filter(Se=>Se).join(" ")}}const tt="@firebase/app",Ni=new k.Yd("@firebase/app"),Rr="[DEFAULT]",Xn={[tt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ie=new Map,Ot=new Map;function qe(ae,ne){try{ae.container.addComponent(ne)}catch(Se){Ni.debug(`Component ${ne.name} failed to register with FirebaseApp ${ae.name}`,Se)}}function st(ae,ne){ae.container.addOrOverwriteComponent(ne)}function on(ae){const ne=ae.name;if(Ot.has(ne))return Ni.debug(`There were multiple attempts to register component ${ne}.`),!1;Ot.set(ne,ae);for(const Se of Ie.values())qe(Se,ae);return!0}function Ri(ae,ne){const Se=ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Se&&Se.triggerHeartbeat(),ae.container.getProvider(ne)}function yi(ae,ne,Se=Rr){Ri(ae,ne).clearInstance(Se)}function Or(){Ot.clear()}const er=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(ne,Se,Me){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Se),this._name=Se.name,this._automaticDataCollectionEnabled=Se.automaticDataCollectionEnabled,this._container=Me,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const $o="9.23.0";function Xt(ae,ne={}){let Se=ae;"object"!=typeof ne&&(ne={name:ne});const Me=Object.assign({name:Rr,automaticDataCollectionEnabled:!1},ne),gt=Me.name;if("string"!=typeof gt||!gt)throw er.create("bad-app-name",{appName:String(gt)});if(Se||(Se=(0,re.aH)()),!Se)throw er.create("no-options");const xt=Ie.get(gt);if(xt){if((0,re.vZ)(Se,xt.options)&&(0,re.vZ)(Me,xt.config))return xt;throw er.create("duplicate-app",{appName:gt})}const Zt=new X.H0(gt);for(const Bt of Ot.values())Zt.addComponent(Bt);const Rn=new gn(Se,Me,Zt);return Ie.set(gt,Rn),Rn}function kt(ae=Rr){const ne=Ie.get(ae);if(!ne&&ae===Rr&&(0,re.aH)())return Xt();if(!ne)throw er.create("no-app",{appName:ae});return ne}function jt(){return Array.from(Ie.values())}function ps(ae){return vr.apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(ae){const ne=ae.name;Ie.has(ne)&&(Ie.delete(ne),yield Promise.all(ae.container.getProviders().map(Se=>Se.delete())),ae.isDeleted=!0)})).apply(this,arguments)}function _i(ae,ne,Se){var Me;let gt=null!==(Me=Xn[ae])&&void 0!==Me?Me:ae;Se&&(gt+=`-${Se}`);const xt=gt.match(/\s|\//),Zt=ne.match(/\s|\//);if(xt||Zt){const Rn=[`Unable to register library "${gt}" with version "${ne}":`];return xt&&Rn.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),xt&&Zt&&Rn.push("and"),Zt&&Rn.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void Ni.warn(Rn.join(" "))}on(new X.wA(`${gt}-version`,()=>({library:gt,version:ne}),"VERSION"))}function cr(ae,ne){if(null!==ae&&"function"!=typeof ae)throw er.create("invalid-log-argument");(0,k.Am)(ae,ne)}function Oi(ae){(0,k.Ub)(ae)}const G="firebase-heartbeat-store";let H=null;function Z(){return H||(H=function Nt(ae,ne,{blocked:Se,upgrade:Me,blocking:gt,terminated:xt}={}){const Zt=indexedDB.open(ae,ne),Rn=ze(Zt);return Me&&Zt.addEventListener("upgradeneeded",Bt=>{Me(ze(Zt.result),Bt.oldVersion,Bt.newVersion,ze(Zt.transaction),Bt)}),Se&&Zt.addEventListener("blocked",Bt=>Se(Bt.oldVersion,Bt.newVersion,Bt)),Rn.then(Bt=>{xt&&Bt.addEventListener("close",()=>xt()),gt&&Bt.addEventListener("versionchange",zr=>gt(zr.oldVersion,zr.newVersion,zr))}).catch(()=>{}),Rn}("firebase-heartbeat-database",1,{upgrade:(ae,ne)=>{0===ne&&ae.createObjectStore(G)}}).catch(ae=>{throw er.create("idb-open",{originalErrorMessage:ae.message})})),H}function J(){return(J=(0,f.Z)(function*(ae){try{return yield(yield Z()).transaction(G).objectStore(G).get(Mt(ae))}catch(ne){if(ne instanceof re.ZR)Ni.warn(ne.message);else{const Se=er.create("idb-get",{originalErrorMessage:ne?.message});Ni.warn(Se.message)}}})).apply(this,arguments)}function Be(ae,ne){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(ae,ne){try{const Me=(yield Z()).transaction(G,"readwrite");yield Me.objectStore(G).put(ne,Mt(ae)),yield Me.done}catch(Se){if(Se instanceof re.ZR)Ni.warn(Se.message);else{const Me=er.create("idb-set",{originalErrorMessage:Se?.message});Ni.warn(Me.message)}}})).apply(this,arguments)}function Mt(ae){return`${ae.name}!${ae.options.appId}`}class nt{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Se=this.container.getProvider("app").getImmediate();this._storage=new wr(Se),this._heartbeatsCachePromise=this._storage.read().then(Me=>(this._heartbeatsCache=Me,Me))}triggerHeartbeat(){var ne=this;return(0,f.Z)(function*(){const Me=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=rt();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==gt&&!ne._heartbeatsCache.heartbeats.some(xt=>xt.date===gt))return ne._heartbeatsCache.heartbeats.push({date:gt,agent:Me}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(xt=>{const Zt=new Date(xt.date).valueOf();return Date.now()-Zt<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,f.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Se=rt(),{heartbeatsToSend:Me,unsentEntries:gt}=function tn(ae,ne=1024){const Se=[];let Me=ae.slice();for(const gt of ae){const xt=Se.find(Zt=>Zt.agent===gt.agent);if(xt){if(xt.dates.push(gt.date),Gt(Se)>ne){xt.dates.pop();break}}else if(Se.push({agent:gt.agent,dates:[gt.date]}),Gt(Se)>ne){Se.pop();break}Me=Me.slice(1)}return{heartbeatsToSend:Se,unsentEntries:Me}}(ne._heartbeatsCache.heartbeats),xt=(0,re.L)(JSON.stringify({version:2,heartbeats:Me}));return ne._heartbeatsCache.lastSentHeartbeatDate=Se,gt.length>0?(ne._heartbeatsCache.heartbeats=gt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),xt})()}}function rt(){return(new Date).toISOString().substring(0,10)}class wr{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,f.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function de(ae){return J.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Se=this;return(0,f.Z)(function*(){var Me;if(yield Se._canUseIndexedDBPromise){const xt=yield Se.read();return Be(Se.app,{lastSentHeartbeatDate:null!==(Me=ne.lastSentHeartbeatDate)&&void 0!==Me?Me:xt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Se=this;return(0,f.Z)(function*(){var Me;if(yield Se._canUseIndexedDBPromise){const xt=yield Se.read();return Be(Se.app,{lastSentHeartbeatDate:null!==(Me=ne.lastSentHeartbeatDate)&&void 0!==Me?Me:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...ne.heartbeats]})}})()}}function Gt(ae){return(0,re.L)(JSON.stringify({version:2,heartbeats:ae})).length}!function ii(ae){on(new X.wA("platform-logger",ne=>new bt(ne),"PRIVATE")),on(new X.wA("heartbeat",ne=>new nt(ne),"PRIVATE")),_i(tt,"0.9.13",ae),_i(tt,"0.9.13","esm2017"),_i("fire-js","")}("")},4692:(at,Te,V)=>{V.d(Te,{H0:()=>le,wA:()=>k});var f=V(1670),X=V(7748);class k{constructor(F,j,B){this.name=F,this.instanceFactory=j,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(F){return this.instantiationMode=F,this}setMultipleInstances(F){return this.multipleInstances=F,this}setServiceProps(F){return this.serviceProps=F,this}setInstanceCreatedCallback(F){return this.onInstanceCreated=F,this}}const re="[DEFAULT]";class oe{constructor(F,j){this.name=F,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(F){const j=this.normalizeInstanceIdentifier(F);if(!this.instancesDeferred.has(j)){const B=new X.BH;if(this.instancesDeferred.set(j,B),this.isInitialized(j)||this.shouldAutoInitialize())try{const ie=this.getOrInitializeService({instanceIdentifier:j});ie&&B.resolve(ie)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(F){var j;const B=this.normalizeInstanceIdentifier(F?.identifier),ie=null!==(j=F?.optional)&&void 0!==j&&j;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(Ee){if(ie)return null;throw Ee}}getComponent(){return this.component}setComponent(F){if(F.name!==this.name)throw Error(`Mismatching Component ${F.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=F,this.shouldAutoInitialize()){if(function ye(te){return"EAGER"===te.instantiationMode}(F))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[j,B]of this.instancesDeferred.entries()){const ie=this.normalizeInstanceIdentifier(j);try{const Ee=this.getOrInitializeService({instanceIdentifier:ie});B.resolve(Ee)}catch{}}}}clearInstance(F=re){this.instancesDeferred.delete(F),this.instancesOptions.delete(F),this.instances.delete(F)}delete(){var F=this;return(0,f.Z)(function*(){const j=Array.from(F.instances.values());yield Promise.all([...j.filter(B=>"INTERNAL"in B).map(B=>B.INTERNAL.delete()),...j.filter(B=>"_delete"in B).map(B=>B._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(F=re){return this.instances.has(F)}getOptions(F=re){return this.instancesOptions.get(F)||{}}initialize(F={}){const{options:j={}}=F,B=this.normalizeInstanceIdentifier(F.instanceIdentifier);if(this.isInitialized(B))throw Error(`${this.name}(${B}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ie=this.getOrInitializeService({instanceIdentifier:B,options:j});for(const[Ee,Ae]of this.instancesDeferred.entries())B===this.normalizeInstanceIdentifier(Ee)&&Ae.resolve(ie);return ie}onInit(F,j){var B;const ie=this.normalizeInstanceIdentifier(j),Ee=null!==(B=this.onInitCallbacks.get(ie))&&void 0!==B?B:new Set;Ee.add(F),this.onInitCallbacks.set(ie,Ee);const Ae=this.instances.get(ie);return Ae&&F(Ae,ie),()=>{Ee.delete(F)}}invokeOnInitCallbacks(F,j){const B=this.onInitCallbacks.get(j);if(B)for(const ie of B)try{ie(F,j)}catch{}}getOrInitializeService({instanceIdentifier:F,options:j={}}){let B=this.instances.get(F);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(te=F,te===re?void 0:te),options:j}),this.instances.set(F,B),this.instancesOptions.set(F,j),this.invokeOnInitCallbacks(B,F),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,F,B)}catch{}var te;return B||null}normalizeInstanceIdentifier(F=re){return this.component?this.component.multipleInstances?F:re:F}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(F){this.name=F,this.providers=new Map}addComponent(F){const j=this.getProvider(F.name);if(j.isComponentSet())throw new Error(`Component ${F.name} has already been registered with ${this.name}`);j.setComponent(F)}addOrOverwriteComponent(F){this.getProvider(F.name).isComponentSet()&&this.providers.delete(F.name),this.addComponent(F)}getProvider(F){if(this.providers.has(F))return this.providers.get(F);const j=new oe(F,this);return this.providers.set(F,j),j}getProviders(){return Array.from(this.providers.values())}}},8118:(at,Te,V)=>{V.d(Te,{Am:()=>te,Ub:()=>le,Yd:()=>ye,in:()=>X});const f=[];var X=(()=>{return(F=X||(X={}))[F.DEBUG=0]="DEBUG",F[F.VERBOSE=1]="VERBOSE",F[F.INFO=2]="INFO",F[F.WARN=3]="WARN",F[F.ERROR=4]="ERROR",F[F.SILENT=5]="SILENT",X;var F})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},re=X.INFO,oe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},K=(F,j,...B)=>{if(j<F.logLevel)return;const ie=(new Date).toISOString(),Ee=oe[j];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ee](`[${ie}]  ${F.name}:`,...B)};class ye{constructor(j){this.name=j,this._logLevel=re,this._logHandler=K,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function le(F){f.forEach(j=>{j.setLogLevel(F)})}function te(F,j){for(const B of f){let ie=null;j&&j.level&&(ie=k[j.level]),B.userLogHandler=null===F?null:(Ee,Ae,...xe)=>{const fe=xe.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch{return null}}).filter(we=>we).join(" ");Ae>=(ie??Ee.logLevel)&&F({level:X[Ae].toLowerCase(),message:fe,args:xe,type:Ee.name})}}}},2779:(at,Te,V)=>{V.d(Te,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=V(5402);(0,f.registerVersion)("firebase","9.23.0","app")},1181:(at,Te,V)=>{V.d(Te,{Z:()=>f.Z});var f=V(5003);f.Z.registerVersion("firebase","9.23.0","app-compat")},736:(at,Te,V)=>{V.r(Te);var f=V(1670),X=V(5003),k=V(7748),re=V(5402);function le(y,d){var p={};for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&d.indexOf(_)<0&&(p[_]=y[_]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(_=Object.getOwnPropertySymbols(y);D<_.length;D++)d.indexOf(_[D])<0&&Object.prototype.propertyIsEnumerable.call(y,_[D])&&(p[_[D]]=y[_[D]])}return p}"function"==typeof SuppressedError&&SuppressedError;var gi=V(8118),pn=V(4692);const Ho=function ja(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ki=function jo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Zi=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),so=new gi.Yd("@firebase/auth");function Nr(y,...d){so.logLevel<=gi.in.ERROR&&so.error(`Auth (${re.SDK_VERSION}): ${y}`,...d)}function Dn(y,...d){throw Xn(y,...d)}function Jt(y,...d){return Xn(y,...d)}function oo(y,d,p){const _=Object.assign(Object.assign({},Ki()),{[d]:p});return new k.LL("auth","Firebase",_).create(d,{appName:y.name})}function Rr(y,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Dn(y,"argument-error"),oo(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xn(y,...d){if("string"!=typeof y){const p=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return Zi.create(y,...d)}function Ie(y,d,...p){if(!y)throw Xn(d,...p)}function Ot(y){const d="INTERNAL ASSERTION FAILED: "+y;throw Nr(d),new Error(d)}function qe(y,d){y||Ot(d)}function st(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function on(){return"http:"===Ri()||"https:"===Ri()}function Ri(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ft{constructor(d,p){this.shortDelay=d,this.longDelay=p,qe(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function yi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(on()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function er(y,d){qe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class gn{static initialize(d,p,_){this.fetchImpl=d,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $o={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xt=new ft(3e4,6e4);function kt(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function jt(y,d,p,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(y,d,p,_,D={}){return vr(y,D,(0,f.Z)(function*(){let M={},U={};_&&("GET"===d?U=_:M={body:JSON.stringify(_)});const W=(0,k.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),ve=yield y._getAdditionalHeaders();return ve["Content-Type"]="application/json",y.languageCode&&(ve["X-Firebase-Locale"]=y.languageCode),gn.fetch()(kr(y,y.config.apiHost,p,W),Object.assign({method:d,headers:ve,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function vr(y,d,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,f.Z)(function*(y,d,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},$o),d);try{const D=new gs(y),M=yield Promise.race([p(),D.promise]);D.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw G(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const W=M.ok?U.errorMessage:U.error.message,[ve,pe]=W.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ve)throw G(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===ve)throw G(y,"email-already-in-use",U);if("USER_DISABLED"===ve)throw G(y,"user-disabled",U);const Ne=_[ve]||ve.toLowerCase().replace(/[_\s]+/g,"-");if(pe)throw oo(y,Ne,pe);Dn(y,Ne)}}catch(D){if(D instanceof k.ZR)throw D;Dn(y,"network-request-failed",{message:String(D)})}})).apply(this,arguments)}function cr(y,d,p,_){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(y,d,p,_,D={}){const M=yield jt(y,d,p,_,D);return"mfaPendingCredential"in M&&Dn(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function kr(y,d,p,_){const D=`${d}${p}?${_}`;return y.config.emulator?er(y.config,D):`${y.config.apiScheme}://${D}`}class gs{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(Jt(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function G(y,d,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const D=Jt(y,d,_);return D.customData._tokenResponse=p,D}function Z(){return(Z=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function de(y,d){return J.apply(this,arguments)}function J(){return(J=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Be(y,d){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Mt(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function nt(){return(nt=(0,f.Z)(function*(y,d=!1){const p=(0,k.m9)(y),_=yield p.getIdToken(d),D=tn(_);Ie(D&&D.exp&&D.auth_time&&D.iat,p.auth,"internal-error");const M="object"==typeof D.firebase?D.firebase:void 0,U=M?.sign_in_provider;return{claims:D,token:_,authTime:Mt(rt(D.auth_time)),issuedAtTime:Mt(rt(D.iat)),expirationTime:Mt(rt(D.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function rt(y){return 1e3*Number(y)}function tn(y){const[d,p,_]=y.split(".");if(void 0===d||void 0===p||void 0===_)return Nr("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,k.tV)(p);return D?JSON.parse(D):(Nr("Failed to decode base64 JWT payload"),null)}catch(D){return Nr("Caught error parsing JWT payload as JSON",D?.toString()),null}}function Gt(y,d){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,d,p=!1){if(p)return d;try{return yield d}catch(_){throw _ instanceof k.ZR&&ae(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function ae({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ne{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const D=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),_)}iteration(){var d=this;return(0,f.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Se{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mt(this.lastLoginAt),this.creationTime=Mt(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Me(y){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(y){var d;const p=y.auth,_=yield y.getIdToken(),D=yield Gt(y,Be(p,{idToken:_}));Ie(D?.users.length,p,"internal-error");const M=D.users[0];y._notifyReloadListener(M);const U=null!==(d=M.providerUserInfo)&&void 0!==d&&d.length?Bt(M.providerUserInfo):[],W=Rn(y.providerData,U),Ne=!!y.isAnonymous&&!(y.email&&M.passwordHash||W?.length),Le={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:W,metadata:new Se(M.createdAt,M.lastLoginAt),isAnonymous:Ne};Object.assign(y,Le)})).apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(y){const d=(0,k.m9)(y);yield Me(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Rn(y,d){return[...y.filter(_=>!d.some(D=>D.providerId===_.providerId)),...d]}function Bt(y){return y.map(d=>{var{providerId:p}=d,_=le(d,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function si(){return(si=(0,f.Z)(function*(y,d){const p=yield vr(y,{},(0,f.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:D,apiKey:M}=y.config,U=kr(y,D,"/v1/token",`key=${M}`),W=yield y._getAdditionalHeaders();return W["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(U,{method:"POST",headers:W,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ie(d.idToken,"internal-error"),Ie(typeof d.idToken<"u","internal-error"),Ie(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function wr(y){const d=tn(y);return Ie(d,"internal-error"),Ie(typeof d.exp<"u","internal-error"),Ie(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var _=this;return(0,f.Z)(function*(){return Ie(!_.accessToken||_.refreshToken,d,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var _=this;return(0,f.Z)(function*(){const{accessToken:D,refreshToken:M,expiresIn:U}=yield function zr(y,d){return si.apply(this,arguments)}(d,p);_.updateTokensAndExpiration(D,M,Number(U))})()}updateTokensAndExpiration(d,p,_){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,p){const{refreshToken:_,accessToken:D,expirationTime:M}=p,U=new dr;return _&&(Ie("string"==typeof _,"internal-error",{appName:d}),U.refreshToken=_),D&&(Ie("string"==typeof D,"internal-error",{appName:d}),U.accessToken=D),M&&(Ie("number"==typeof M,"internal-error",{appName:d}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new dr,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function vi(y,d){Ie("string"==typeof y||typeof y>"u","internal-error",{appName:d})}class Yi{constructor(d){var{uid:p,auth:_,stsTokenManager:D}=d,M=le(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ne(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Se(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,f.Z)(function*(){const _=yield Gt(p,p.stsTokenManager.getToken(p.auth,d));return Ie(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(d){return function Oe(y){return nt.apply(this,arguments)}(this,d)}reload(){return function xt(y){return Zt.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new Yi(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var _=this;return(0,f.Z)(function*(){let D=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),D=!0),p&&(yield Me(_)),yield _.auth._persistUserIfCurrent(_),D&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,f.Z)(function*(){const p=yield d.getIdToken();return yield Gt(d,function H(y,d){return Z.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var _,D,M,U,W,ve,pe,Ne;const Le=null!==(_=p.displayName)&&void 0!==_?_:void 0,St=null!==(D=p.email)&&void 0!==D?D:void 0,zn=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,jr=null!==(U=p.photoURL)&&void 0!==U?U:void 0,Hr=null!==(W=p.tenantId)&&void 0!==W?W:void 0,os=null!==(ve=p._redirectEventId)&&void 0!==ve?ve:void 0,dn=null!==(pe=p.createdAt)&&void 0!==pe?pe:void 0,bo=null!==(Ne=p.lastLoginAt)&&void 0!==Ne?Ne:void 0,{uid:ng,emailVerified:tf,isAnonymous:ad,providerData:nf,stsTokenManager:ld}=p;Ie(ng&&ld,d,"internal-error");const ud=dr.fromJSON(this.name,ld);Ie("string"==typeof ng,d,"internal-error"),vi(Le,d.name),vi(St,d.name),Ie("boolean"==typeof tf,d,"internal-error"),Ie("boolean"==typeof ad,d,"internal-error"),vi(zn,d.name),vi(jr,d.name),vi(Hr,d.name),vi(os,d.name),vi(dn,d.name),vi(bo,d.name);const as=new Yi({uid:ng,auth:d,email:St,emailVerified:tf,displayName:Le,isAnonymous:ad,photoURL:jr,phoneNumber:zn,tenantId:Hr,stsTokenManager:ud,createdAt:dn,lastLoginAt:bo});return nf&&Array.isArray(nf)&&(as.providerData=nf.map(rg=>Object.assign({},rg))),os&&(as._redirectEventId=os),as}static _fromIdTokenResponse(d,p,_=!1){return(0,f.Z)(function*(){const D=new dr;D.updateFromServerResponse(p);const M=new Yi({uid:p.localId,auth:d,stsTokenManager:D,isAnonymous:_});return yield Me(M),M})()}}const an=new Map;function Fr(y){qe(y instanceof Function,"Expected a class definition");let d=an.get(y);return d?(qe(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,an.set(y,d),d)}const wi=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,_){var D=this;return(0,f.Z)(function*(){D.storage[p]=_})()}_get(p){var _=this;return(0,f.Z)(function*(){const D=_.storage[p];return void 0===D?null:D})()}_remove(p){var _=this;return(0,f.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function ms(y,d,p){return`firebase:${y}:${d}:${p}`}class ki{constructor(d,p,_){this.persistence=d,this.auth=p,this.userKey=_;const{config:D,name:M}=this.auth;this.fullUserKey=ms(this.userKey,D.apiKey,M),this.fullPersistenceKey=ms("persistence",D.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,f.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Yi._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,f.Z)(function*(){if(p.persistence===d)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,_="authUser"){return(0,f.Z)(function*(){if(!p.length)return new ki(Fr(wi),d,_);const D=(yield Promise.all(p.map(function(){var pe=(0,f.Z)(function*(Ne){if(yield Ne._isAvailable())return Ne});return function(Ne){return pe.apply(this,arguments)}}()))).filter(pe=>pe);let M=D[0]||Fr(wi);const U=ms(_,d.config.apiKey,d.name);let W=null;for(const pe of p)try{const Ne=yield pe._get(U);if(Ne){const Le=Yi._fromJSON(d,Ne);pe!==M&&(W=Le),M=pe;break}}catch{}const ve=D.filter(pe=>pe._shouldAllowMigration);return M._shouldAllowMigration&&ve.length?(M=ve[0],W&&(yield M._set(U,W.toJSON())),yield Promise.all(p.map(function(){var pe=(0,f.Z)(function*(Ne){if(Ne!==M)try{yield Ne._remove(U)}catch{}});return function(Ne){return pe.apply(this,arguments)}}())),new ki(M,d,_)):new ki(M,d,_)})()}}function Rs(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(tr(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ao(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Go(d))return"Blackberry";if(Ha(d))return"Webos";if(Kn(d))return"Safari";if((d.includes("chrome/")||Qd(d))&&!d.includes("edge/"))return"Chrome";if(nr(d))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ao(y=(0,k.z$)()){return/firefox\//i.test(y)}function Kn(y=(0,k.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Qd(y=(0,k.z$)()){return/crios\//i.test(y)}function tr(y=(0,k.z$)()){return/iemobile/i.test(y)}function nr(y=(0,k.z$)()){return/android/i.test(y)}function Go(y=(0,k.z$)()){return/blackberry/i.test(y)}function Ha(y=(0,k.z$)()){return/webos/i.test(y)}function ys(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function yc(y=(0,k.z$)()){return ys(y)||nr(y)||Ha(y)||Go(y)||/windows phone/i.test(y)||tr(y)}function km(y,d=[]){let p;switch(y){case"Browser":p=Rs((0,k.z$)());break;case"Worker":p=`${Rs((0,k.z$)())}-${y}`;break;default:p=y}const _=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${re.SDK_VERSION}/${_}`}function Jd(){return(Jd=(0,f.Z)(function*(y){return(yield jt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hp(y,d){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,f.Z)(function*(y,d){return jt(y,"GET","/v2/recaptchaConfig",kt(y,d))})).apply(this,arguments)}function eh(y){return void 0!==y&&void 0!==y.getResponse}function fp(y){return void 0!==y&&void 0!==y.enterprise}class vc{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function th(y){return new Promise((d,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=d,_.onerror=D=>{const M=Jt("internal-error");M.customData=D,p(M)},_.type="text/javascript",_.charset="UTF-8",function rv(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(_)})}function wc(y){return`__${y}${Math.floor(1e6*Math.random())}`}class rh{constructor(d){this.type="recaptcha-enterprise",this.auth=un(d)}verify(d="verify",p=!1){var _=this;return(0,f.Z)(function*(){function M(){return M=(0,f.Z)(function*(W){if(!p){if(null==W.tenantId&&null!=W._agentRecaptchaConfig)return W._agentRecaptchaConfig.siteKey;if(null!=W.tenantId&&void 0!==W._tenantRecaptchaConfigs[W.tenantId])return W._tenantRecaptchaConfigs[W.tenantId].siteKey}return new Promise(function(){var ve=(0,f.Z)(function*(pe,Ne){hp(W,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Le=>{if(void 0!==Le.recaptchaKey){const St=new vc(Le);return null==W.tenantId?W._agentRecaptchaConfig=St:W._tenantRecaptchaConfigs[W.tenantId]=St,pe(St.siteKey)}Ne(new Error("recaptcha Enterprise site key undefined"))}).catch(Le=>{Ne(Le)})});return function(pe,Ne){return ve.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(W,ve,pe){const Ne=window.grecaptcha;fp(Ne)?Ne.enterprise.ready(()=>{Ne.enterprise.execute(W,{action:d}).then(Le=>{ve(Le)}).catch(()=>{ve("NO_RECAPTCHA")})}):pe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((W,ve)=>{(function D(W){return M.apply(this,arguments)})(_.auth).then(pe=>{if(!p&&fp(window.grecaptcha))U(pe,W,ve);else{if(typeof window>"u")return void ve(new Error("RecaptchaVerifier is only supported in browser"));th("https://www.google.com/recaptcha/enterprise.js?render="+pe).then(()=>{U(pe,W,ve)}).catch(Ne=>{ve(Ne)})}}).catch(pe=>{ve(pe)})})})()}}function _s(y,d,p){return pp.apply(this,arguments)}function pp(){return(pp=(0,f.Z)(function*(y,d,p,_=!1){const D=new rh(y);let M;try{M=yield D.verify(p)}catch{M=yield D.verify(p,!0)}const U=Object.assign({},d);return Object.assign(U,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class iv{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const _=M=>new Promise((U,W)=>{try{U(d(M))}catch(ve){W(ve)}});_.onAbort=p,this.queue.push(_);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===d)return;const _=[];try{for(const D of p.queue)yield D(d),D.onAbort&&_.push(D.onAbort)}catch(D){_.reverse();for(const M of _)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:D?.message})}})()}}class Ec{constructor(d,p,_,D){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ih(this),this.idTokenSubscription=new ih(this),this.beforeStateQueue=new iv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(d,p){var _=this;return p&&(this._popupRedirectResolver=Fr(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var D,M;if(!_._deleted&&(_.persistenceManager=yield ki.create(_,d),!_._deleted)){if(null!==(D=_._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,f.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,f.Z)(function*(){var _;const D=yield p.assertedPersistence.getCurrentUser();let M=D,U=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const W=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,ve=M?._redirectEventId,pe=yield p.tryRedirectSignIn(d);(!W||W===ve)&&pe?.user&&(M=pe.user,U=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(M)}catch(W){M=D,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(W))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return Ie(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(d){var p=this;return(0,f.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,f.Z)(function*(){try{yield Me(d)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Or(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,f.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,f.Z)(function*(){const _=d?(0,k.m9)(d):null;return _&&Ie(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(d,p=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return d&&Ie(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,f.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(Fr(d))}))}initializeRecaptchaConfig(){var d=this;return(0,f.Z)(function*(){const p=yield hp(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new vc(p);null==d.tenantId?d._agentRecaptchaConfig=_:d._tenantRecaptchaConfigs[d.tenantId]=_,_.emailPasswordEnabled&&new rh(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new k.LL("auth","Firebase",d())}onAuthStateChanged(d,p,_){return this.registerStateListener(this.authStateSubscription,d,p,_)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,_){return this.registerStateListener(this.idTokenSubscription,d,p,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var _=this;return(0,f.Z)(function*(){const D=yield _.getOrInitRedirectPersistenceManager(p);return null===d?D.removeCurrentUser():D.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const _=d&&Fr(d)||p._popupRedirectResolver;Ie(_,p,"argument-error"),p.redirectPersistenceManager=yield ki.create(p,[Fr(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,f.Z)(function*(){var _,D;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===d?p._currentUser:(null===(D=p.redirectUser)||void 0===D?void 0:D._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,f.Z)(function*(){if(d===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,_,D){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Ie(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof p?d.addObserver(p,_,D):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=km(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,f.Z)(function*(){var p;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const D=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();D&&(_["X-Firebase-Client"]=D);const M=yield d._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var d=this;return(0,f.Z)(function*(){var p;const _=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function Xe(y,...d){so.logLevel<=gi.in.WARN&&so.warn(`Auth (${re.SDK_VERSION}): ${y}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function un(y){return(0,k.m9)(y)}class ih{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yl(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function ah(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class vs{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Ot("not implemented")}_getIdTokenResponse(d){return Ot("not implemented")}_linkToIdToken(d,p){return Ot("not implemented")}_getReauthenticationResolver(d){return Ot("not implemented")}}function lh(y,d){return hr.apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:resetPassword",kt(y,d))})).apply(this,arguments)}function Ji(y,d){return uh.apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ql(y,d){return ch.apply(this,arguments)}function ch(){return(ch=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:update",kt(y,d))})).apply(this,arguments)}function gp(y,d){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithPassword",kt(y,d))})).apply(this,arguments)}function Jl(y,d){return mp.apply(this,arguments)}function mp(){return(mp=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:sendOobCode",kt(y,d))})).apply(this,arguments)}function lo(y,d){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(y,d){return Jl(y,d)})).apply(this,arguments)}function Xl(y,d){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(y,d){return Jl(y,d)})).apply(this,arguments)}function ks(y,d){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(y,d){return Jl(y,d)})).apply(this,arguments)}function Vm(y,d){return zo.apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(y,d){return Jl(y,d)})).apply(this,arguments)}function Ei(){return(Ei=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,d))})).apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,d))})).apply(this,arguments)}class pt extends vs{constructor(d,p,_,D=null){super("password",_),this._email=d,this._password=p,this._tenantId=D}static _fromEmailAndPassword(d,p){return new pt(d,p,"password")}static _fromEmailAndCode(d,p,_=null){return new pt(d,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,f.Z)(function*(){var _;switch(p.signInMethod){case"password":const D={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=d._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield _s(d,D,"signInWithPassword");return gp(d,M)}return gp(d,D).catch(function(){var M=(0,f.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const W=yield _s(d,D,"signInWithPassword");return gp(d,W)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function dh(y,d){return Ei.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Dn(d,"internal-error")}})()}_linkToIdToken(d,p){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return Ji(d,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function qo(y,d){return uo.apply(this,arguments)}(d,{idToken:p,email:_._email,oobCode:_._password});default:Dn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Xi(y,d){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithIdp",kt(y,d))})).apply(this,arguments)}class es extends vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new es(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Dn("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:D}=p,M=le(p,["providerId","signInMethod"]);if(!_||!D)return null;const U=new es(_,D);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(d){return Xi(d,this.buildRequest())}_linkToIdToken(d,p){const _=this.buildRequest();return _.idToken=p,Xi(d,_)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Xi(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,k.xO)(p)}return d}}function yp(y,d){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:sendVerificationCode",kt(y,d))})).apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,d))})).apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(y,d){const p=yield cr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,d));if(p.temporaryProof)throw G(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ph={USER_NOT_FOUND:"user-not-found"};function On(){return(On=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ph)})).apply(this,arguments)}class Es extends vs{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Es({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Es({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function ws(y,d){return tu.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Ce(y,d){return Vt.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function gh(y,d){return On.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:_,verificationCode:D}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:_,code:D}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:_,phoneNumber:D,temporaryProof:M}=d;return _||p||D||M?new Es({verificationId:p,verificationCode:_,phoneNumber:D,temporaryProof:M}):null}}class Fs{constructor(d){var p,_,D,M,U,W;const ve=(0,k.zd)((0,k.pd)(d)),pe=null!==(p=ve.apiKey)&&void 0!==p?p:null,Ne=null!==(_=ve.oobCode)&&void 0!==_?_:null,Le=function Ga(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=ve.mode)&&void 0!==D?D:null);Ie(pe&&Ne&&Le,"argument-error"),this.apiKey=pe,this.operation=Le,this.code=Ne,this.continueUrl=null!==(M=ve.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=ve.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(W=ve.tenantId)&&void 0!==W?W:null}static parseLink(d){const p=function ts(y){const d=(0,k.zd)((0,k.pd)(y)).link,p=d?(0,k.zd)((0,k.pd)(d)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||p||d||y}(d);try{return new Fs(p)}catch{return null}}}let bc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return pt._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const D=Fs.parseLink(_);return Ie(D,"argument-error"),pt._fromEmailAndCode(p,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ln{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class nu extends ln{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Wo extends nu{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return Ie("providerId"in p&&"signInMethod"in p,"argument-error"),es._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ie(d.idToken||d.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Wo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Wo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:D,pendingToken:M,nonce:U,providerId:W}=d;if(!_&&!D&&!p&&!M||!W)return null;try{return new Wo(W)._credential({idToken:p,accessToken:_,nonce:U,pendingToken:M})}catch{return null}}}let qr=(()=>{class y extends nu{constructor(){super("facebook.com")}static credential(p){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Wr=(()=>{class y extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:D}=p;if(!_&&!D)return null;try{return y.credential(_,D)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ns=(()=>{class y extends nu{constructor(){super("github.com")}static credential(p){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Er extends vs{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Xi(d,this.buildRequest())}_linkToIdToken(d,p){const _=this.buildRequest();return _.idToken=p,Xi(d,_)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Xi(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:D,pendingToken:M}=p;return _&&D&&M&&_===D?new Er(_,M):null}static _create(d,p){return new Er(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qa extends ln{constructor(d){Ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return qa.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return qa.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Er.fromJSON(d);return Ie(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:_}=d;if(!p||!_)return null;try{return Er._create(_,p)}catch{return null}}}let vp=(()=>{class y extends nu{constructor(){super("twitter.com")}static credential(p,_){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:D}=p;if(!_||!D)return null;try{return y.credential(_,D)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function co(y,d){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signUp",kt(y,d))})).apply(this,arguments)}class Kr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,_,D=!1){return(0,f.Z)(function*(){const M=yield Yi._fromIdTokenResponse(d,_,D),U=Ka(_);return new Kr({user:M,providerId:U,_tokenResponse:_,operationType:p})})()}static _forOperation(d,p,_){return(0,f.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const D=Ka(_);return new Kr({user:d,providerId:D,_tokenResponse:_,operationType:p})})()}}function Ka(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ru(){return(ru=(0,f.Z)(function*(y){var d;const p=un(y);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new Kr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield co(p,{returnSecureToken:!0}),D=yield Kr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ko extends k.ZR{constructor(d,p,_,D){var M;super(p.code,p.message),this.operationType=_,this.user=D,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:d.name,tenantId:null!==(M=d.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,p,_,D){return new Ko(d,p,_,D)}}function Zo(y,d,p,_){return("reauthenticate"===d?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ko._fromErrorAndOperation(y,M,d,_):M})}function Yo(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Za(){return(Za=(0,f.Z)(function*(y,d){const p=(0,k.m9)(y);yield Ya(!0,p,d);const{providerUserInfo:_}=yield de(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),D=Yo(_||[]);return p.providerData=p.providerData.filter(M=>D.has(M.providerId)),D.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function iu(y,d){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(y,d,p=!1){const _=yield Gt(y,d._linkToIdToken(y.auth,yield y.getIdToken()),p);return Kr._forOperation(y,"link",_)})).apply(this,arguments)}function Ya(y,d,p){return mh.apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(y,d,p){yield Me(d);const D=!1===y?"provider-already-linked":"no-such-provider";Ie(Yo(d.providerData).has(p)===y,d.auth,D)})).apply(this,arguments)}function en(y,d){return Is.apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,d,p=!1){const{auth:_}=y,D="reauthenticate";try{const M=yield Gt(y,Zo(_,D,d,y),p);Ie(M.idToken,_,"internal-error");const U=tn(M.idToken);Ie(U,_,"internal-error");const{sub:W}=U;return Ie(y.uid===W,_,"user-mismatch"),Kr._forOperation(y,D,M)}catch(M){throw"auth/user-not-found"===M?.code&&Dn(_,"user-mismatch"),M}})).apply(this,arguments)}function wn(y,d){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(y,d,p=!1){const _="signIn",D=yield Zo(y,_,d),M=yield Kr._fromIdTokenResponse(y,_,D);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Qa(y,d){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,f.Z)(function*(y,d){return wn(un(y),d)})).apply(this,arguments)}function Dc(y,d){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,d){const p=(0,k.m9)(y);return yield Ya(!1,p,d.providerId),iu(p,d)})).apply(this,arguments)}function ou(y,d){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(y,d){return en((0,k.m9)(y),d)})).apply(this,arguments)}function Ja(y,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(y,d){return cr(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,d))})).apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(y,d){const p=un(y),_=yield Ja(p,{token:d,returnSecureToken:!0}),D=yield Kr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class el{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Fi._fromServerResponse(d,p):"totpInfo"in p?Jo._fromServerResponse(d,p):Dn(d,"internal-error")}}class Fi extends el{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Fi(p)}}class Jo extends el{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new Jo(p)}}function fo(y,d,p){var _;Ie((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),Ie(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ie(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(Ie(p.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function Vs(){return Vs=(0,f.Z)(function*(y,d,p){var _;const D=un(y),M={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=D._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const U=yield _s(D,M,"getOobCode",!0);p&&fo(D,U,p),yield Xl(D,U)}else p&&fo(D,M,p),yield Xl(D,M).catch(function(){var U=(0,f.Z)(function*(W){if("auth/missing-recaptcha-token"!==W.code)return Promise.reject(W);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ve=yield _s(D,M,"getOobCode",!0);p&&fo(D,ve,p),yield Xl(D,ve)}});return function(W){return U.apply(this,arguments)}}())}),Vs.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(y,d,p){yield lh((0,k.m9)(y),{oobCode:d,newPassword:p})})).apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(y,d){yield Ql((0,k.m9)(y),{oobCode:d})})).apply(this,arguments)}function nl(y,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,d){const p=(0,k.m9)(y),_=yield lh(p,{oobCode:d}),D=_.requestType;switch(Ie(D,p,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(_.mfaInfo,p,"internal-error");default:Ie(_.email,p,"internal-error")}let M=null;return _.mfaInfo&&(M=el._fromServerResponse(un(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:D}})).apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(y,d){const{data:p}=yield nl((0,k.m9)(y),d);return p.email})).apply(this,arguments)}function uu(){return uu=(0,f.Z)(function*(y,d,p){var _;const D=un(y),M={returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(_=D._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const pe=yield _s(D,M,"signUpPassword");U=co(D,pe)}else U=co(D,M).catch(function(){var pe=(0,f.Z)(function*(Ne){if("auth/missing-recaptcha-token"===Ne.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Le=yield _s(D,M,"signUpPassword");return co(D,Le)}return Promise.reject(Ne)});return function(Ne){return pe.apply(this,arguments)}}());const W=yield U.catch(pe=>Promise.reject(pe)),ve=yield Kr._fromIdTokenResponse(D,"signIn",W);return yield D._updateCurrentUser(ve.user),ve}),uu.apply(this,arguments)}function du(){return du=(0,f.Z)(function*(y,d,p){var _;const D=un(y),M={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function U(W,ve){Ie(ve.handleCodeInApp,D,"argument-error"),ve&&fo(D,W,ve)}if(null!==(_=D._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const W=yield _s(D,M,"getOobCode",!0);U(W,p),yield ks(D,W)}else U(M,p),yield ks(D,M).catch(function(){var W=(0,f.Z)(function*(ve){if("auth/missing-recaptcha-token"!==ve.code)return Promise.reject(ve);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const pe=yield _s(D,M,"getOobCode",!0);U(pe,p),yield ks(D,pe)}});return function(ve){return W.apply(this,arguments)}}())}),du.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y),D=bc.credentialWithLink(d,p||st());return Ie(D._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Qa(_,D)})).apply(this,arguments)}function Ip(y,d){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:createAuthUri",kt(y,d))})).apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(y,d){const _={identifier:d,continueUri:on()?st():"http://localhost"},{signinMethods:D}=yield Ip((0,k.m9)(y),_);return D||[]})).apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(y,d){const p=(0,k.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&fo(p.auth,D,d);const{email:M}=yield lo(p.auth,D);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};p&&fo(_.auth,M,p);const{email:U}=yield Vm(_.auth,M);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function sl(y,d){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const _=(0,k.m9)(y),M={idToken:yield _.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},U=yield Gt(_,sl(_.auth,M));_.displayName=U.displayName||null,_.photoURL=U.photoUrl||null;const W=_.providerData.find(({providerId:ve})=>"password"===ve);W&&(W.displayName=_.displayName,W.photoURL=_.photoURL),yield _._updateTokensIfNecessary(U)})).apply(this,arguments)}function mo(y,d,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(y,d,p){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(M.email=d),p&&(M.password=p);const U=yield Gt(y,Ji(_,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class bi{constructor(d,p,_={}){this.isNewUser=d,this.providerId=p,this.profile=_}}class yo extends bi{constructor(d,p,_,D){super(d,p,_),this.username=D}}class Bm extends bi{constructor(d,p){super(d,"facebook.com",p)}}class Tp extends yo{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class fu extends bi{constructor(d,p){super(d,"google.com",p)}}class oa extends yo{constructor(d,p,_){super(d,"twitter.com",p,_)}}function jm(y){const{user:d,_tokenResponse:p}=y;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Cp(y){var d,p;if(!y)return null;const{providerId:_}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const U=null===(p=null===(d=tn(y.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new bi(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!_)return null;switch(_){case"facebook.com":return new Bm(M,D);case"github.com":return new Tp(M,D);case"google.com":return new fu(M,D);case"twitter.com":return new oa(M,D,y.screenName||null);case"custom":case"anonymous":return new bi(M,null);default:return new bi(M,_,D)}}(p)}class Zr{constructor(d,p,_){this.type=d,this.credential=p,this.auth=_}static _fromIdtoken(d,p){return new Zr("enroll",d,p)}static _fromMfaPendingCredential(d){return new Zr("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,_;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Zr._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Zr._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Eh{constructor(d,p,_){this.session=d,this.hints=p,this.signInResolver=_}static _fromError(d,p){const _=un(d),D=p.customData._serverResponse,M=(D.mfaInfo||[]).map(W=>el._fromServerResponse(_,W));Ie(D.mfaPendingCredential,_,"internal-error");const U=Zr._fromMfaPendingCredential(D.mfaPendingCredential);return new Eh(U,M,function(){var W=(0,f.Z)(function*(ve){const pe=yield ve._process(_,U);delete D.mfaInfo,delete D.mfaPendingCredential;const Ne=Object.assign(Object.assign({},D),{idToken:pe.idToken,refreshToken:pe.refreshToken});switch(p.operationType){case"signIn":const Le=yield Kr._fromIdTokenResponse(_,p.operationType,Ne);return yield _._updateCurrentUser(Le.user),Le;case"reauthenticate":return Ie(p.user,_,"internal-error"),Kr._forOperation(p.user,p.operationType,Ne);default:Dn(_,"internal-error")}});return function(ve){return W.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,f.Z)(function*(){return p.signInResolver(d)})()}}function cn(y,d){return jt(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,d))}class Mp{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>el._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Mp(d)}getSession(){var d=this;return(0,f.Z)(function*(){return Zr._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,p){var _=this;return(0,f.Z)(function*(){const D=d,M=yield _.getSession(),U=yield Gt(_.user,D._process(_.user.auth,M,p));return yield _.user._updateTokensIfNecessary(U),_.user.reload()})()}unenroll(d){var p=this;return(0,f.Z)(function*(){const _="string"==typeof d?d:d.uid,D=yield p.user.getIdToken();try{const M=yield Gt(p.user,function Ch(y,d){return jt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,d))}(p.user.auth,{idToken:D,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==_),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Th=new WeakMap,js="__sak";class Pp{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(js,"1"),this.storage.removeItem(js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ul=(()=>{class y extends Pp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ov(){const y=(0,k.z$)();return Kn(y)||ys(y)}()&&function _c(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yc(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const D=this.storage.getItem(_),M=this.localCache[_];D!==M&&p(_,M,D)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((W,ve,pe)=>{this.notifyListeners(W,pe)});const D=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const W=this.storage.getItem(D);if(p.newValue!==W)null!==p.newValue?this.storage.setItem(D,p.newValue):this.storage.removeItem(D);else if(this.localCache[D]===p.newValue&&!_)return}const M=()=>{const W=this.storage.getItem(D);!_&&this.localCache[D]===W||this.notifyListeners(D,W)},U=this.storage.getItem(D);!function dp(){return(0,k.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,_){this.localCache[p]=_;const D=this.listeners[p];if(D)for(const M of Array.from(D))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var D=()=>super._set,M=this;return(0,f.Z)(function*(){yield D().call(M,p,_),M.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,D=this;return(0,f.Z)(function*(){const M=yield _().call(D,p);return D.localCache[p]=JSON.stringify(M),M})()}_remove(p){var _=()=>super._remove,D=this;return(0,f.Z)(function*(){yield _().call(D,p),delete D.localCache[p]})()}}return y.type="LOCAL",y})(),Sn=(()=>{class y extends Pp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Mc=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(M=>M.isListeningto(p));if(_)return _;const D=new y(p);return this.receivers.push(D),D}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,f.Z)(function*(){const D=p,{eventId:M,eventType:U,data:W}=D.data,ve=_.handlersMap[U];if(!ve?.size)return;D.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const pe=Array.from(ve).map(function(){var Le=(0,f.Z)(function*(St){return St(D.origin,W)});return function(St){return Le.apply(this,arguments)}}()),Ne=yield function Ui(y){return Promise.all(y.map(function(){var d=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return d.apply(this,arguments)}}()))}(pe);D.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:Ne})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function _o(y="",d=10){let p="";for(let _=0;_<d;_++)p+=Math.floor(10*Math.random());return y+p}class mu{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,_=50){var D=this;return(0,f.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,W;return new Promise((ve,pe)=>{const Ne=_o("",20);M.port1.start();const Le=setTimeout(()=>{pe(new Error("unsupported_event"))},_);W={messageChannel:M,onMessage(St){const zn=St;if(zn.data.eventId===Ne)switch(zn.data.status){case"ack":clearTimeout(Le),U=setTimeout(()=>{pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),ve(zn.data.response);break;default:clearTimeout(Le),clearTimeout(U),pe(new Error("invalid_response"))}}},D.handlers.add(W),M.port1.addEventListener("message",W.onMessage),D.target.postMessage({eventType:d,eventId:Ne,data:p},[M.port2])}).finally(()=>{W&&D.removeMessageHandler(W)})})()}}function Un(){return window}function Sh(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function Rp(){return(Rp=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",yu="firebaseLocalStorage",Ah="fbase_key";class aa{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Pc(y,d){return y.transaction([yu],d?"readwrite":"readonly").objectStore(yu)}function _u(){const y=indexedDB.open(cl,1);return new Promise((d,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(yu,{keyPath:Ah})}catch(D){p(D)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(yu)?d(_):(_.close(),yield function Mh(){const y=indexedDB.deleteDatabase(cl);return new aa(y).toPromise()}(),d(yield _u()))}))})}function Nc(y,d,p){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(y,d,p){const _=Pc(y,!0).put({[Ah]:d,value:p});return new aa(_).toPromise()})).apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(y,d){const p=Pc(y,!1).get(d),_=yield new aa(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function $m(y,d){const p=Pc(y,!0).delete(d);return new aa(p).toPromise()}const ua=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield _u()),p.db})()}_withRetries(p){var _=this;return(0,f.Z)(function*(){let D=0;for(;;)try{const M=yield _._openDb();return yield p(M)}catch(M){if(D++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return Sh()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=Mc._getInstance(function ai(){return Sh()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(D,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(D,M){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(D,M){return["keyChanged"]});return function(D,M){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var _,D;if(p.activeServiceWorker=yield function Np(){return Rp.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new mu(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(D=M[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function xc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield _u();return yield Nc(p,js,"1"),yield $m(p,js),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var D=this;return(0,f.Z)(function*(){return D._withPendingWrite((0,f.Z)(function*(){return yield D._withRetries(M=>Nc(M,p,_)),D.localCache[p]=_,D.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,f.Z)(function*(){const D=yield _._withRetries(M=>function Yr(y,d){return vo.apply(this,arguments)}(M,p));return _.localCache[p]=D,D})()}_remove(p){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(D=>$m(D,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const _=yield p._withRetries(U=>{const W=Pc(U,!1).getAll();return new aa(W).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const D=[],M=new Set;for(const{fbase_key:U,value:W}of _)M.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(W)&&(p.notifyListeners(U,W),D.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!M.has(U)&&(p.notifyListeners(U,null),D.push(U));return D})()}notifyListeners(p,_){this.localCache[p]=_;const D=this.listeners[p];if(D)for(const M of Array.from(D))M(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Op(y,d){return jt(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,d))}const fl=1e12;class ir{constructor(d){this.auth=d,this.counter=fl,this._widgets=new Map}render(d,p){const _=this.counter;return this._widgets.set(_,new Nh(d,this.auth.name,p||{})),this.counter++,_}reset(d){var p;const _=d||fl;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(d){var p;return(null===(p=this._widgets.get(d||fl))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,f.Z)(function*(){var _;return null===(_=p._widgets.get(d||fl))||void 0===_||_.execute(),""})()}}class Nh{constructor(d,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof d?document.getElementById(d):d;Ie(D,"argument-error",{appName:p}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rh(y){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oc=wc("rcb"),vu=new ft(3e4,6e4);class li{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Un().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return Ie(function xn(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&eh(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((_,D)=>{const M=Un().setTimeout(()=>{D(Jt(d,"network-request-failed"))},vu.get());Un()[Oc]=()=>{Un().clearTimeout(M),delete Un()[Oc];const W=Un().grecaptcha;if(!W||!eh(W))return void D(Jt(d,"internal-error"));const ve=W.render;W.render=(pe,Ne)=>{const Le=ve(pe,Ne);return this.counter++,Le},this.hostLanguage=p,_(W)},th(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Oc,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),D(Jt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Un().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class et{load(d){return(0,f.Z)(function*(){return new ir(d)})()}clearedOneInstance(){}}const En="recaptcha",pl={theme:"light",type:"image"};class wu{constructor(d,p=Object.assign({},pl),_){this.parameters=p,this.type=En,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(_),this.isInvisible="invisible"===this.parameters.size,Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof d?document.getElementById(d):d;Ie(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new et:new li,this.validateStartingState()}verify(){var d=this;return(0,f.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(p)||new Promise(M=>{const U=W=>{!W||(d.tokenChangeListeners.delete(U),M(W))};d.tokenChangeListeners.add(U),d.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof d)d(p);else if("string"==typeof d){const _=Un()[d];"function"==typeof _&&_(p)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,f.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,f.Z)(function*(){Ie(on()&&!Sh(),d.auth,"internal-error"),yield function Oh(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Mn(y){return Jd.apply(this,arguments)}(d.auth);Ie(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Eu{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Es._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Bn(){return(Bn=(0,f.Z)(function*(y,d,p){const _=un(y),D=yield Ci(_,d,(0,k.m9)(p));return new Eu(D,M=>Qa(_,M))})).apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y);yield Ya(!1,_,"phone");const D=yield Ci(_.auth,d,(0,k.m9)(p));return new Eu(D,M=>Dc(_,M))})).apply(this,arguments)}function mt(){return(mt=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y),D=yield Ci(_.auth,d,(0,k.m9)(p));return new Eu(D,M=>ou(_,M))})).apply(this,arguments)}function Ci(y,d,p){return kc.apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(y,d,p){var _;const D=yield p.verify();try{let M;if(Ie("string"==typeof D,y,"argument-error"),Ie(p.type===En,y,"argument-error"),M="string"==typeof d?{phoneNumber:d}:d,"session"in M){const U=M.session;if("phoneNumber"in M)return Ie("enroll"===U.type,y,"internal-error"),(yield cn(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Ie("signin"===U.type,y,"internal-error");const W=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return Ie(W,y,"missing-multi-factor-info"),(yield Op(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:W,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield yp(y,{phoneNumber:M.phoneNumber,recaptchaToken:D});return U}}finally{p._reset()}})).apply(this,arguments)}function bu(){return(bu=(0,f.Z)(function*(y,d){yield iu((0,k.m9)(y),d)})).apply(this,arguments)}let ml=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=un(p)}verifyPhoneNumber(p,_){return Ci(this.auth,p,(0,k.m9)(_))}static credential(p,_){return Es._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:D}=p;return _&&D?Es._fromTokenResponse(_,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function $s(y,d){return d?Fr(d):(Ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ur extends vs{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Xi(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Xi(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Xi(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Fc(y){return wn(y.auth,new Ur(y),y.bypassAuthState)}function Lc(y){const{auth:d,user:p}=y;return Ie(p,d,"internal-error"),en(p,new Ur(y),y.bypassAuthState)}function br(y){return yl.apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(y){const{auth:d,user:p}=y;return Ie(p,d,"internal-error"),iu(p,new Ur(y),y.bypassAuthState)})).apply(this,arguments)}class Cu{constructor(d,p,_,D,M=!1){this.auth=d,this.resolver=_,this.user=D,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,f.Z)(function*(_,D){d.pendingPromise={resolve:_,reject:D};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(M){d.reject(M)}});return function(_,D){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:D,postBody:M,tenantId:U,error:W,type:ve}=d;if(W)return void p.reject(W);const pe={auth:p.auth,requestUri:_,sessionId:D,tenantId:U||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ve)(pe))}catch(Ne){p.reject(Ne)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Fc;case"linkViaPopup":case"linkViaRedirect":return br;case"reauthViaPopup":case"reauthViaRedirect":return Lc;default:Dn(this.auth,"internal-error")}}resolve(d){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const me=new ft(2e3,1e4);function da(){return(da=(0,f.Z)(function*(y,d,p){const _=un(y);Rr(y,d,ln);const D=$s(_,p);return new He(_,"signInViaPopup",d,D).executeNotNull()})).apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y);Rr(_.auth,d,ln);const D=$s(_.auth,p);return new He(_.auth,"reauthViaPopup",d,D,_).executeNotNull()})).apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y);Rr(_.auth,d,ln);const D=$s(_.auth,p);return new He(_.auth,"linkViaPopup",d,D,_).executeNotNull()})).apply(this,arguments)}let He=(()=>{class y extends Cu{constructor(p,_,D,M,U){super(p,_,M,U),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const _=yield p.execute();return Ie(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,f.Z)(function*(){qe(1===p.filter.length,"Popup operations only handle one event");const _=_o();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(D=>{p.reject(D)}),p.resolver._isIframeWebStorageSupported(p.auth,D=>{D||p.reject(Jt(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,D;this.pollId=null!==(D=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,me.get())};p()}}return y.currentPopupAction=null,y})();const ot=new Map;class Vc extends Cu{constructor(d,p,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,f.Z)(function*(){let _=ot.get(p.auth._key());if(!_){try{const M=(yield function is(y,d){return Lp.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;_=()=>Promise.resolve(M)}catch(D){_=()=>Promise.reject(D)}ot.set(p.auth._key(),_)}return p.bypassAuthState||ot.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(_,d);if("unknown"!==d.type){if(d.eventId){const D=yield _.auth._redirectUserForId(d.eventId);if(D)return _.user=D,p().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Lp(){return(Lp=(0,f.Z)(function*(y,d){const p=E(d),_=sr(y);if(!(yield _._isAvailable()))return!1;const D="true"===(yield _._get(p));return yield _._remove(p),D})).apply(this,arguments)}function Uc(y,d){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(y,d){return sr(y)._set(E(d),"true")})).apply(this,arguments)}function Tu(y,d){ot.set(y._key(),d)}function sr(y){return Fr(y._redirectPersistence)}function E(y){return ms("pendingRedirect",y.config.apiKey,y.name)}function R(){return(R=(0,f.Z)(function*(y,d,p){const _=un(y);Rr(y,d,ln),yield _._initializationPromise;const D=$s(_,p);return yield Uc(D,_),D._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y);Rr(_.auth,d,ln),yield _.auth._initializationPromise;const D=$s(_.auth,p);yield Uc(D,_.auth);const M=yield vl(_);return D._openRedirect(_.auth,d,"reauthViaRedirect",M)})).apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(y,d,p){const _=(0,k.m9)(y);Rr(_.auth,d,ln),yield _.auth._initializationPromise;const D=$s(_.auth,p);yield Ya(!1,_,d.providerId),yield Uc(D,_.auth);const M=yield vl(_);return D._openRedirect(_.auth,d,"linkViaRedirect",M)})).apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(y,d){return yield un(y)._initializationPromise,or(y,d,!1)})).apply(this,arguments)}function or(y,d){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(y,d,p=!1){const _=un(y),D=$s(_,d),U=yield new Vc(_,D,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield _._persistUserIfCurrent(U.user),yield _._setRedirectUser(null,d)),U})).apply(this,arguments)}function vl(y){return An.apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(y){const d=_o(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Br{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(p=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Du(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ar(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var _;if(d.error&&!ar(d)){const D=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(Jt(this.auth,D))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const _=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ti(d))}saveEventToCache(d){this.cachedEventUids.add(Ti(d)),this.lastProcessedEventTime=Date.now()}}function Ti(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function ar({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===d?.code}function jc(y){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(y,d={}){return jt(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Up=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fh=/^https?/;function $c(){return($c=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield jc(y);for(const p of d)try{if(av(p))return}catch{}Dn(y,"unauthorized-domain")})).apply(this,arguments)}function av(y){const d=st(),{protocol:p,hostname:_}=new URL(d);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===_}if(!Fh.test(p))return!1;if(Up.test(y))return _===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(_)}const Su=new ft(3e4,6e4);function zm(){const y=Un().___jsl;if(y?.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Au=null;function jp(y){return Au=Au||function Gc(y){return new Promise((d,p)=>{var _,D,M;function U(){zm(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{zm(),p(Jt(y,"network-request-failed"))},timeout:Su.get()})}if(null!==(D=null===(_=Un().gapi)||void 0===_?void 0:_.iframes)&&void 0!==D&&D.Iframe)d(gapi.iframes.getContext());else{if(null===(M=Un().gapi)||void 0===M||!M.load){const W=wc("iframefcb");return Un()[W]=()=>{gapi.load?U():p(Jt(y,"network-request-failed"))},th(`https://apis.google.com/js/api.js?onload=${W}`).catch(ve=>p(ve))}U()}}).catch(d=>{throw Au=null,d})}(y),Au}const Lh=new ft(5e3,15e3),Mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wm(y){const d=y.config;Ie(d.authDomain,y,"auth-domain-config-required");const p=d.emulator?er(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:d.apiKey,appName:y.name,v:re.SDK_VERSION},D=qm.get(y.config.apiHost);D&&(_.eid=D);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${p}?${(0,k.xO)(_).slice(1)}`}function wl(){return wl=(0,f.Z)(function*(y){const d=yield jp(y),p=Un().gapi;return Ie(p,y,"internal-error"),d.open({where:document.body,url:Wm(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mu,dontclear:!0},_=>new Promise(function(){var D=(0,f.Z)(function*(M,U){yield _.restyle({setHideOnLeave:!1});const W=Jt(y,"network-request-failed"),ve=Un().setTimeout(()=>{U(W)},Lh.get());function pe(){Un().clearTimeout(ve),M(_)}_.ping(pe).then(pe,()=>{U(W)})});return function(M,U){return D.apply(this,arguments)}}()))}),wl.apply(this,arguments)}const Uh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zm{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const uv=encodeURIComponent("fac");function zc(y,d,p,_,D,M){return qc.apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(y,d,p,_,D,M){Ie(y.config.authDomain,y,"auth-domain-config-required"),Ie(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:re.SDK_VERSION,eventId:D};if(d instanceof ln){d.setDefaultLanguage(y.languageCode),U.providerId=d.providerId||"",(0,k.xb)(d.getCustomParameters())||(U.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ne,Le]of Object.entries(M||{}))U[Ne]=Le}if(d instanceof nu){const Ne=d.getScopes().filter(Le=>""!==Le);Ne.length>0&&(U.scopes=Ne.join(","))}y.tenantId&&(U.tid=y.tenantId);const W=U;for(const Ne of Object.keys(W))void 0===W[Ne]&&delete W[Ne];const ve=yield y._getAppCheckToken(),pe=ve?`#${uv}=${encodeURIComponent(ve)}`:"";return`${Hh(y)}?${(0,k.xO)(W).slice(1)}${pe}`})).apply(this,arguments)}function Hh({config:y}){return y.emulator?er(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const $n="webStorageSupport";class zp extends class Gp{constructor(d){this.factorId=d}_process(d,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,_);case"signin":return this._finalizeSignIn(d,p.credential);default:return Ot("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new zp(d)}_finalizeEnroll(d,p,_){return function Ap(y,d){return jt(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,d))}(d,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function ca(y,d){return jt(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jm=(()=>{class y{constructor(){}static assertion(p){return zp._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Xm="@firebase/auth";class pa{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}function Ru(){return(Ru=(0,f.Z)(function*(y,d,p){var _;const{BuildInfo:D}=qs();qe(d.sessionId,"AuthEvent did not contain a session ID");const M=yield ny(d.sessionId),U={};return ys()?U.ibi=D.packageName:nr()?U.apn=D.packageName:Dn(y,"operation-not-supported-in-this-environment"),D.displayName&&(U.appDisplayName=D.displayName),U.sessionId=M,zc(y,p,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,U)})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(y){const{BuildInfo:d}=qs(),p={};ys()?p.iosBundleId=d.packageName:nr()?p.androidPackageName=d.packageName:Dn(y,"operation-not-supported-in-this-environment"),yield jc(y,p)})).apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,d,p){const{cordova:_}=qs();let D=()=>{};try{yield new Promise((M,U)=>{let W=null;function ve(){var Le;M();const St=null===(Le=_.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof St&&St(),"function"==typeof p?.close&&p.close()}function pe(){W||(W=window.setTimeout(()=>{U(Jt(y,"redirect-cancelled-by-user"))},2e3))}function Ne(){"visible"===document?.visibilityState&&pe()}d.addPassiveListener(ve),document.addEventListener("resume",pe,!1),nr()&&document.addEventListener("visibilitychange",Ne,!1),D=()=>{d.removePassiveListener(ve),document.removeEventListener("resume",pe,!1),document.removeEventListener("visibilitychange",Ne,!1),W&&window.clearTimeout(W)}})}finally{D()}})).apply(this,arguments)}function ny(y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,f.Z)(function*(y){const d=Yc(y),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yc(y){if(qe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),p=new Uint8Array(d);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,k.Pz)("authIdTokenMaxAge"),function Kp(y){(0,re._registerComponent)(new pn.wA("auth",(d,{options:p})=>{const _=d.getProvider("app").getImmediate(),D=d.getProvider("heartbeat"),M=d.getProvider("app-check-internal"),{apiKey:U,authDomain:W}=_.options;Ie(U&&!U.includes(":"),"invalid-api-key",{appName:_.name});const ve={apiKey:U,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:km(y)},pe=new Ec(_,D,M,ve);return function sh(y,d){const p=d?.persistence||[],_=(Array.isArray(p)?p:[p]).map(Fr);d?.errorMap&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(_,d?.popupRedirectResolver)}(pe,p),pe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,_)=>{d.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new pn.wA("auth-internal",d=>{const p=un(d.getProvider("auth").getImmediate());return new pa(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Xm,"0.23.2",function Wp(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(Xm,"0.23.2","esm2017")}("Browser");class ma extends Br{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,f.Z)(function*(){yield d.initPromise})()}}function ui(y){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,f.Z)(function*(y){const d=yield Jc()._get(ya(y));return d&&(yield Jc()._remove(ya(y))),d})).apply(this,arguments)}function Kh(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*d.length);y.push(d.charAt(_))}return y.join("")}function Jc(){return Fr(ul)}function ya(y){return ms("authEvent",y.config.apiKey,y.name)}function Eo(y){if(!y?.includes("?"))return{};const[d,...p]=y.split("?");return(0,k.zd)(p.join("?"))}function Xc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jt("no-auth-event")}}function ss(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function sy(y=(0,k.z$)()){return!("file:"!==ss()&&"ionic:"!==ss()&&"capacitor:"!==ss()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xh(){try{const y=self.localStorage,d=_o();if(y)return y.setItem(d,"1"),y.removeItem(d),!function Jh(y=(0,k.z$)()){return function gv(){return(0,k.w1)()&&11===document?.documentMode}()||function T0(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return ku()&&(0,k.hl)()}return!1}function ku(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bl(){return(function Qp(){return"http:"===ss()||"https:"===ss()}()||(0,k.ru)()||sy())&&!function pv(){return(0,k.b$)()||(0,k.UG)()}()&&Xh()&&!ku()}function _a(){return sy()&&typeof document<"u"}function td(){return(td=(0,f.Z)(function*(){return!!_a()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=Ie,Xp="persistence";function Zs(y){return nd.apply(this,arguments)}function nd(){return(nd=(0,f.Z)(function*(y){yield y._initializationPromise;const d=rd(),p=ms(Xp,y.config.apiKey,y.name);d&&d.setItem(p,y._getPersistence())})).apply(this,arguments)}function rd(){var y;try{return(null===(y=function Io(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const In=Ie;class Ys{constructor(){this.browserResolver=Fr(class Tr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sn,this._completeRedirectFn=or,this._overrideRedirectResult=Tu}_openPopup(d,p,_,D){var M=this;return(0,f.Z)(function*(){var U;qe(null===(U=M.eventManagers[d._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const W=yield zc(d,p,_,st(),D);return function jh(y,d,p,_=500,D=600){const M=Math.max((window.screen.availHeight-D)/2,0).toString(),U=Math.max((window.screen.availWidth-_)/2,0).toString();let W="";const ve=Object.assign(Object.assign({},Uh),{width:_.toString(),height:D.toString(),top:M,left:U}),pe=(0,k.z$)().toLowerCase();p&&(W=Qd(pe)?"_blank":p),ao(pe)&&(d=d||"http://localhost",ve.scrollbars="yes");const Ne=Object.entries(ve).reduce((St,[zn,jr])=>`${St}${zn}=${jr},`,"");if(function Kl(y=(0,k.z$)()){var d;return ys(y)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(pe)&&"_self"!==W)return function Ym(y,d){const p=document.createElement("a");p.href=y,p.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(d||"",W),new Zm(null);const Le=window.open(d||"",W,Ne);Ie(Le,y,"popup-blocked");try{Le.focus()}catch{}return new Zm(Le)}(d,W,_o())})()}_openRedirect(d,p,_,D){var M=this;return(0,f.Z)(function*(){return yield M._originValidation(d),function Dh(y){Un().location.href=y}(yield zc(d,p,_,st(),D)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:D,promise:M}=this.eventManagers[p];return D?Promise.resolve(D):(qe(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(d);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(d){var p=this;return(0,f.Z)(function*(){const _=yield function xu(y){return wl.apply(this,arguments)}(d),D=new Br(d);return _.register("authEvent",M=>(Ie(M?.authEvent,d,"invalid-auth-event"),{status:D.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:D},p.iframes[d._key()]=_,D})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send($n,{type:$n},D=>{var M;const U=null===(M=D?.[0])||void 0===M?void 0:M[$n];void 0!==U&&p(!!U),Dn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Bp(y){return $c.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return yc()||Kn()||ys()}}),this.cordovaResolver=Fr(class Qh{constructor(){this._redirectPersistence=Sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=or,this._overrideRedirectResult=Tu}_initialize(d){var p=this;return(0,f.Z)(function*(){const _=d._key();let D=p.eventManagers.get(_);return D||(D=new ma(d),p.eventManagers.set(_,D),p.attachCallbackListeners(d,D)),D})()}_openPopup(d){Dn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,_,D){var M=this;return(0,f.Z)(function*(){!function hv(y){var d,p,_,D,M,U,W,ve,pe,Ne;const Le=qs();Ie("function"==typeof(null===(d=Le?.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(typeof(null===(p=Le?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(M=null===(D=null===(_=Le?.cordova)||void 0===_?void 0:_.plugins)||void 0===D?void 0:D.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(ve=null===(W=null===(U=Le?.cordova)||void 0===U?void 0:U.plugins)||void 0===W?void 0:W.browsertab)||void 0===ve?void 0:ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(Ne=null===(pe=Le?.cordova)||void 0===pe?void 0:pe.InAppBrowser)||void 0===Ne?void 0:Ne.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const U=yield M._initialize(d);yield U.initialized(),U.resetRedirect(),function Vp(){ot.clear()}(),yield M._originValidation(d);const W=function Qc(y,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Kh(),postBody:null,tenantId:y.tenantId,error:Jt(y,"no-auth-event")}}(d,_,D);yield function ry(y,d){return Jc()._set(ya(y),d)}(d,W);const ve=yield function zh(y,d,p){return Ru.apply(this,arguments)}(d,W,p),pe=yield function dv(y){const{cordova:d}=qs();return new Promise(p=>{d.plugins.browsertab.isAvailable(_=>{let D=null;_?d.plugins.browsertab.openUrl(y):D=d.InAppBrowser.open(y,function Qi(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(D)})})}(ve);return function ty(y,d,p){return ga.apply(this,arguments)}(d,U,pe)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function qh(y){return Ws.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:_,handleOpenURL:D,BuildInfo:M}=qs(),U=setTimeout((0,f.Z)(function*(){yield ui(d),p.onEvent(Xc())}),500),W=function(){var Ne=(0,f.Z)(function*(Le){clearTimeout(U);const St=yield ui(d);let zn=null;St&&Le?.url&&(zn=function Il(y,d){var p,_;const D=function Zp(y){const d=Eo(y),p=d.link?decodeURIComponent(d.link):void 0,_=Eo(p).link,D=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Eo(D).link||D||_||p||y}(d);if(D.includes("/__/auth/callback")){const M=Eo(D),U=M.firebaseError?function Zh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,W=null===(_=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],ve=W?Jt(W):null;return ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(St,Le.url)),p.onEvent(zn||Xc())});return function(St){return Ne.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,W);const ve=D,pe=`${M.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var Ne=(0,f.Z)(function*(Le){if(Le.toLowerCase().startsWith(pe)&&W({url:Le}),"function"==typeof ve)try{ve(Le)}catch(St){console.error(St)}});return function(Le){return Ne.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Sn,this._completeRedirectFn=or,this._overrideRedirectResult=Tu}_initialize(d){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,_,D){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(d,p,_,D)})()}_openRedirect(d,p,_,D){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(d,p,_,D)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _a()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return In(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,f.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Jp(){return td.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function id(y){return y.unwrap()}function mv(y){return ay(y)}function ay(y){const{_tokenResponse:d}=y instanceof k.ZR?y.customData:y;if(!d)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return ml.credentialFromResult(y);const p=d.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Wr;break;case"facebook.com":_=qr;break;case"github.com":_=ns;break;case"twitter.com":_=vp;break;default:const{oauthIdToken:D,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:W,nonce:ve}=d;return M||U||D||W?W?p.startsWith("saml.")?Er._create(p,W):es._fromParams({providerId:p,signInMethod:p,pendingToken:W,idToken:D,accessToken:M}):new Wo(p).credential({idToken:D,accessToken:M,rawNonce:ve}):null}return y instanceof k.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Di(y,d){return d.catch(p=>{throw p instanceof k.ZR&&function oy(y,d){var p;const _=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new sd(y,function Ih(y,d){var p;const _=(0,k.m9)(y),D=d;return Ie(d.customData.operationType,_,"argument-error"),Ie(null===(p=D.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Eh._fromError(_,D)}(y,d));else if(_){const D=ay(d),M=d;D&&(M.credential=D,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const D=p.user;return{operationType:p.operationType,credential:mv(p),additionalUserInfo:jm(p),user:Sr.getOrCreate(D)}})}function ef(y,d){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,f.Z)(function*(y,d){const p=yield d;return{verificationId:p.verificationId,confirm:_=>Di(y,p.confirm(_))}})).apply(this,arguments)}class sd{constructor(d,p){this.resolver=p,this.auth=function Fu(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Di(id(this.auth),this.resolver.resolveSignIn(d))}}class Sr{constructor(d){this._delegate=d,this.multiFactor=function xp(y){const d=(0,k.m9)(y);return Th.has(d)||Th.set(d,Mp._fromUser(d)),Th.get(d)}(d)}static getOrCreate(d){return Sr.USER_MAP.has(d)||Sr.USER_MAP.set(d,new Sr(d)),Sr.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,f.Z)(function*(){return Di(p.auth,Dc(p._delegate,d))})()}linkWithPhoneNumber(d,p){var _=this;return(0,f.Z)(function*(){return ef(_.auth,function gl(y,d,p){return Iu.apply(this,arguments)}(_._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,f.Z)(function*(){return Di(p.auth,function ha(y,d,p){return Cr.apply(this,arguments)}(p._delegate,d,Ys))})()}linkWithRedirect(d){var p=this;return(0,f.Z)(function*(){return yield Zs(un(p.auth)),function Re(y,d,p){return function Ve(y,d,p){return We.apply(this,arguments)}(y,d,p)}(p._delegate,d,Ys)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,f.Z)(function*(){return Di(p.auth,ou(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return ef(this.auth,function Fp(y,d,p){return mt.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Di(this.auth,function wo(y,d,p){return zt.apply(this,arguments)}(this._delegate,d,Ys))}reauthenticateWithRedirect(d){var p=this;return(0,f.Z)(function*(){return yield Zs(un(p.auth)),function z(y,d,p){return function Q(y,d,p){return he.apply(this,arguments)}(y,d,p)}(p._delegate,d,Ys)})()}sendEmailVerification(d){return function Ii(y,d){return ra.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,f.Z)(function*(){return yield function Cc(y,d){return Za.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Sc(y,d){return mo((0,k.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function bp(y,d){return mo((0,k.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Gm(y,d){return bu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ol(y,d){return sa.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function ia(y,d,p){return il.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sr.USER_MAP=new WeakMap;const Vu=Ie;let Gn=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=p.options;Vu(D,"invalid-api-key",{appName:p.name}),Vu(D,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Ys:void 0;this._delegate=_.initialize({options:{persistence:Uu(D,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ho),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Zl(y,d,p){const _=un(y);Ie(_._canInitEmulator,_,"emulator-config-failed"),Ie(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const D=!!p?.disableWarnings,M=Yl(d),{host:U,port:W}=function oh(y){const d=Yl(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(_);if(D){const M=D[1];return{host:M,port:ah(_.substr(M.length+1))}}{const[M,U]=_.split(":");return{host:M,port:ah(U)}}}(d);_.config.emulator={url:`${M}//${U}${null===W?"":`:${W}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:U,port:W,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Os(){function y(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function Ep(y,d){return tl.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return nl(this._delegate,p)}confirmPasswordReset(p,_){return function vh(y,d,p){return au.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var D=this;return(0,f.Z)(function*(){return Di(D._delegate,function ea(y,d,p){return uu.apply(this,arguments)}(D._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function hu(y,d){return po.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Li(y,d){return"EMAIL_SIGNIN"===Fs.parseLink(d)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){Vu(bl(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function It(y,d){return ut.apply(this,arguments)}(p._delegate,Ys);return _?Di(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ed(y,d){un(y)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,_,D){const{next:M,error:U,complete:W}=tg(p,_,D);return this._delegate.onAuthStateChanged(M,U,W)}onIdTokenChanged(p,_,D){const{next:M,error:U,complete:W}=tg(p,_,D);return this._delegate.onIdTokenChanged(M,U,W)}sendSignInLinkToEmail(p,_){return function ta(y,d,p){return du.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function wp(y,d,p){return Vs.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,f.Z)(function*(){let D;switch(function va(y,d){Cl(Object.values(Dr).includes(d),y,"invalid-persistence-type"),(0,k.b$)()?Cl(d!==Dr.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Cl(d===Dr.NONE,y,"unsupported-persistence-type"):ku()?Cl(d===Dr.NONE||d===Dr.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Cl(d===Dr.NONE||Xh(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Dr.SESSION:D=Sn;break;case Dr.LOCAL:D=(yield Fr(ua)._isAvailable())?ua:ul;break;case Dr.NONE:D=wi;break;default:return Dn("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Di(this._delegate,function oi(y){return ru.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Di(this._delegate,Qa(this._delegate,p))}signInWithCustomToken(p){return Di(this._delegate,function _h(y,d){return Xa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Di(this._delegate,function cu(y,d,p){return Qa((0,k.m9)(y),bc.credential(d,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Di(this._delegate,function na(y,d,p){return bs.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return ef(this._delegate,function Hs(y,d,p){return Bn.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,f.Z)(function*(){return Vu(bl(),_._delegate,"operation-not-supported-in-this-environment"),Di(_._delegate,function _l(y,d,p){return da.apply(this,arguments)}(_._delegate,p,Ys))})()}signInWithRedirect(p){var _=this;return(0,f.Z)(function*(){return Vu(bl(),_._delegate,"operation-not-supported-in-this-environment"),yield Zs(_._delegate),function C(y,d,p){return function x(y,d,p){return R.apply(this,arguments)}(y,d,p)}(_._delegate,p,Ys)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function rl(y,d){return lu.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Dr,y})();function tg(y,d,p){let _=y;"function"!=typeof y&&({next:_,error:d,complete:p}=y);const D=_;return{next:U=>D(U&&Sr.getOrCreate(U)),error:d,complete:p}}function Uu(y,d){const p=function eg(y,d){const p=rd();if(!p)return[];const _=ms(Xp,y,d);switch(p.getItem(_)){case Dr.NONE:return[wi];case Dr.LOCAL:return[ua,Sn];case Dr.SESSION:return[Sn];default:return[]}}(y,d);if(typeof self<"u"&&!p.includes(ua)&&p.push(ua),typeof window<"u")for(const _ of[ul,Sn])p.includes(_)||p.push(_);return p.includes(wi)||p.push(wi),p}class od{constructor(){this.providerId="phone",this._delegate=new ml(id(X.Z.auth()))}static credential(d,p){return ml.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}od.PHONE_SIGN_IN_METHOD=ml.PHONE_SIGN_IN_METHOD,od.PROVIDER_ID=ml.PROVIDER_ID;const ly=Ie;class uy{constructor(d,p,_=X.Z.app()){var D;ly(null===(D=_.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new wu(d,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cy(y){y.INTERNAL.registerComponent(new pn.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new Gn(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bc,FacebookAuthProvider:qr,GithubAuthProvider:ns,GoogleAuthProvider:Wr,OAuthProvider:Wo,SAMLAuthProvider:qa,PhoneAuthProvider:od,PhoneMultiFactorGenerator:Jm,RecaptchaVerifier:uy,TwitterAuthProvider:vp,Auth:Gn,AuthCredential:vs,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},1670:(at,Te,V)=>{function f(k,re,oe,K,ye,le,te){try{var F=k[le](te),j=F.value}catch(B){return void oe(B)}F.done?re(j):Promise.resolve(j).then(K,ye)}function X(k){return function(){var re=this,oe=arguments;return new Promise(function(K,ye){var le=k.apply(re,oe);function te(j){f(le,K,ye,te,F,"next",j)}function F(j){f(le,K,ye,te,F,"throw",j)}te(void 0)})}}V.d(Te,{Z:()=>X})}},at=>{at(at.s=2069)}]);
//# sourceMappingURL=main.63ac473ca0c8aa7c.js.map